(this["webpackJsonpdhg-workflow"]=this["webpackJsonpdhg-workflow"]||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){},118:function(e,t,a){},228:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),o=a(59),l=a.n(o),i=(a(104),a(10)),d=(a(105),a(5)),r=a(18),s=a(19),u=a(37),b=a(36),y=a(20),h=a.n(y),p=a(92),j=a.n(p),O=a(93),g=a.n(O),x=a(99),f={width:"100px",height:"50px",shape:"rectangle",opacity:1,"background-color":"#e0f2f1","border-color":"#000","border-width":"2px","text-valign":"center","text-halign":"center"},v={"target-arrow-shape":"triangle",width:"2px","line-color":"#000","target-arrow-color":"#000"},m=[{selector:'node[type = "ordin"]',style:Object(d.a)({content:"data(label)"},f)},{selector:"edge",style:Object(d.a)({"curve-style":"bezier"},v)},{selector:"edge[label]",style:{label:"data(label)",width:3,"edge-text-rotation":"autorotate","text-margin-y":"10px"}},{selector:".eh-handle",style:{"background-color":"#f00",height:20,width:20,opacity:.5}},{selector:'node[type="special"]',style:{width:10,height:10,backgroundColor:"red"}}],E={style:Object(x.a)(m),zoomingEnabled:!0,userZoomingEnabled:!0},w=a(25),N=a(11),C=a(113)({$$typeof:"",Model_Open_Create_Node:"OpenModal_CreateNode",Model_Open_Create_Edge:"OpenModal_CreateEdge",Model_Open_Update_Edge:"OpenModal_UpdateEdge",Model_Open_Update_Node:"OpenModal_UpdateNode",Model_Close:"CloseModal",ELE_UNSELECTED:"ELE_UNSELECTED",ELE_SELECTED:"ELE_SELECTED",TURN_DRAW:"TURN_DRAW"}),M=(a(118),a(98)),k=a(4),_=function(e){var t=e.color,a=e.setColor,n=c.a.useState(!1),o=Object(i.a)(n,2),l=o[0],d=o[1];return Object(k.jsxs)("div",{role:"button",tabIndex:0,className:"color-box-par",onClick:function(){return!l&&d(!0)},onKeyDown:function(e){return 13===e.key&&!l&&d(!0)},children:[Object(k.jsx)("div",{className:"color-box",style:{background:t}}),Object(k.jsxs)("div",{className:"color-picker",style:{display:l?"block":"none"},children:[Object(k.jsx)("div",{role:"button",className:"overlay",onClick:function(){return d(!1)}}),Object(k.jsx)(M.a,{color:t,onChangeComplete:function(e){return a(e.hex)}})]})]})},S={height:"100px",minHeight:"100px",width:"auto",background:"aliceblue",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"},L={border:"1px solid black",width:"100px",height:"50px",backgroundColor:"#888",display:"inline-flex",justifyContent:"center",alignItems:"center",whiteSpace:"nowrap"},D=function(e){var t=e.data,a=e.setData,n=e.submit,c=e.labelAllowed,o=Object(d.a)(Object(d.a)({},L),{},{backgroundColor:t.style["background-color"],borderColor:t.style["border-color"],borderWidth:t.style["border-width"],textValign:t.style["text-valign"],textHalign:t.style["text-halign"],width:t.style.width,height:t.style.height,opacity:t.style.opacity}),l=Object(d.a)(Object(d.a)({},S),{},{height:t.style.height}),i=function(e){a(Object(d.a)(Object(d.a)({},t),{},{style:Object(d.a)(Object(d.a)({},t.style),e)}))};return Object(k.jsxs)("div",{className:"nodeform",onSubmit:n,children:[Object(k.jsx)("div",{style:l,children:Object(k.jsx)("div",{style:o,children:c?t.label:""})}),Object(k.jsxs)("div",{className:"form",style:{padding:20},children:[c?Object(k.jsx)("div",{children:" Label"}):"",c?Object(k.jsx)("input",{className:"nodeLabel",type:"text",required:!0,label:"Node Label",value:t.label,placeholder:"Enter Node Label",onChange:function(e){return a(Object(d.a)(Object(d.a)({},t),{},{label:"".concat(e.target.value)}))}}):"",Object(k.jsx)("div",{children:" Width"}),Object(k.jsx)("input",{type:"number",value:t.style.width.slice(0,-2),onChange:function(e){return i(Object(d.a)(Object(d.a)({},t.style),{},{width:"".concat(Math.min(500,e.target.value),"px")}))}}),Object(k.jsx)("div",{children:" Height"}),Object(k.jsx)("input",{type:"number",value:t.style.height.slice(0,-2),onChange:function(e){return i(Object(d.a)(Object(d.a)({},t.style),{},{height:"".concat(Math.min(200,e.target.value),"px")}))}}),Object(k.jsx)("div",{children:" Background Color"}),Object(k.jsx)(_,{color:t.style["background-color"],setColor:function(e){return i(Object(d.a)(Object(d.a)({},t.style),{},{"background-color":e}))}}),Object(k.jsx)("div",{children:" Border Color"}),Object(k.jsx)(_,{color:t.style["border-color"],setColor:function(e){return i(Object(d.a)(Object(d.a)({},t.style),{},{"border-color":e}))}}),Object(k.jsx)("div",{children:" Border Width"}),Object(k.jsx)("input",{type:"number",value:t.style["border-width"].slice(0,-2),onChange:function(e){return i(Object(d.a)(Object(d.a)({},t.style),{},{"border-width":"".concat(Math.min(30,e.target.value),"px")}))}}),Object(k.jsx)("div",{children:" Opacity"}),Object(k.jsx)("input",{type:"number",step:".01",value:t.style.opacity,onChange:function(e){return i(Object(d.a)(Object(d.a)({},t.style),{},{opacity:Math.min(1,Math.max(0,e.target.value))}))}})]})]})},I=(a(228),{height:"100px",minHeight:"100px",width:"auto",background:"aliceblue",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"}),B={border:"none",width:"240px",height:"2px",backgroundColor:"#000",display:"inline-block"},T=function(e){var t=e.size,a=e.color,n=5*parseInt(t,10),c={borderLeft:"".concat(.8666*n,"px solid ").concat(a),borderBottom:"".concat(n/2,"px solid transparent"),borderTop:"".concat(n/2,"px solid transparent"),marginLeft:-1};return Object(k.jsx)("div",{style:c})},P=function(e){var t=e.data,a=e.setData,n=e.submit,c=e.labelAllowed,o=Object(d.a)(Object(d.a)({},B),{},{backgroundColor:t.style["line-color"],height:t.style.width}),l=Object(d.a)(Object(d.a)({},I),{},{height:t.style.height}),i=function(e){a(Object(d.a)(Object(d.a)({},t),{},{style:Object(d.a)(Object(d.a)({},t.style),e)}))};return Object(k.jsxs)("div",{className:"edgeform",onSubmit:n,children:[Object(k.jsxs)("div",{style:l,children:[Object(k.jsx)("div",{style:o}),Object(k.jsx)(T,{size:t.style.width.slice(0,-2),color:t.style["line-color"]}),Object(k.jsx)("div",{className:"label",children:t.label})]}),Object(k.jsxs)("div",{className:"form",style:{padding:20},children:[c?Object(k.jsx)("div",{children:" Label"}):"",c?Object(k.jsx)("input",{className:"edgeLabel",type:"text",required:!0,label:"Edge Label",value:t.label,placeholder:"Enter Edge Label",onChange:function(e){return a(Object(d.a)(Object(d.a)({},t),{},{label:"".concat(e.target.value)}))}}):"",Object(k.jsx)("div",{children:" Width"}),Object(k.jsx)("input",{type:"number",value:t.style.width.slice(0,-2),onChange:function(e){return i({width:"".concat(Math.max(0,Math.min(20,e.target.value)),"px")})}}),Object(k.jsx)("div",{children:" Background Color"}),Object(k.jsx)(_,{color:t.style["line-color"],setColor:function(e){return i({"line-color":e,"target-arrow-color":e})}})]})]})},A=function(e,t){switch(t.type){case C.Model_Open_Create_Node:return Object(d.a)(Object(d.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Create Node",submitText:"Create Node",Children:D,defaultStyle:f,defaultLabel:"",labelAllowed:!0,cb:t.cb}});case C.Model_Open_Create_Edge:return Object(d.a)(Object(d.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Create Edge",submitText:"Create Edge",Children:P,defaultStyle:v,defaultLabel:"",labelAllowed:!0,cb:t.cb}});case C.Model_Open_Update_Node:return Object(d.a)(Object(d.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Edit Node",submitText:"Edit Node",Children:D,defaultStyle:t.style,defaultLabel:t.label,labelAllowed:t.nameAllowed,cb:t.cb}});case C.Model_Open_Update_Edge:return Object(d.a)(Object(d.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Edit Edge",submitText:"Edit Edge",Children:P,defaultStyle:t.style,defaultLabel:t.label,labelAllowed:t.nameAllowed,cb:t.cb}});case C.Model_Close:return Object(d.a)(Object(d.a)({},e),{},{ModelOpen:!1});case C.ELE_SELECTED:return Object(d.a)(Object(d.a)({},e),{},{eleSelected:!0,eleSelectedPayload:t.payload});case C.ELE_UNSELECTED:return Object(d.a)(Object(d.a)({},e),{},{eleSelected:!1});case C.TURN_DRAW:return Object(d.a)(Object(d.a)({},e),{},{drawModeOn:t.payload});default:return e}},U={ModelOpen:!1,eleSelected:!1,drawModeOn:!0},R=new(function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"addTestData",value:function(){return this.addNode("A",{},"ordin",{x:100,y:100},1),this.addNode("B",{},"ordin",{x:500,y:100},2),this}},{key:"getRealNode",value:function(e){return this.getById(e).incomers().filter("node")[0]}},{key:"addAutoMove",value:function(e,t){this.cy.automove({nodesMatching:e,reposition:"drag",dragWith:t}),this.cy.automove({nodesMatching:e,reposition:function(e){var a=e.position(),n=t.position(),c=[t.height(),t.width()],o=c[0],l=c[1],d={y:n.y+o/2,x:n.x+l/2},r={y:n.y-o/2,x:n.x-l/2};if(a.x=Math.min(d.x,Math.max(a.x,r.x)),a.y=Math.min(d.y,Math.max(a.y,r.y)),a.x<d.x&&a.y<d.y&&a.x>r.x&&a.y>r.y){var s=[[Math.abs(a.x-d.x),"X",d.x],[Math.abs(a.x-r.x),"X",r.x],[Math.abs(a.y-d.y),"Y",d.y],[Math.abs(a.y-r.y),"Y",r.y]];if(s.sort((function(e,t){return e[0]-t[0]})),"X"===s[0][1]){var u=Object(i.a)(s[0],3);a.x=u[2]}if("Y"===s[0][1]){var b=Object(i.a)(s[0],3);a.y=b[2]}}return a},when:"matching"})}},{key:"modifyNewEdge",value:function(e,t,a){var n=this,c=a.sourceEndpoint(),o=t.data("id"),l=e.data("id");if("special"!==e.data("type")){var i=(new Date).getTime();this.dispatcher({type:C.Model_Open_Create_Edge,cb:function(e,t){n.addNode("",{"background-color":t["line-color"]},"special",c,i,{edgeLabel:e,edgeStyle:t}),n.addEdge(l,i,e,Object(d.a)(Object(d.a)({},t),{},{"target-arrow-shape":"none"})),n.addAutoMove(n.getById(i),n.getById(l)),l=i,n.getRealNode(i),a.remove(),n.addEdge(l,o,e,t)}})}else{var r=e.data("edgeLabel"),s=e.data("edgeStyle");a.remove(),this.addEdge(l,o,r,s)}}},{key:"updateEdge",value:function(e,t,n,c){var o=this,l=this.getById(e).source();c&&this.updateData(l.data("id"),"edgeLabel",n),this.updateData(l.data("id"),"edgeStyle",t),this.updateNode([l.data("id")],{"background-color":t["line-color"]},"",!1),l.outgoers("edge").forEach((function(e){return Object(w.a)(Object(N.a)(a.prototype),"updateEdge",o).call(o,e.data("id"),t,n,c)}))}},{key:"deleteElem",value:function(e){var t=this,n=this.getById(e);if(n.isNode())n.outgoers().forEach((function(e){return Object(w.a)(Object(N.a)(a.prototype),"deleteElem",t).call(t,e.id())})),n.connectedEdges().forEach((function(e){return t.deleteElem(e.id())})),Object(w.a)(Object(N.a)(a.prototype),"deleteNode",this).call(this,e);else{var c=n.source();Object(w.a)(Object(N.a)(a.prototype),"deleteEdge",this).call(this,e),0===c.outgoers().length&&this.deleteNode(c.id())}}}]),a}(function(){function e(){Object(r.a)(this,e)}return Object(s.a)(e,[{key:"getById",value:function(e){return this.cy.getElementById(e)}},{key:"setCy",value:function(e){var t=this;this.cy=e,window.cyx=e;var a=function(){var e,a=t.cy.$(":selected");if(0===a.length)return t.dispatcher({type:C.ELE_UNSELECTED});e=a.every((function(e){return e.isNode()}))?"NODE":a.every((function(e){return e.isEdge()}))?"EDGE":"MIX";var n=a.map((function(e){return e.data("id")}));return t.dispatcher({type:C.ELE_SELECTED,payload:{ids:n,type:e}})};this.cy.on("select",a),this.cy.on("unselect",a)}},{key:"setDispatcher",value:function(e){this.dispatcher=e}},{key:"addNode",value:function(e,t,a,n,c,o){var l=c||(new Date).getTime();this.cy.add({group:"nodes",data:Object(d.a)({id:l,label:e,type:a},o),style:t,position:n})}},{key:"addEdge",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.cy.add({group:"edges",data:{source:e,target:t,label:a},style:n})}},{key:"getStyle",value:function(e){var t=this.getById(e).style(),a={};return Object.entries(f).forEach((function(e){a[e[0]]=t[e[0]]})),Object.entries(v).forEach((function(e){a[e[0]]=t[e[0]]})),a}},{key:"getLabel",value:function(e){return this.getById(e).data("label")||this.getById(e).data("label")}},{key:"updateNode",value:function(e,t,a,n){n&&this.getById(e).data("label",a),this.getById(e).style(t)}},{key:"updateEdge",value:function(e,t,a,n){n&&this.getById(e).data("label",a),this.getById(e).style(t)}},{key:"updateData",value:function(e,t,a){return this.getById(e).data(t,a),this}},{key:"modifyNewEdge",value:function(){return this}},{key:"enableDraw",value:function(e){return e?window.cye.enable():window.cye.disable(),this}},{key:"deleteNode",value:function(e){var t=this,a=this.getById(e);a.connectedEdges().forEach((function(e){return t.deleteEdge(e.id())})),a.remove()}},{key:"deleteEdge",value:function(e){this.getById(e).remove()}},{key:"deleteElem",value:function(e){return this.getById(e).isNode()?this.deleteNode(e):this.deleteEdge(e)}}]),e}())),W=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){"function"!==typeof h()("core","edgehandles")&&h.a.use(j.a),"function"!==typeof h()("core","automove")&&h.a.use(g.a),this.cy=h()(Object(d.a)(Object(d.a)({},E),{},{container:document.getElementById("cy")}));var e=this.props.dispatcher;R.setCy(this.cy),R.setDispatcher(e),window.cye=this.cy.edgehandles({preview:!1,handlePosition:function(){return"none"},complete:function(e,t,a){return R.modifyNewEdge(e,t,a)}}),R.addTestData()}},{key:"render",value:function(){return Object(k.jsx)("div",{style:{height:"100%",width:"100%"},id:"cy"})}}]),a}(c.a.Component),G=a(61),z=a.n(G);a(238);z.a.setAppElement("#root");var H=function(e){var t=e.closeModal,a=e.superState,c=Object(n.useState)(""),o=Object(i.a)(c,2),l=o[0],d=o[1],r=Object(n.useState)({}),s=Object(i.a)(r,2),u=s[0],b=s[1],y=a.modalPayload,h=a.ModelOpen,p=y.cb,j=y.title,O=y.submitText,g=y.Children,x=y.defaultStyle,f=y.defaultLabel,v=y.labelAllowed;Object(n.useEffect)((function(){b({label:f||"",style:x}),!0===h&&(d("closing"),setTimeout((function(){d("")}),20))}),[h]);var m=function(){d("closing"),setTimeout((function(){t()}),400)};return Object(k.jsx)(z.a,{isOpen:h,contentLabel:"onRequestClose Example",onRequestClose:m,className:"Modal",overlayClassName:"Overlay ".concat(l),children:Object(k.jsx)("form",{onSubmit:function(e){e.preventDefault(),p(u.label,u.style),m()},children:Object(k.jsxs)("div",{className:"modal-content ".concat(l),children:[Object(k.jsxs)("div",{className:"modal-header",children:[Object(k.jsx)("div",{className:"modal-title h4",children:j}),Object(k.jsxs)("button",{type:"button",className:"close",onClick:m,children:[Object(k.jsx)("span",{"aria-hidden":"true",children:"\xd7"}),Object(k.jsx)("span",{className:"sr-only",children:"Close"})]})]}),Object(k.jsx)("div",{className:"modal-content-body",children:Object(k.jsx)(g,{data:u,setData:b,labelAllowed:v})}),Object(k.jsx)("div",{className:"modal-footer",children:Object(k.jsx)("button",{type:"submit",className:"btn btn-primary",children:O})})]})})})},X=(a(239),a(38)),q=a(62),F=a(8),$=function(e,t){t({type:C.Model_Open_Create_Node,cb:function(e,t){R.addNode(e,t,"ordin",{x:100,y:100})}})},J=function(e,t){var a=1===e.eleSelectedPayload.ids.length;"NODE"===e.eleSelectedPayload.type&&t({type:C.Model_Open_Update_Node,cb:function(t,n){return e.eleSelectedPayload.ids.forEach((function(e){return R.updateNode(e,n,t,a)}))},labelAllowed:a,label:R.getName(e.eleSelectedPayload.ids[0]),style:R.getStyle(e.eleSelectedPayload.ids[0])}),"EDGE"===e.eleSelectedPayload.type&&t({type:C.Model_Open_Update_Edge,cb:function(t,n){return e.eleSelectedPayload.ids.forEach((function(e){return R.updateEdge(e,n,t,a)}))},labelAllowed:a,label:R.getName(e.eleSelectedPayload.ids[0]),style:R.getStyle(e.eleSelectedPayload.ids[0])})},Y=function(e,t){R.enableDraw(!e.drawModeOn),t({type:C.TURN_DRAW,payload:!e.drawModeOn})},K=function(e){e.eleSelectedPayload.ids.forEach((function(e){return R.deleteElem(e)}))},V=function(e){return alert(e)},Z=function(e){return[{type:"action",text:"Node",icon:F.e,action:$,active:!0},{type:"vsep"},{type:"action",text:"Edit",icon:F.b,action:J,active:e.eleSelected&&"MIX"!==e.eleSelectedPayload.type},{type:"action",text:"Open",icon:F.d,action:V,active:!1},{type:"action",text:"Save",icon:F.g,action:V,active:!1},{type:"vsep"},{type:"action",text:"Undo",icon:F.i,action:V,active:!1},{type:"action",text:"Redo",icon:F.f,action:V,active:!1},{type:"vsep"},{type:"action",text:"Delete",icon:F.h,action:K,active:e.eleSelected},{type:"vsep"},{type:"action",text:"In",icon:q.b,action:V,active:!1},{type:"action",text:"Out",icon:q.a,action:V,active:!1},{type:"action",text:"Reset",icon:X.c,action:V,active:!1},{type:"vsep"},{type:"action",text:"On",icon:X.a,action:Y,active:!e.drawModeOn},{type:"action",text:"Off",icon:X.b,action:Y,active:e.drawModeOn},{type:"space"},{type:"action",text:"JPG",icon:F.a,action:V,active:!1},{type:"action",text:"PNG",icon:F.a,action:V,active:!1},{type:"vsep"},{type:"action",text:"Export",icon:F.c,action:V,active:!1}]},Q=function(e){var t=e.Icon,a=e.text,n=e.action,c=e.active,o=e.tabIndex;return Object(k.jsxs)("div",{role:"button",tabIndex:o,className:"tool ".concat(c?"active":""),onClick:n,onKeyDown:function(e){return 13===e.key&&n()},children:[Object(k.jsx)("div",{className:"icon",children:Object(k.jsx)(t,{size:"25"})}),Object(k.jsx)("div",{children:a})]})},ee=function(){return Object(k.jsx)("div",{className:"Vsep sep"})},te=function(){return Object(k.jsx)("div",{className:"hsep sep"})},ae=function(){return Object(k.jsx)("div",{className:"space"})},ne=function(e){var t=e.title,a=e.state,n=e.dispatcher;return Object(k.jsxs)("header",{className:"header",children:[Object(k.jsx)("section",{className:"middle titlebar",children:"".concat(t," - DHGWorkflow Editor")}),Object(k.jsx)("section",{className:"toolbar",children:Z(a,n).map((function(e,t){return"vsep"===e.type?Object(k.jsx)(ee,{},"".concat("v".concat(t))):"space"===e.type?Object(k.jsx)(ae,{},"".concat("s".concat(t))):Object(k.jsx)(Q,{Icon:e.icon,text:e.text,active:e.active,action:function(){return e.action(a,n)},tabIndex:t+1},e.text)}))}),Object(k.jsx)(te,{})]})},ce=function(){var e=Object(n.useReducer)(A,U),t=Object(i.a)(e,2),a=t[0],c=t[1];return Object(k.jsxs)("div",{children:[a.ModelOpen?Object(k.jsx)(H,{closeModal:function(){return c({type:C.Model_Close})},superState:a}):"",Object(k.jsx)(ne,{title:"MyGraph",state:a,dispatcher:c}),Object(k.jsx)("section",{className:"body",children:Object(k.jsx)("div",{className:"graph-container",children:Object(k.jsx)(W,{dispatcher:c})})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var oe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,242)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,l=t.getTTFB;a(e),n(e),c(e),o(e),l(e)}))};l.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(ce,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),oe()}},[[240,1,2]]]);
//# sourceMappingURL=main.0977689c.chunk.js.map