(this["webpackJsonpdhg-workflow"]=this["webpackJsonpdhg-workflow"]||[]).push([[0],{16:function(e,t,a){"use strict";t.a={ADD_NODE:"ADD_NODE",ADD_EDGE:"ADD_EDGE",UPDATE_NODE:"UPDATE_NODE",UPDATE_EDGE:"UPDATE_EDGE",UPDATE_DATA:"UPDATE_DATA",DEL_NODE:"DEL_NODE",DEL_EDGE:"DEL_EDGE",SET_POS:"SET_POS",SET_DIM:"SET_DIM"}},181:function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(27),_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(28),_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(31),_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(30),_calculations_bending_dist_weight__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(44),_graph_actions__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(16),_reducer__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(8),GraphComponent=function GraphComponent(ParentClass){return function(_ParentClass){Object(_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(GC,_ParentClass);var _super=Object(_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__.a)(GC);function GC(){var e;Object(_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__.a)(this,GC);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=_super.call.apply(_super,[this].concat(a))).nodeValidator=a[5],e.edgeValidator=a[6],e.getTid=function(){return(new Date).getTime()},e}return Object(_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__.a)(GC,[{key:"getPos",value:function(){for(var e=this.cy.$("node"),t={x:100,y:100},a=!0;a;){a=!1;for(var n=0;n<e.length;n+=1){var o=e[n].position();a=a||o.x===t.x&&o.y===t.y}a&&(t.x+=10,t.y+=10)}return t}},{key:"addNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ordin",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.getPos(),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this.getTid(),c=this.cy.add({group:"nodes",data:Object(_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},o),{},{id:r,label:e,type:a,style:t}),position:n});return this.addAction({actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.DEL_NODE,parameters:[c.id()]},{actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.ADD_NODE,parameters:[e,t,a,n,o,c.id()]},i),c}},{key:"getEdgesBetweenNodes",value:function(e,t){return this.getById(e).edgesWith(this.getById(t))}},{key:"getBendingD",value:function(e,t){var a=this.getEdgesBetweenNodes(e,t),n=new Set;a.forEach((function(e){n.add(e.data("style").bendDistance)}));for(var o=0;;o+=20){if(!n.has(o))return o;if(!n.has(-o))return-o}}},{key:"parseBendinDW",value:function(e,t,a,n){if("ordin"!==n)return Object(_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},e),{},{bendDistance:0,bendWeight:0});if(e.bendDistance&&e.bendWeight)return e;if(e.bendPoint){var o=e.bendPoint,r=o.x,i=o.y,c=_calculations_bending_dist_weight__WEBPACK_IMPORTED_MODULE_6__.a.getWeightDistance({x:r,y:i},this.getById(t).position(),this.getById(a).position()),s=c.d,d=c.w;return Object(_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},e),{},{bendDistance:s,bendWeight:d})}return Object(_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},e),{},{bendDistance:this.getBendingD(t,a),bendWeight:.5})}},{key:"addEdgeWithLabel",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ordin",r=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this.getTid(),c=this.parseBendinDW(n,e,t,o),s=this.cy.add({group:"edges",data:{source:e,target:t,label:a,type:o,id:r,style:c}});return this.addAction({actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.DEL_EDGE,parameters:[s.id()]},{actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.ADD_EDGE,parameters:[e,t,a,c,o,s.id()]},i),s}},{key:"addEdge",value:function(e,t,a){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ordin",i=arguments.length>5?arguments[5]:void 0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this.getTid();if("ordin"===r&&a)return this.addEdgeWithLabel(e,t,a,o,r,i,c);this.dispatcher({type:_reducer__WEBPACK_IMPORTED_MODULE_8__.a.Model_Open_Create_Edge,cb:function(a,o){var s=n.validiateEdge(a,o,e,t);return s.ok&&n.addEdgeWithLabel(e,t,a,o,r,i,c),s}})}},{key:"getStyle",value:function(e){return this.getById(e).data("style")}},{key:"getLabel",value:function(e){return this.getById(e).data("label")||this.getById(e).data("label")}},{key:"updateNode",value:function(e,t,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getTid();this.addAction({actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.UPDATE_NODE,parameters:[e,this.getStyle(e),this.getById(e).data("label"),n]},{actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.UPDATE_NODE,parameters:[e,t,a,n]},o),n&&this.getById(e).data("label",a),this.getById(e).data("style",t)}},{key:"updateEdge",value:function(e,t,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getTid();this.addAction({actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.UPDATE_EDGE,parameters:[e,this.getStyle(e),this.getById(e).data("label"),n]},{actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.UPDATE_EDGE,parameters:[e,t,a,n]},o),n&&this.getById(e).data("label",a),this.getById(e).data("style",t)}},{key:"updateData",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.getTid();return this.addAction({actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.UPDATE_DATA,parameters:[e,t,this.getById(e).data(t)]},{actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.UPDATE_DATA,parameters:[e,t,a]},n),this.getById(e).data(t,a),this}},{key:"deleteNode",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTid(),n=this.getById(e);n.connectedEdges('[type="ordin"]').forEach((function(e){return t.deleteEdge(e.id(),a)})),n.connectedEdges().forEach((function(e){return t.deleteEdge(e.id(),a)})),this.addAction({actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.ADD_NODE,parameters:[n.data("label"),this.getStyle(n.id()),n.data("type"),n.position(),n.json().data,e]},{actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.DEL_NODE,parameters:[e]},a),n.remove()}},{key:"deleteEdge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTid();if(0!==this.getById(e).length&&!this.getById(e).removed()){var a=this.getById(e).json();this.addAction({actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.ADD_EDGE,parameters:[a.data.source,a.data.target,a.data.label,this.getStyle(e),a.data.type,e]},{actionName:_graph_actions__WEBPACK_IMPORTED_MODULE_7__.a.DEL_EDGE,parameters:[e]},t),this.getById(e).remove()}}},{key:"deleteElem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTid();return this.getById(e).isNode()?this.deleteNode(e,t):this.deleteEdge(e,t)}},{key:"setPos",value:function(e,t){this.getById(e).position(t),this.getById(e).emit("moved")}},{key:"setDim",value:function(e,t,a){var n=this.getById(e).data("style");this.getById(e).data("style",Object(_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},n),{},{height:t.height,width:t.width})),this.setPos(e,a)}},{key:"getNodeValidator",value:function(){var e=[this.nodeValidator.toString().indexOf("{"),this.nodeValidator.toString().lastIndexOf("}")],t=e[0],a=e[1];return this.nodeValidator.toString().slice(t+1,a).trim()}},{key:"getEdgeValidator",value:function(){var e=[this.edgeValidator.toString().indexOf("{"),this.edgeValidator.toString().lastIndexOf("}")],t=e[0],a=e[1];return this.edgeValidator.toString().slice(t+1,a).trim()}},{key:"setEdgeNodeValidator",value:function setEdgeNodeValidator(_ref3){var nodeValidator=_ref3.nodeValidator,edgeValidator=_ref3.edgeValidator;this.nodeValidator=eval(nodeValidator),this.edgeValidator=eval(edgeValidator)}},{key:"getNodesEdges",value:function(){return[this.cy.$('node[type="ordin"]').map((function(e){return{label:e.data("label"),style:e.data("style")}})),this.cy.$('edge[type="ordin"]').map((function(e){return{label:e.data("label"),source:e.source().data("label"),target:e.target().data("label"),style:e.data("style")}}))]}},{key:"validiateComp",value:function(e,t){var a=this.getNodesEdges(),n=Object(_home_runner_work_DHGWorkflow_DHGWorkflow_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(a,2),o=n[0],r=n[1];try{var i=t(e,o,r);return i&&void 0!==i.ok&&void 0!==i.err?i:{ok:!1,err:"Invalid return format from the defined node validator."}}catch(c){return{ok:!1,err:"Error raised at node validator: ".concat(c.message)}}}},{key:"validiateNode",value:function(e,t){return this.validiateComp({label:e,style:t},this.nodeValidator)}},{key:"validiateEdge",value:function(e,t,a,n){return this.validiateComp({label:e,style:t,source:a,target:n},this.edgeValidator)}}]),GC}(ParentClass)};__webpack_exports__.a=GraphComponent},191:function(e,t,a){},192:function(e,t,a){},254:function(e,t,a){},362:function(e,t,a){},377:function(e,t){},379:function(e,t){},391:function(e,t,a){},392:function(e,t,a){},393:function(e,t,a){},394:function(e,t,a){},404:function(e,t,a){},406:function(e,t,a){},408:function(e,t,a){},409:function(e,t,a){},410:function(e,t,a){},411:function(e,t,a){},412:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(23),i=a.n(r),c=(a(191),a(7)),s=(a(192),a(72)),d=a(4),l=a(39),u=a.n(l),h=a(172),p=a.n(h),_=a(173),b=a.n(_),y=a(174),g=a.n(y),f=a(175),j=a.n(f),O=a(176),m=a.n(O),v=a(36),E=[{selector:"*",style:{overlayOpacity:"0"}},{selector:'node[type = "ordin"]',style:{content:"data(label)",zIndex:100,width:"data(style.width)",height:"data(style.height)",shape:"data(style.shape)",opacity:"data(style.opacity)",backgroundColor:"data(style.backgroundColor)",borderColor:"data(style.borderColor)",borderWidth:"data(style.borderWidth)",textValign:"center",textHalign:"center"}},{selector:'node[type="special"]',style:{width:8,height:8,backgroundColor:"data(style.backgroundColor)",zIndex:1e3}},{selector:"edge",style:{curveStyle:"bezier",targetArrowShape:"triangle"}},{selector:'edge[type = "ordin"]',style:{width:"data(style.thickness)",lineColor:"data(style.backgroundColor)",targetArrowColor:"data(style.backgroundColor)",curveStyle:"segments",segmentDistances:"data(style.bendDistance)",segmentWeights:"data(style.bendWeight)",edgeDistances:"node-position",lineStyle:"data(style.shape)"}},{selector:"edge[label]",style:{label:"data(label)",edgeTextRotation:"autorotate",zIndex:999,textBackgroundOpacity:1,color:"#000",textBackgroundColor:"#fff",textBackgroundShape:"roundrectangle",textBorderColor:"#fff",textBorderWidth:2,textBorderOpacity:1}},{selector:".hidden",style:{display:"none"}},{selector:'.eh-handle,node[type="bend"]',style:{height:25,width:25,opacity:.4,borderWidth:5,borderOpacity:.1}},{selector:'node[type="bend"]',style:{backgroundColor:"#9575cd"}},{selector:".eh-handle",style:{backgroundColor:"#f50057"}},{selector:":selected",style:{overlayColor:"#000",overlayOpacity:.1,overlayPadding:5}}],x={style:Object(v.a)(E),zoomingEnabled:!0,userZoomingEnabled:!0,minZoom:.25,maxZoom:5},D=a(27),w=a(28),k=a(14),S=a(10),A=a(31),N=a(30),C=a(8),I=a(76),P={ALL_GRAPHS:"ALL_GRAPHS",allgs:function(){var e="ALL_GRAPHS";return window.localStorage.getItem(e)||window.localStorage.setItem(e,window.btoa(JSON.stringify([]))),new Set(JSON.parse(window.atob(window.localStorage.getItem(e))))}(),saveAllgs:function(){window.localStorage.setItem(this.ALL_GRAPHS,window.btoa(JSON.stringify(Array.from(this.allgs))))},addEmptyIfNot:function(){window.localStorage.getItem(this.ALL_GRAPHS)||window.localStorage.setItem(this.ALL_GRAPHS,window.btoa(JSON.stringify([])))},get:function(e){return null===window.localStorage.getItem(e)?null:JSON.parse(window.atob(window.localStorage.getItem(e)))},save:function(e,t){this.addGraph(e);var a=JSON.stringify(t);window.localStorage.setItem(e,window.btoa(a))},remove:function(e){this.allgs.delete(e)&&this.saveAllgs(),localStorage.removeItem(e)},addGraph:function(e){this.allgs.has(e)||(this.allgs.add(e),this.saveAllgs())},getAllGraphs:function(){return JSON.parse(window.atob(window.localStorage.getItem(this.ALL_GRAPHS)))},addToFront:function(e){if(!this.allgs.has(e)){this.allgs.add(e);var t=JSON.parse(window.atob(window.localStorage.getItem(this.ALL_GRAPHS)));t.unshift(e),window.localStorage.setItem(this.ALL_GRAPHS,window.btoa(JSON.stringify(t)))}}},T=a(74),M=a.n(T),G=function(e){var t=e.label,a=e.id,n=e.posX,o=e.posY,r=e.width,i=e.height,c=e.opacity,s=e.shape;return{$:{id:a},data:[{$:{key:"d6"},"y:ShapeNode":[{"y:Geometry":[{$:{height:i,width:r,x:n,y:o}}],"y:Fill":[{$:{color:e.backgroundColor,opacity:c}}],"y:BorderStyle":[{$:{color:e.borderColor,width:e.borderWidth}}],"y:NodeLabel":[t],"y:Shape":[{$:{type:s}}]}]}]}},L=function(e){var t=e.nodes,a=e.edges;return{graphml:{$:{xmlns:"http://graphml.graphdrawing.org/xmlns","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"http://graphml.graphdrawing.org/xmlns http://www.yworks.com/xml/schema/graphml/1.1/ygraphml.xsd","xmlns:y":"http://www.yworks.com/xml/graphml"},key:[{$:{for:"node",id:"d6","yfiles.type":"nodegraphics"}},{$:{for:"edge",id:"d10","yfiles.type":"edgegraphics"}}],graph:[{$:{edgedefault:"directed",id:e.id,projectName:e.projectName,author:e.author},node:t,edge:a}]}}},W=function(e){var t=e.id,a=e.label;return{$:{id:t,source:e.source,target:e.target},data:[{$:{key:"d10"},"y:GenericEdge":[{$:{configuration:"com.yworks.bpmn.Connection"},"y:LineStyle":[{$:{color:e.lineColor,width:e.lineWidth}}],"y:Arrows":[{$:{source:"none",target:"delta"}}],"y:EdgeLabel":[a],"y:Path":[{$:{sx:"0.0",sy:"0.0",tx:"0.0",ty:"0.0"},"y:Point":[{$:e.bendPoint}]}]}]}]}},B=function(e){var t=e.nodes.map((function(e){return G(Object(d.a)({label:e.label,id:e.id,posX:e.position.x,posY:e.position.y},e.style))})),a=e.edges.map((function(e,t){return W({id:t,label:e.label,source:e.source,target:e.target,lineColor:e.style.backgroundColor,lineWidth:e.style.thickness,bendPoint:e.style.bendPoint})})),n=L({nodes:t,edges:a,projectName:e.projectDetails.projectName,author:e.projectDetails.author,id:e.id});return(new M.a.Builder).buildObject(n)},R=a(44),H=function(e){return function(e){Object(A.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).autoSaveIntervalId=null,e}return Object(w.a)(a,[{key:"regesterEvents",value:function(){Object(k.a)(Object(S.a)(a.prototype),"regesterEvents",this)&&Object(k.a)(Object(S.a)(a.prototype),"regesterEvents",this).call(this),this.cy.on("add remove data dragfreeon",'node[type="ordin"]',this.saveLocalStorage.bind(this)),this.cy.on("add remove data",'edge[type="ordin"]',this.saveLocalStorage.bind(this)),this.cy.on("nodeediting.resizeend graph-modified",this.saveLocalStorage.bind(this))}},{key:"downloadImg",value:function(e){"PNG"===e&&Object(I.saveAs)(this.cy.png(),"".concat(this.getName(),"-DHGWorkflow.png")),"JPG"===e&&Object(I.saveAs)(this.cy.png(),"".concat(this.getName(),"-DHGWorkflow.jpg"))}},{key:"shouldNodeBeSaved",value:function(e){return"ordin"===this.getById(e).data("type")}},{key:"shouldEdgeBeSaved",value:function(e){return"ordin"===this.getById(e).data("type")}},{key:"getRealSourceId",value:function(e){return e}},{key:"jsonifyGraph",value:function(){var e=this,t={nodes:[],edges:[],projectDetails:this.projectDetails,id:this.id};return this.cy.nodes().forEach((function(a){if(e.shouldNodeBeSaved(a.id())){var n=a.json(),o={label:n.data.label,id:n.data.id,position:n.position};o.style=e.getStyle(a.id()),t.nodes.push(o)}})),this.cy.edges().forEach((function(a){if(e.shouldEdgeBeSaved(a.id())){var n=a.json(),o={source:e.getRealSourceId(a.source().id()),target:n.data.target,label:n.data.label};o.style=e.getStyle(a.id()),o.style.bendPoint=R.a.getCoordinate(o.style.bendWeight,o.style.bendDistance,a.source().position(),a.target().position()),t.edges.push(o)}})),t}},{key:"getName",value:function(){return"".concat(this.projectDetails.projectName,"-").concat(this.projectDetails.author)}},{key:"saveToDisk",value:function(){var e=B(this.jsonifyGraph()),t=(new TextEncoder).encode(e),a=new Blob([t],{type:"application/json;charset=utf-8"});Object(I.saveAs)(a,"".concat(this.getName(),"-DHGWorkflow-").concat((new Date).getTime(),".graphml"))}},{key:"loadJson",value:function(e){var t=this,a=(new Date).getTime();e.nodes.forEach((function(e){t.addNode(e.label,e.style,"ordin",e.position,{},e.id,a)})),e.edges.forEach((function(e){t.addEdge(e.source,e.target,e.label,e.style,"ordin",void 0,a)})),this.projectDetails=e.projectDetails,this.dispatcher({type:C.a.SET_PROJECT_DETAILS,payload:{projectDetails:e.projectDetails,id:this.id}})}},{key:"saveLocalStorage",value:function(){var e=this;null!==this.autoSaveTimeoutId&&clearTimeout(this.autoSaveIntervalId),this.autoSaveIntervalId=setTimeout((function(){return P.save(e.id,e.jsonifyGraph())}),1e3)}},{key:"loadGraphFromLocalStorage",value:function(){var e=P.get(this.id);return!!e&&(this.loadJson(e),!0)}},{key:"serializeGraph",value:function(){return btoa(JSON.stringify(this.jsonifyGraph()))}}]),a}(e)},U=function(e){return function(e){Object(A.a)(a,e);var t=Object(N.a)(a);function a(){return Object(D.a)(this,a),t.apply(this,arguments)}return Object(w.a)(a,[{key:"resetZoom",value:function(){this.cy.reset()}},{key:"setOnZoom",value:function(e){this.cy.removeListener("zoom"),this.setZoomUI=e,this.cy.on("zoom",(function(t){return e(Math.round(100*t.target.zoom()))}))}},{key:"fitZoom",value:function(){this.cy.fit()}},{key:"setZoom",value:function(e){this.cy.zoom(e/100)}},{key:"getZoom",value:function(){return Math.round(100*this.cy.zoom())}},{key:"clearAll",value:function(){var e=this;if(0===this.cy.elements().length)return!0;if(!window.confirm("Do want to clear all elements?"))return!1;var t=(new Date).getTime();return this.cy.elements().forEach((function(a){return e.deleteElem(a.id(),t)})),!0}},{key:"setCurStatus",value:function(){Object(k.a)(Object(S.a)(a.prototype),"setCurStatus",this)&&Object(k.a)(Object(S.a)(a.prototype),"setCurStatus",this).call(this),this.setZoomUI(Math.round(100*this.cy.zoom()))}}]),a}(e)},K=a(26),$=a(20),V=a(181),z=a(16),F=function(e){return function(e){Object(A.a)(a,e);var t=Object(N.a)(a);function a(){var e,n,o,r,i,c,s,d,l,u,h;Object(D.a)(this,a);for(var p=arguments.length,_=new Array(p),b=0;b<p;b++)_[b]=arguments[b];return h=t.call.apply(t,[this].concat(_)),a.methodsMapped=(e={},Object(K.a)(e,z.a.ADD_NODE,(function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return Object(k.a)((n=Object($.a)(h),Object(S.a)(a.prototype)),"addNode",n).bind(Object($.a)(h)).apply(void 0,t.concat([0]))})),Object(K.a)(e,z.a.ADD_EDGE,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(k.a)((o=Object($.a)(h),Object(S.a)(a.prototype)),"addEdge",o).bind(Object($.a)(h)).apply(void 0,t.concat([0]))})),Object(K.a)(e,z.a.UPDATE_NODE,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(k.a)((r=Object($.a)(h),Object(S.a)(a.prototype)),"updateNode",r).bind(Object($.a)(h)).apply(void 0,t.concat([0]))})),Object(K.a)(e,z.a.UPDATE_EDGE,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(k.a)((i=Object($.a)(h),Object(S.a)(a.prototype)),"updateEdge",i).bind(Object($.a)(h)).apply(void 0,t.concat([0]))})),Object(K.a)(e,z.a.UPDATE_DATA,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(k.a)((c=Object($.a)(h),Object(S.a)(a.prototype)),"updateData",c).bind(Object($.a)(h)).apply(void 0,t.concat([0]))})),Object(K.a)(e,z.a.DEL_NODE,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(k.a)((s=Object($.a)(h),Object(S.a)(a.prototype)),"deleteNode",s).bind(Object($.a)(h)).apply(void 0,t.concat([0]))})),Object(K.a)(e,z.a.DEL_EDGE,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(k.a)((d=Object($.a)(h),Object(S.a)(a.prototype)),"deleteEdge",d).bind(Object($.a)(h)).apply(void 0,t.concat([0]))})),Object(K.a)(e,z.a.SET_POS,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(k.a)((l=Object($.a)(h),Object(S.a)(a.prototype)),"setPos",l).bind(Object($.a)(h)).apply(void 0,t.concat([0]))})),Object(K.a)(e,z.a.SET_DIM,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(k.a)((u=Object($.a)(h),Object(S.a)(a.prototype)),"setDim",u).bind(Object($.a)(h)).apply(void 0,t.concat([0]))})),e),h.actionArr=[],h.curActionIndex=0,h}return Object(w.a)(a,[{key:"addPositionChange",value:function(e,t,a){var n=(new Date).getTime();this.addAction({actionName:z.a.SET_POS,parameters:[e,t]},{actionName:z.a.SET_POS,parameters:[e,a]},n)}},{key:"addDimensionChange",value:function(e,t,a,n,o){var r=(new Date).getTime();this.addAction({actionName:z.a.SET_DIM,parameters:[e,t,a]},{actionName:z.a.SET_DIM,parameters:[e,n,o]},r)}},{key:"addAction",value:function(e,t,a){0!==a&&(this.actionArr.splice(this.curActionIndex),this.actionArr.push({tid:a,inverse:e,equivalent:t}),this.curActionIndex+=1,this.dispatcher({type:C.a.SET_UNDO,payload:0!==this.curActionIndex}),this.dispatcher({type:C.a.SET_REDO,payload:this.curActionIndex!==this.actionArr.length}))}},{key:"undo",value:function(){var e=null;for(0!==this.curActionIndex&&(e=this.actionArr[this.curActionIndex-1].tid);0!==this.curActionIndex&&this.actionArr[this.curActionIndex-1].tid===e;)this.curActionIndex-=1,a.performAction(this.actionArr[this.curActionIndex].inverse);this.dispatcher({type:C.a.SET_UNDO,payload:0!==this.curActionIndex}),this.dispatcher({type:C.a.SET_REDO,payload:this.curActionIndex!==this.actionArr.length})}},{key:"redo",value:function(){var e=null;for(this.curActionIndex!==this.actionArr.length&&(e=this.actionArr[this.curActionIndex].tid);this.curActionIndex!==this.actionArr.length&&this.actionArr[this.curActionIndex].tid===e;)a.performAction(this.actionArr[this.curActionIndex].equivalent),this.curActionIndex+=1;this.dispatcher({type:C.a.SET_UNDO,payload:0!==this.curActionIndex}),this.dispatcher({type:C.a.SET_REDO,payload:this.curActionIndex!==this.actionArr.length})}},{key:"setCurStatus",value:function(){Object(k.a)(Object(S.a)(a.prototype),"setCurStatus",this)&&Object(k.a)(Object(S.a)(a.prototype),"setCurStatus",this).call(this),this.dispatcher({type:C.a.SET_UNDO,payload:0!==this.curActionIndex}),this.dispatcher({type:C.a.SET_REDO,payload:this.curActionIndex!==this.actionArr.length})}}],[{key:"performAction",value:function(e){var t=e.actionName,n=e.parameters;a.methodsMapped[t].apply(void 0,Object(v.a)(n))}}]),a}(Object(V.a)(e))},J=function(e){return function(e){Object(A.a)(a,e);var t=Object(N.a)(a);function a(e,n,o,r,i,c,s){var d;return Object(D.a)(this,a),d=t.call(this,e,n,o,r,i,c,s),o&&(d.dispatcher=o),r&&(d.superState=r),n&&(d.cy=n),d.id=e,d.projectDetails=i,d.cy.emit("graph-modified"),d.bendNode=d.cy.add({group:"nodes",data:{type:"bend"},classes:["hidden"]}),d.regesterEvents(),d.cy.emit("graph-modified"),d}return Object(w.a)(a,[{key:"setProjectDetail",value:function(e){this.projectDetails=e,this.cy.emit("graph-modified")}},{key:"getById",value:function(e){return this.cy.getElementById(e)}},{key:"set",value:function(e){var t=e.cy,a=e.dispatcher,n=e.superState;a&&(this.dispatcher=a),n&&(this.superState=n),t&&(this.cy=t)}},{key:"selectDeselectEventHandler",value:function(){var e,t=this.cy.$(":selected");if(0===t.length)return this.dispatcher({type:C.a.ELE_UNSELECTED});e=t.every((function(e){return e.isNode()}))?"NODE":t.every((function(e){return e.isEdge()}))?"EDGE":"MIX";var a=t.map((function(e){return e.data("id")}));return this.dispatcher({type:C.a.ELE_SELECTED,payload:{ids:a,type:e}})}},{key:"regesterEvents",value:function(){var e=this;Object(k.a)(Object(S.a)(a.prototype),"regesterEvents",this)&&Object(k.a)(Object(S.a)(a.prototype),"regesterEvents",this).call(this),this.cy.on("select unselect",(function(){return e.selectDeselectEventHandler()})),this.cy.on("grab",(function(e){e.target.forEach((function(e){e.scratch("position",Object(d.a)({},e.position()))}))})),this.cy.on("dragfree",(function(t){t.target.forEach((function(t){e.addPositionChange(t.id(),t.scratch("position"),Object(d.a)({},t.position()))}))})),this.cy.on("nodeediting.resizestart",(function(e,t,a){a.scratch("height",a.data("style").height),a.scratch("width",a.data("style").width),a.scratch("position",Object(d.a)({},a.position()))})),this.cy.on("nodeediting.resizeend",(function(t,a,n){e.addDimensionChange(n.id(),{height:n.scratch("height"),width:n.scratch("width")},n.scratch("position"),{height:n.data("style").height,width:n.data("style").width},Object(d.a)({},n.position()))})),this.cy.on("hide-bend remove",(function(){e.bendNode.removeListener("drag"),e.bendNode.addClass("hidden")})),this.cy.on("grabon",(function(t){return"bend"!==t.target[0].data("type")?e.cy.emit("hide-bend"):0})),this.cy.on("freeon",(function(t){return"bend"!==t.target[0].data("type")?e.cy.emit("show-bend"):0})),this.cy.on("click tap",(function(t){t.target===e.cy&&(e.cy.emit("hide-bend"),e.cy.$(".eh-handle").remove())})),this.cy.on("select unselect show-bend",(function(){var t=e.cy.$(":selected");return 1===t.length&&t[0].isEdge()||e.cy.emit("hide-bend"),t.emit("bend-edge")})),this.cy.on("mouseover","edge",(function(e){e.target.emit("bend-edge")})),this.cy.on("bend-edge","edge",(function(t){e.bendNode.hasClass("hidden")||e.cy.emit("hide-bend");var n=t.target;e.bendNode.position(a.getBendEdgePoint(n)),e.bendNode.on("drag",(function(){var a=R.a.getWeightDistance(e.bendNode.position(),n.source().position(),n.target().position());n.data("style",Object(d.a)(Object(d.a)({},n.data("style")),{},{bendDistance:a.d,bendWeight:a.w})),t.target.emit("bending")})),e.bendNode.removeClass("hidden")}))}},{key:"setCurStatus",value:function(){Object(k.a)(Object(S.a)(a.prototype),"setCurStatus",this)&&Object(k.a)(Object(S.a)(a.prototype),"setCurStatus",this).call(this),this.selectDeselectEventHandler()}}],[{key:"getBendEdgePoint",value:function(e){var t=e.data("style"),a=t.bendWeight,n=t.bendDistance,o=parseFloat(a),r=parseFloat(n);return R.a.getCoordinate(o,r,e.source().position(),e.target().position())}}]),a}(H(U(F(e))))},q={getEq:function(e,t){var a=(e.y-t.y)/(e.x-t.x);return[a,e.y-a*e.x]},getX1X2:function(e,t,a,n){if(e.x===t.x)return[t.x,t.x];var o={x:t.x-e.x,y:t.y-e.y},r=this.getEq({x:0,y:0},o),i=Object(c.a)(r,2),s=i[0],d=i[1],l=Math.pow(a,2)*Math.pow(s,2)+Math.pow(n,2),u=2*Math.pow(a,2)*s*d,h=Math.pow(a,2)*(Math.pow(d,2)-Math.pow(n,2)),p=Math.pow(u,2)-4*l*h;return[(-u+Math.pow(p,.5))/(2*l)+e.x,(-u-Math.pow(p,.5))/(2*l)+e.x]},getY1Y2:function(e,t,a,n,o,r){if(o===r)return[e.y+n,e.y-n];var i=this.getEq(e,t),s=Object(c.a)(i,2),d=s[0],l=s[1];return[d*o+l,d*r+l]},dist:function(e,t){return Math.pow(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2),.5)},getClosestEllipse:function(e,t,a,n){var o=this.getX1X2(e,t,a,n),r=Object(c.a)(o,2),i=r[0],s=r[1],d=this.getY1Y2(e,t,a,n,i,s),l=Object(c.a)(d,2),u=l[0],h=l[1],p=[this.dist(t,{x:i,y:u}),this.dist(t,{x:s,y:h})];return p[0]<p[1]?{x:i,y:u}:{x:s,y:h}},slope:function(e,t,a,n){return(e-a)/(t-n)},setSubQ:function(e,t,a,n){var o=[[e.x+a,e.y+n],[e.x+a,e.y-n]].map((function(a){var n=Object(c.a)(a,2),o=n[0],r=n[1];return(e.x-o)*(t.y-r)-(e.y-r)*(t.x-o)>0})),r=Object(c.a)(o,2),i=r[0],s=r[1];return i&&!s?0:i||s?!i&&s?2:i&&s?3:-1:1},getClosestRect:function(e,t,a,n){var o=this.getEq(t,e),r=Object(c.a)(o,2),i=r[0],s=r[1],d=[[e.x+a,e.y],[e.x,e.y+n],[e.x-a,e.y],[e.x,e.y-n]];Math.abs(i)!==1/0&&(d=[[e.x+a,i*(e.x+a)+s],[(e.y+n-s)/i,e.y+n],[e.x-a,i*(e.x-a)+s],[(e.y-n-s)/i,e.y-n]]);var l=Object(c.a)(d[this.setSubQ(e,t,a,n)],2);return{x:l[0],y:l[1]}},get:function(e,t,a,n,o){return"rectangle"===o?q.getClosestRect(e,t,a,n):q.getClosestEllipse(e,t,a,n)}},Z=q.get,X=function(e){return function(e){Object(A.a)(a,e);var t=Object(N.a)(a);function a(){return Object(D.a)(this,a),t.apply(this,arguments)}return Object(w.a)(a,[{key:"regesterEvents",value:function(){Object(k.a)(Object(S.a)(a.prototype),"regesterEvents",this).call(this),this.cy.on("drag data",'node[type="ordin"]',(function(e){e.target.connectedEdges().connectedNodes('node[type="special"]').forEach((function(e){e.position(a.calJuncNodePos(e))}))})),this.cy.on("bending",(function(e){var t=e.target.source();t.position(a.calJuncNodePos(t))}))}},{key:"getRealNode",value:function(e){return this.getById(e).incomers().filter("node")[0]}},{key:"addAutoMove",value:function(e){return e.unselectify(),this}},{key:"addEdgeWithJuncNode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,r=this.getById(e),i=Object(k.a)(Object(S.a)(a.prototype),"addEdgeWithLabel",this).call(this,e,t,r.data("edgeLabel"),Object(d.a)(Object(d.a)({},r.data("edgeStyle")),{},{bendDistance:n.bendDistance,bendWeight:n.bendWeight}),"ordin",void 0,o);return r.position(a.calJuncNodePos(r)),i}},{key:"addEdgeWithoutJuncNode",value:function(e,t,n,o,r){var i=this.getById(e),c=this.getById(t),s=i.data("style"),l=Z(i.position(),c.position(),s.width/2,s.height/2,s.shape),u=Object(k.a)(Object(S.a)(a.prototype),"addNode",this).call(this,"",{backgroundColor:o.backgroundColor},"special",l,{edgeLabel:n,edgeStyle:o},void 0,r);return u.ungrabify(),Object(k.a)(Object(S.a)(a.prototype),"addEdgeWithLabel",this).call(this,e,u.id(),"",Object(d.a)(Object(d.a)({},o),{},{"target-arrow-shape":"none"}),"special",void 0,r),this.addAutoMove(u,i),this.addEdgeWithJuncNode(u.id(),t,o,r)}},{key:"addEdge",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ordin",c=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this.getTid();if("ordin"!==this.getById(t).data("type"))return this;var d=this.getById(e);if("special"===i)return Object(k.a)(Object(S.a)(a.prototype),"addEdgeWithLabel",this).call(this,e,t,o,r,i,c,s);if("special"===d.data("type"))return this.addEdgeWithJuncNode(e,t,r,s);var l=d.outgoers("node").filter((function(e){return e.data("edgeLabel")===o}));return l.length?this.addEdgeWithJuncNode(l[0].id(),t,r,s):o.length?this.addEdgeWithoutJuncNode(e,t,o,r,s):(this.dispatcher({type:C.a.Model_Open_Create_Edge,cb:function(a,o){var r=n.customValidiateEdge(a,o,e,t);return r.ok&&n.addEdgeWithoutJuncNode(e,t,a,o,s),r}}),this)}},{key:"updateEdge",value:function(e,t,n,o){var r=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getTid(),c=this.getById(e).source();o&&this.updateData(c.data("id"),"edgeLabel",n,i),this.updateData(c.data("id"),"edgeStyle",t,i),this.updateNode([c.data("id")],{backgroundColor:t.backgroundColor},"",!1,i),c.outgoers("edge").forEach((function(e){return Object(k.a)(Object(S.a)(a.prototype),"updateEdge",r).call(r,e.data("id"),t,n,o,i)}))}},{key:"deleteElem",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTid(),o=this.getById(e);if(o.isNode()){if(o.removed())return;o.outgoers("node").forEach((function(e){return Object(k.a)(Object(S.a)(a.prototype),"deleteElem",t).call(t,e.id(),n)})),o.connectedEdges().forEach((function(e){return t.deleteElem(e.id(),n)})),Object(k.a)(Object(S.a)(a.prototype),"deleteNode",this).call(this,e,n)}else{if(o.removed())return;var r=o.source();Object(k.a)(Object(S.a)(a.prototype),"deleteEdge",this).call(this,e,n),r&&0===r.outgoers().length&&this.deleteNode(r.id(),n)}}},{key:"getRealSourceId",value:function(e){return"ordin"===this.getById(e).data("type")||0===this.getById(e).incomers("node").length?e:this.getById(e).incomers("node")[0].id()}},{key:"customGetNodesEdges",value:function(){var e=this;return[this.cy.$('node[type="ordin"]').map((function(e){return{label:e.data("label"),style:e.data("style")}})),this.cy.$('edge[type="ordin"]').map((function(t){return{label:t.data("label"),source:e.getById(e.getRealSourceId(t.source().id())).data("label"),target:t.target().data("label"),style:t.data("style")}}))]}},{key:"customValidiateEdge",value:function(e,t,a,n){var o=this.customGetNodesEdges(),r=Object(c.a)(o,2),i=r[0],s=r[1];try{var d=this.edgeValidator({label:e,style:t,source:a,target:n},i,s);return d&&void 0!==d.ok&&void 0!==d.err?d:{ok:!1,err:"Invalid return format from the defined node validator."}}catch(l){return{ok:!1,err:"Error raised at node validator: ".concat(l.message)}}}},{key:"getEdgesBetweenNodes",value:function(e,t){var a=this,n=[e,t].map((function(e){return a.getById(a.getRealSourceId(e))})).map((function(e){return e.outgoers('node[type="special"]').union(e)})),o=Object(c.a)(n,2),r=o[0],i=o[1];return r.edgesWith(i)}}],[{key:"calJuncNodePos",value:function(e){var t=e.incomers("node")[0],n={x:0,y:0},o=new Set;return e.outgoers('edge[type="ordin"]').forEach((function(e){return o.add(JSON.stringify(a.getBendEdgePoint(e)))})),o.forEach((function(e){var t=JSON.parse(e);n.x+=t.x,n.y+=t.y})),0===o.size?e.position():(n.x/=o.size,n.y/=o.size,Z(t.position(),n,t.data("style").width/2,t.data("style").height/2,t.data("style").shape))}}]),a}(J(e))},Y=a(185),Q=a(123),ee=(a(390),a(391),a(2)),te=x.minZoom,ae=x.maxZoom,ne={},oe=function(e){var t=e.superState,a=t.graphs[t.curGraphIndex]&&t.graphs[t.curGraphIndex].instance;if(!a)return Object(ee.jsx)(ee.Fragment,{});var o=Object(n.useState)(a.getZoom()),r=Object(c.a)(o,2),i=r[0],s=r[1];return a.setOnZoom(s),Object(ee.jsx)("div",{children:Object(ee.jsxs)("div",{className:"zoom-comp",children:[Object(ee.jsx)("div",{role:"button",tabIndex:0,className:"zoom-box zoom-btn",onClick:function(){return a.resetZoom()},onKeyDown:function(e){return" "===e.key&&a.resetZoom()},children:Object(ee.jsx)(Q.b,{})}),Object(ee.jsx)("div",{role:"button",tabIndex:0,className:"zoom-box zoom-btn",onClick:function(){return a.fitZoom()},onKeyDown:function(e){return" "===e.key&&a.resetZoom()},children:Object(ee.jsx)(Q.a,{})}),Object(ee.jsxs)("div",{className:"zoom-box zoom-value",children:[i,"%"]}),Object(ee.jsx)("div",{className:"slider",children:Object(ee.jsx)(Y.a,{min:100*te,max:100*ae,marks:ne,onChange:function(e){a.setZoom(e),s(e)},included:!1,value:i})})]})})},re=(a(392),a(77)),ie=a(47),ce=function(){function e(t){Object(D.a)(this,e),this.arr=[t],this.flatenArr()}return Object(w.a)(e,[{key:"flatenArr",value:function(){for(var e=this,t=[],a=0;a<this.arr.length;a+=1)this.arr[a].constructor===Array?this.arr[a].forEach((function(t){return e.arr.push(t)})):t.push(this.arr[a]);this.arr=t}},{key:"G",value:function(t){return new e(this.arr.map((function(e){return e[t]})).filter((function(e){return e})))}},{key:"S",value:function(e){return this.arr=this.arr.map((function(t){return t[e]})).filter((function(e){return e})),this.flatenArr(),this}},{key:"any",value:function(){var e=[];return this.arr.forEach((function(t){Object.keys(t).forEach((function(a){e.push(t[a])}))})),this.arr=e,this.flatenArr(),this}},{key:"parseProps",value:function(t,a){var n=new e(this.arr);return t.split(".").forEach((function(e){return"*"===e?n.any():n.S(e)})),1===a?n.A():2===a?n:n.F()}},{key:"A",value:function(){return this.arr}},{key:"F",value:function(){return this.arr[0]}}]),e}(),se=function(e){var t=new ce(e).parseProps("data.y:ShapeNode",2);return{label:t.parseProps("y:NodeLabel._")||t.parseProps("y:NodeLabel"),id:new ce(e).parseProps("$.id"),position:{x:parseFloat(t.parseProps("y:Geometry.$.x")),y:parseFloat(t.parseProps("y:Geometry.$.y"))},style:{width:parseFloat(t.parseProps("y:Geometry.$.width")),height:parseFloat(t.parseProps("y:Geometry.$.height")),opacity:parseInt(t.parseProps("y:Fill.$.opacity"),10)||1,shape:t.parseProps("y:Shape.$.type"),backgroundColor:t.parseProps("y:Fill.$.color"),borderColor:t.parseProps("y:BorderStyle.$.color"),borderWidth:parseInt(t.parseProps("y:BorderStyle.$.width"),10)}}},de=function(e){return{label:new ce(e).parseProps("data.*.y:EdgeLabel._")||new ce(e).parseProps("data.*.y:EdgeLabel"),source:new ce(e).parseProps("$.source"),target:new ce(e).parseProps("$.target"),style:{backgroundColor:new ce(e).parseProps("data.*.y:LineStyle.$.color"),thickness:parseFloat(new ce(e).parseProps("data.*.y:LineStyle.$.width")),bendPoint:new ce(e).parseProps("data.*.y:Path.y:Point.$")}}},le=function(e){return new Promise((function(t){(new M.a.Parser).parseString(e,(function(e,a){var n=new ce(a),o=n.parseProps("graphml.graph.node",1).map(se),r=n.parseProps("graphml.graph.edge",1).map(de),i=function(e){return e.parseProps("graphml.graph.$")}(n),c=i.id,s=i.projectName,d=i.author,l={projectName:s,author:d,set:Boolean(s&&d)};t({id:c,projectDetails:l,edges:r,nodes:o})}))}))},ue=function(e){return e.graphs[e.curGraphIndex]&&e.graphs[e.curGraphIndex].instance},he=function(e,t){t({type:C.a.Model_Open_Create_Node,cb:function(t,a){var n=ue(e).validiateNode(t,a);return n.ok&&ue(e).addNode(t,a),n}})},pe=function(e,t){var a=1===e.eleSelectedPayload.ids.length,n=(new Date).getTime();"NODE"===e.eleSelectedPayload.type&&t({type:C.a.Model_Open_Update_Node,cb:function(t,o){return e.eleSelectedPayload.ids.forEach((function(r){return ue(e).updateNode(r,o,t,a,n)}))},labelAllowed:a,label:ue(e).getLabel(e.eleSelectedPayload.ids[0]),style:ue(e).getStyle(e.eleSelectedPayload.ids[0])}),"EDGE"===e.eleSelectedPayload.type&&t({type:C.a.Model_Open_Update_Edge,cb:function(t,o){return e.eleSelectedPayload.ids.forEach((function(r){return ue(e).updateEdge(r,o,t,a,n)}))},labelAllowed:a,label:ue(e).getLabel(e.eleSelectedPayload.ids[0]),style:ue(e).getStyle(e.eleSelectedPayload.ids[0])})},_e=function(e){var t=(new Date).getTime();e.eleSelectedPayload.ids.forEach((function(a){return ue(e).deleteElem(a,t)}))},be=function(e,t,a){ue(e).downloadImg(a)},ye=function(e){ue(e).saveToDisk()},ge=function(e,t,a){if(a.target&&a.target.files&&a.target.files[0]){var n=new FileReader;n.onload=function(e){le(e.target.result).then((function(e){var a=(new Date).getTime();P.save(a,e),t({type:C.a.ADD_GRAPH,payload:{id:a,projectDetails:Object(d.a)(Object(d.a)({},e.projectDetails),{},{set:!0})}})}))},n.readAsText(a.target.files[0])}},fe=function(e,t){t({type:C.a.NEW_GRAPH})},je=function(e){ue(e).clearAll()},Oe=function(e){ue(e)&&ue(e).undo()},me=function(e){ue(e).redo()},ve=function(e,t){t({type:C.a.SET_SHARE_MODAL,payload:!0})},Ee=function(e,t){t({type:C.a.SET_SETTING_MODAL,payload:!0})},xe=(a(393),void 0),De=function(e){var t=e.superState,a=e.dispatcher,n=function(e,n){n.stopPropagation(),window.confirm("Do you confirm to close the tab? This action is irreversable.")&&(P.remove(t.graphs[e]?t.graphs[e].id:null),a({type:C.a.REMOVE_GRAPH,payload:e}))},r=function(e){var n;e.stopPropagation(),n=t,a({type:C.a.SET_PROJECT_DETAILS,payload:{projectDetails:Object(d.a)(Object(d.a)({},ue(n).projectDetails),{},{set:!1}),id:ue(n).id}})};return o.a.useEffect((function(){Object(ie.a)("ctrl+shift+m,command+shift+m",(function(e){e.preventDefault(),document.getElementById("new_graph").click()})),Object(ie.a)("ctrl+shift+e,command+shift+e",(function(e){e.preventDefault();var t=document.querySelector(".tab.tab-graph.selected > .tab-act.edit");t&&t.click()})),Object(ie.a)("ctrl+shift+l,command+shift+l",(function(e){e.preventDefault();var t=document.querySelector(".tab.tab-graph.selected > .tab-act.close");t&&t.click()}))}),[]),Object(ee.jsxs)("div",{className:"tab-par",children:[Object(ee.jsx)("button",{className:"tab",onClick:fe.bind(xe,t,a),type:"button",id:"new_graph","data-tip":"New Workflow Tab (Ctrl + Shift + M)",children:Object(ee.jsx)(re.a,{size:25})}),t.graphs.map((function(e,o){return Object(ee.jsxs)("div",{className:"tab tab-graph ".concat(t.curGraphIndex===o?"selected":"none"),onClick:function(){return a({type:C.a.CHANGE_TAB,payload:o})},onKeyDown:function(e){return" "===e.key&&a({type:C.a.CHANGE_TAB,payload:o})},role:"button",tabIndex:0,id:"tab_".concat(o),children:[Object(ee.jsxs)("span",{className:"tab-text",children:[e.projectDetails.projectName,e.projectDetails.author?" - ":"",e.projectDetails.author]}),t.curGraphIndex===o?Object(ee.jsx)("button",{className:"tab-act edit",onClick:r,type:"button","data-tip":"Edit Workflow Details (Ctrl + Shift + E)","data-for":"header-tab",children:Object(ee.jsx)(re.c,{size:16})}):Object(ee.jsx)(ee.Fragment,{}),Object(ee.jsx)("button",{className:"tab-act close",onClick:n.bind(xe,o),type:"button","data-tip":"Close current Workflow (Ctrl + Shift + L)","data-for":"header-tab",children:Object(ee.jsx)(re.b,{size:20})}),Object(ee.jsx)(s.a,{place:"bottom",type:"dark",effect:"solid",id:"header-tab"})]},e.id)}))]})},we=function(e,t){var a={ok:!0,err:null};return t.forEach((function(t){t.label===e.label&&(a={ok:!1,err:"Node with same label exists."})})),a},ke=function(e,t,a){var n={ok:!0,err:null};return a.forEach((function(t){t.label===e.label&&(n={ok:!1,err:"Edge with same label exists."})})),n},Se=function(e){var t=o.a.createRef(),a=e.dispatcher,r=e.superState;return Object(n.useEffect)((function(){r.graphs.forEach((function(e,n){if(!e.instance){var o=e.id,i=function(e,n,o){e.style.width="".concat(t.current.offsetWidth-2,"px"),e.style.height="".concat(t.current.offsetHeight-2,"px");var i=u()(Object(d.a)(Object(d.a)({},x),{},{container:e}));i.nodeEditing({resizeToContentCueEnabled:function(){return!1},setWidth:function(e,t){e.data("style",Object(d.a)(Object(d.a)({},e.data("style")),{},{width:t}))},setHeight:function(e,t){e.data("style",Object(d.a)(Object(d.a)({},e.data("style")),{},{height:t}))},isNoResizeMode:function(e){return"ordin"!==e.data("type")},isNoControlsMode:function(e){return"ordin"!==e.data("type")}}),i.gridGuide({snapToGridOnRelease:!1,zoomDash:!0,panGrid:!0});var c=new(X(Object))(n,i,a,r,o,we,ke);return i.edgehandles({preview:!1,handlePosition:function(){return"none"},handleNodes:'node[type = "ordin"],node[type = "special"]',complete:function(e,t,a){a.remove(),c.addEdge(e.id(),t.id())}}),c.loadGraphFromLocalStorage(),c}(document.getElementById(o),o,e.projectDetails);a({type:C.a.ADD_GRAPH_INSTANCE,instance:i,index:n})}}))}),[r.graphs.length]),Object(n.useEffect)((function(){r.graphs[r.curGraphIndex]&&r.graphs[r.curGraphIndex].instance&&r.graphs[r.curGraphIndex].instance.setCurStatus()}),[r.curGraphIndex]),Object(n.useEffect)((function(){"function"!==typeof u()("core","edgehandles")&&u.a.use(p.a),"function"!==typeof u()("core","nodeEditing")&&j()(u.a,m.a,g.a),"function"!==typeof u()("core","gridGuide")&&b()(u.a);var e=Object.fromEntries(new URLSearchParams(window.location.search).entries()).g;if(e){var t=JSON.parse(atob(e)),n=(new Date).getTime().toString();P.addToFront(n),P.save(n,t),window.history.replaceState({},document.title,window.location.pathname)}var o=P.getAllGraphs().map((function(e){return{id:e,projectDetails:{projectName:"",author:"",set:!0}}}));a({type:C.a.ADD_GRAPH_BULK,payload:o})}),[]),Object(ee.jsxs)("div",{style:{flex:1,flexDirection:"column",display:"flex",width:"100%"},children:[Object(ee.jsx)(De,{superState:r,dispatcher:a}),Object(ee.jsxs)("div",{style:{flex:1,background:"white"},className:"graph-container",ref:t,children:[r.graphs.map((function(e,t){return Object(ee.jsx)("div",{style:{zIndex:1,display:r.curGraphIndex===t?"block":"none"},id:e.id},e.id)})),Object(ee.jsx)(oe,{dispatcher:a,superState:r})]})]})},Ae=(a(394),a(124)),Ne=a.n(Ae);a(404);Ne.a.setAppElement("#root");var Ce=function(e){var t=e.closeModal,a=e.ModelOpen,o=e.title,r=e.children,i=Object(n.useState)(""),s=Object(c.a)(i,2),d=s[0],l=s[1],u=Object(n.useState)(a),h=Object(c.a)(u,2),p=h[0],_=h[1],b=Object(n.useState)(null),y=Object(c.a)(b,2),g=y[0],f=y[1];return Object(n.useEffect)((function(){!0===a?(_(!0),l("closing"),clearTimeout(g),f(setTimeout((function(){_(!0),l("")}),20))):(l("closing"),clearTimeout(g),f(setTimeout((function(){_(!1)}),400)))}),[a]),p?Object(ee.jsx)(Ne.a,{isOpen:p,contentLabel:"onRequestClose Example",onRequestClose:t,className:"Modal",overlayClassName:"Overlay ".concat(d),children:Object(ee.jsxs)("div",{className:"modal-content ".concat(d),children:[Object(ee.jsxs)("div",{className:"modal-header",children:[Object(ee.jsx)("div",{className:"modal-title h4",children:o}),Object(ee.jsxs)("button",{type:"button",className:"close",onClick:t,children:[t?Object(ee.jsx)("span",{"aria-hidden":"true",children:"\xd7"}):"",Object(ee.jsx)("span",{className:"sr-only",children:"Close"})]})]}),r]})}):""},Ie=function(e){var t=e.closeModal,a=e.superState,o=Object(n.useState)({}),r=Object(c.a)(o,2),i=r[0],s=r[1],d=Object(n.useState)(""),l=Object(c.a)(d,2),u=l[0],h=l[1],p=a.modalPayload,_=a.ModelOpen,b=p.cb,y=p.title,g=p.submitText,f=p.Children,j=p.defaultStyle,O=p.defaultLabel,m=p.labelAllowed;Object(n.useEffect)((function(){s({label:O||"",style:j}),h("")}),[O,j]);return Object(ee.jsx)(Ce,{closeModal:t,ModelOpen:_,title:y,children:Object(ee.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a=b(i.label,i.style);a.ok?(h(""),s({label:O||"",style:j}),t()):h(a.err)},children:[Object(ee.jsxs)("div",{className:"modal-content-body",children:[Object(ee.jsx)(f,{data:i,setData:s,labelAllowed:m}),u?Object(ee.jsx)("div",{className:"err",children:u}):Object(ee.jsx)(ee.Fragment,{})]}),Object(ee.jsx)("div",{className:"modal-footer",children:Object(ee.jsx)("button",{type:"submit",className:"btn btn-primary",children:g})})]})})},Pe=a(33),Te=function(e){return[{type:"action",text:"Node",icon:Pe.d,action:he,active:!0,hotkey:"Ctrl+G"},{type:"vsep"},{type:"file-upload",text:"Open",icon:Pe.c,action:ge,active:!0,hotkey:"Ctrl+O"},{type:"action",text:"Save",icon:Pe.h,action:ye,active:!0,hotkey:"Ctrl+S"},{type:"action",text:"Clear",icon:Pe.g,action:je,active:!0,hotkey:"Ctrl+Backspace"},{type:"vsep"},{type:"action",text:"Undo",icon:Pe.k,action:Oe,active:e.undoEnabled,hotkey:"Ctrl+Z"},{type:"action",text:"Redo",icon:Pe.e,action:me,active:e.redoEnabled,hotkey:"Ctrl+Shift+Z,Ctrl+Y"},{type:"vsep"},{type:"action",text:"Edit",icon:Pe.b,action:pe,active:e.eleSelected&&"MIX"!==e.eleSelectedPayload.type,hotkey:"Ctrl+E"},{type:"action",text:"Delete",icon:Pe.j,action:_e,active:e.eleSelected,hotkey:"Delete,Backspace,Del,Clear"},{type:"vsep"},{type:"space"},{type:"action",text:"Settings",icon:Pe.f,action:Ee,active:!0},{type:"action",text:"Share",icon:Pe.i,action:ve,active:!0},{type:"menu",text:"Download",icon:Pe.a,action:be,active:!0},{type:"vsep"}]},Me=(a(405),a(406),a(186)),Ge=a(55);function Le(e){var t=e.Icon,a=e.text,n=e.action,o=e.active,r=e.tabIndex,i=e.hotkey;return Object(ee.jsxs)(Ge.a,{menuButton:Object(ee.jsx)(Ge.b,{children:Object(ee.jsx)(Re,{Icon:t,text:a,action:n,active:o,tabIndex:r,hotkey:i})}),children:[Object(ee.jsx)(Ge.c,{onClick:function(){return n("JPG")},children:"JPG"}),Object(ee.jsx)(Ge.c,{onClick:function(){return n("PNG")},children:"PNG"})]})}var We=function(e){var t=e.Icon,a=e.text,n=e.action,r=e.active,i=e.tabIndex,c=e.hotkey,s=o.a.createRef();return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)("input",{type:"file",ref:s,style:{display:"none"},accept:".graphml",onChange:n}),Object(ee.jsx)(Re,{Icon:t,text:a,active:r,tabIndex:i,action:function(){return s.current.click()},hotkey:c})]})},Be=function(e){var t=e.text,a=e.action,n=e.active,o=e.tabIndex;return Object(ee.jsxs)("div",{role:"button",tabIndex:o,className:"tool ".concat(n?"active":""),onClick:a,onKeyDown:function(e){return" "===e.key&&a()},children:[Object(ee.jsx)(Me.a,{onChange:a,checked:n,className:"react-switch"}),Object(ee.jsx)("div",{children:t})]})},Re=function(e){var t=e.Icon,a=e.text,n=e.action,o=e.active,r=e.tabIndex,i=e.hotkey;return Object(ee.jsxs)("div",{role:"button",id:"action_".concat(r),tabIndex:r,className:"tool ".concat(o?"active":""),onClick:function(){return o&&n()},onKeyDown:function(e){return o&&" "===e.key&&n()},"data-tip":i?i.split(",")[0]:"",children:[Object(ee.jsx)("div",{className:"icon",children:Object(ee.jsx)(t,{size:"25"})}),Object(ee.jsx)("div",{style:{fontSize:16},children:a})]})},He=function(){return Object(ee.jsx)("div",{className:"Vsep sep"})},Ue=function(){return Object(ee.jsx)("div",{className:"hsep sep"})},Ke=function(){return Object(ee.jsx)("div",{className:"space"})},$e=(a(407),function(e){var t=e.state,a=e.dispatcher,n=Te(t);return o.a.useEffect((function(){!function(e){var t="",a={};e.forEach((function(e,n){e.hotkey&&e.hotkey.split(",").forEach((function(e){[e,e.replace("Ctrl","Command")].forEach((function(e){t+="".concat(e,","),a[e]=document.getElementById("action_".concat(n+1))}))}))})),Object(ie.a)(t,(function(e,t){e.preventDefault(),a[t.shortcut].click()}))}(n)}),[]),Object(ee.jsxs)("header",{className:"header",children:[Object(ee.jsx)("section",{className:"middle titlebar",children:t.graphs[t.curGraphIndex]?"".concat(t.graphs[t.curGraphIndex].projectDetails.projectName," - DHGWorkflow Editor"):""}),Object(ee.jsxs)("section",{className:"toolbar",children:[n.map((function(e,n){var o=e.text,r=e.active,i=e.action,c=e.icon,s=e.type,l={text:o,active:r,tabIndex:n+1,key:o,action:function(e){return i(t,a,e)},Icon:c,hotkey:e.hotkey};switch(s){case"vsep":return Object(ee.jsx)(He,{},"".concat("v".concat(n)));case"space":return Object(ee.jsx)(Ke,{},"".concat("s".concat(n)));case"switch":return Object(ee.jsx)(Be,Object(d.a)({},l));case"menu":return Object(ee.jsx)(Le,Object(d.a)({},l));case"file-upload":return Object(ee.jsx)(We,Object(d.a)({},l));case"action":return Object(ee.jsx)(Re,Object(d.a)({},l));default:return Object(ee.jsx)(ee.Fragment,{})}})),Object(ee.jsx)("input",{type:"file",id:"fileUploader",style:{display:"none"},accept:".jpg, .jpeg, .png"})]}),Object(ee.jsx)(Ue,{})]})}),Ve=(a(408),function(e){var t=e.superState,a=e.dispatcher,o=t.graphs[t.curGraphIndex],r=Object(n.useState)(""),i=Object(c.a)(r,2),s=i[0],l=i[1],u=Object(n.useState)(""),h=Object(c.a)(u,2),p=h[0],_=h[1],b=Object(n.useCallback)((function(e){return e&&e.focus()}),[]);Object(n.useEffect)((function(){o?(l(o.projectDetails.projectName||""),_(o.projectDetails.author||"")):(l(""),_(""))}),[!o||!o.projectDetails.set]);var y=function(e){a({type:C.a.SET_PROJECT_DETAILS,payload:{projectDetails:e,id:o.id}})};return Object(ee.jsx)(Ce,{ModelOpen:!o||!o.projectDetails.set,closeModal:o||0!==t.curGraphIndex?function(){o?y(Object(d.a)(Object(d.a)({},o.projectDetails),{},{set:Boolean(o.projectDetails.author&&o.projectDetails.projectName)})):a({type:C.a.CHANGE_TAB,payload:0})}:null,title:"Project Details",children:Object(ee.jsxs)("form",{className:"proj-details",onSubmit:function(e){e.preventDefault(),o?y({projectName:s,author:p,set:!0}):a({type:C.a.ADD_GRAPH,payload:{id:(new Date).getTime(),projectDetails:{projectName:s,author:p,set:!0}}})},children:[Object(ee.jsx)("span",{children:"Workflow Name"}),Object(ee.jsx)("input",{ref:b,placeholder:"Title of workflow",required:!0,value:s,onChange:function(e){return l(e.target.value)}}),Object(ee.jsx)("span",{children:"Author"}),Object(ee.jsx)("input",{placeholder:"Author of workflow",value:p,onChange:function(e){return _(e.target.value)}}),Object(ee.jsxs)("div",{className:"expand",children:[Object(ee.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save"}),o?Object(ee.jsx)(ee.Fragment,{}):Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)("div",{className:"divider"}),Object(ee.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){document.querySelector('input[type="file"]').click()},children:"Open Existing"})]})]})]})})}),ze=(a(409),function(e){var t=e.superState,a=e.dispatcher,o=Object(n.useState)(""),r=Object(c.a)(o,2),i=r[0],s=r[1],d=Object(n.useState)("Copy"),l=Object(c.a)(d,2),u=l[0],h=l[1],p=t.shareModal&&t.graphs[t.curGraphIndex]&&t.graphs[t.curGraphIndex].instance;Object(n.useEffect)((function(){p&&(s(t.graphs[t.curGraphIndex].instance.serializeGraph()),h("Copy"))}),[p]);var _="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname,"?g=").concat(i);return Object(ee.jsx)(Ce,{ModelOpen:t.shareModal,title:"Shareable Link",closeModal:function(){a({type:C.a.SET_SHARE_MODAL,payload:!1})},children:Object(ee.jsxs)("div",{className:"share-modal",children:[Object(ee.jsx)("input",{readOnly:!0,className:"preDiv",value:_}),Object(ee.jsx)("button",{onClick:function(){navigator.clipboard.writeText(_).then((function(){h("Copied!"),document.getElementsByClassName("preDiv")[0].focus(),document.getElementsByClassName("preDiv")[0].select()}))},type:"button",className:"copyBtn",children:u})]})})}),Fe=(a(410),a(411),function(e){var t=e.pre,a=e.post,n=e.value,r=e.onChange,i=e.height,c=o.a.createRef();return Object(ee.jsxs)("div",{className:"textField",onClick:function(){return c.current.focus()},onKeyDown:function(){return c.current.focus()},role:"textbox",tabIndex:0,children:[Object(ee.jsx)("textarea",{className:"preTextField",value:t,readOnly:!0,spellCheck:"false"}),Object(ee.jsx)("textarea",{className:"mainTextField",spellCheck:"false",value:n,onChange:r,"data-gramm_editor":"false",style:{height:i},ref:c}),Object(ee.jsx)("textarea",{className:"postTextField",readOnly:!0,value:a,spellCheck:"false"})]})}),Je=function(e){var t=e.superState,a=e.dispatcher,o=Object(n.useState)(""),r=Object(c.a)(o,2),i=r[0],s=r[1],d=Object(n.useState)(""),l=Object(c.a)(d,2),u=l[0],h=l[1];Object(n.useEffect)((function(){t.graphs[t.curGraphIndex]&&t.graphs[t.curGraphIndex].instance&&(s(t.graphs[t.curGraphIndex].instance.getNodeValidator()),h(t.graphs[t.curGraphIndex].instance.getEdgeValidator()))}),[t.graphs[t.curGraphIndex]&&t.graphs[t.curGraphIndex].instance]);return Object(ee.jsx)(Ce,{ModelOpen:t.settingsModal,closeModal:function(){return a({type:C.a.SET_SETTING_MODAL,payload:!1})},title:"Settings",children:Object(ee.jsxs)("div",{className:"setting-container",children:[Object(ee.jsxs)("div",{children:[Object(ee.jsx)("h3",{children:"Node Validator"}),Object(ee.jsx)(Fe,{pre:"function validateNode(node, nodes, edges) {",post:"}",value:i,onChange:function(e){return s(e.target.value)},height:150})]}),Object(ee.jsxs)("div",{children:[Object(ee.jsx)("h3",{children:"Edge  Validator"}),Object(ee.jsx)(Fe,{pre:"function validateEdge(edge, nodes, edges) {",post:"}",value:u,onChange:function(e){return h(e.target.value)},height:150})]}),Object(ee.jsx)("div",{className:"footer",children:Object(ee.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(){t.graphs[t.curGraphIndex].instance.setEdgeNodeValidator({nodeValidator:"(node, nodes, edges)=>{".concat(i,"}"),edgeValidator:"(edge, nodes, edges)=>{".concat(i,"}")}),a({type:C.a.SET_SETTING_MODAL,payload:!1})},children:"Save"})})]})})},qe=function(){var e=Object(n.useReducer)(C.c,C.b),t=Object(c.a)(e,2),a=t[0],o=t[1];return Object(ee.jsxs)("div",{className:"container",children:[Object(ee.jsx)(Ve,{superState:a,dispatcher:o}),Object(ee.jsx)(ze,{superState:a,dispatcher:o}),Object(ee.jsx)(Je,{superState:a,dispatcher:o}),Object(ee.jsx)(Ie,{closeModal:function(){return o({type:C.a.Model_Close})},superState:a}),Object(ee.jsx)($e,{state:a,dispatcher:o}),Object(ee.jsx)("section",{className:"body",style:{display:"flex",overflow:"hidden"},children:Object(ee.jsx)(Se,{dispatcher:o,superState:a})}),Object(ee.jsx)(s.a,{place:"bottom",type:"dark",effect:"solid"})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ze=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,416)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),o(e),r(e),i(e)}))};i.a.render(Object(ee.jsx)(o.a.StrictMode,{children:Object(ee.jsx)(qe,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),Ze()},44:function(e,t,a){"use strict";var n={dist:function(e,t){return Math.pow(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2),.5)},rotate:function(e,t){return{x:e.x*Math.cos(t)-e.y*Math.sin(t),y:e.x*Math.sin(t)+e.y*Math.cos(t)}},extraRad:function(e,t){return e.x>=t.x&&e.y>t.y||e.x>=t.x&&e.y<t.y?Math.PI:0},getRadian:function(e,t,a){return(Math.atan(e)-this.extraRad(t,a)+2*Math.PI)%(2*Math.PI)},getCoordinate:function(e,t,a,n){var o=(a.y-n.y)/(a.x-n.x),r=this.getRadian(o,a,n),i={x:this.dist(a,n)*e,y:t},c=this.rotate(i,r),s=c.x,d=c.y;return{x:s+a.x,y:d+a.y}},getWeightDistance:function(e,t,a){var n={x:e.x-t.x,y:e.y-t.y},o=(t.y-a.y)/(t.x-a.x),r=this.getRadian(o,t,a),i=this.rotate(n,-r),c=i.x;return{d:i.y,w:c/this.dist(t,a)}}};t.a=n},8:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return O})),a.d(t,"b",(function(){return f}));var n=a(249)({$$typeof:"",Model_Open_Create_Node:"OpenModal_CreateNode",Model_Open_Create_Edge:"OpenModal_CreateEdge",Model_Open_Update_Edge:"OpenModal_UpdateEdge",Model_Open_Update_Node:"OpenModal_UpdateNode",Model_Close:"CloseModal",ELE_UNSELECTED:"ELE_UNSELECTED",ELE_SELECTED:"ELE_SELECTED",TURN_DRAW:"TURN_DRAW",SET_ZOOM:"SET_ZOOM",SET_PROJECT_DETAILS:"SET_PROJECT_DETAILS",SET_UNDO:"SET_UNDO",SET_REDO:"SET_REDO",ADD_GRAPH_INSTANCE:"ADD_GRAPH_INSTANCE",ADD_GRAPH:"ADD_GRAPH",ADD_GRAPH_BULK:"ADD_GRAPH_BULK",CHANGE_TAB:"CHANGE_TAB",REMOVE_GRAPH:"REMOVE_GRAPH",NEW_GRAPH:"NEW_GRAPH",SET_SHARE_MODAL:"SET_SHARE_MODAL",SET_SETTING_MODAL:"SET_SETTING_MODAL"}),o=a(36),r=a(4),i=a(7),c=a(1),s=a.n(c),d=(a(254),a(184)),l=a(2),u={light:["#FFCC00","#ea80fc","#ff4081","#ff5252","#82b1ff","#b388ff","#64ffda","#40c4ff","#90a4ae","#a1887f"],dark:["#000000","#f44336","#9c27b0","#7c4dff","#1565c0","#009688","#ff6d00","#827717","#607d8b","#000000"]},h=function(e){var t=e.color,a=e.setColor,n=e.type,o=s.a.useState(!1),r=Object(i.a)(o,2),c=r[0],h=r[1];return s.a.useEffect((function(){t||a(u[n][Math.floor(10*Math.random())])}),[]),Object(l.jsxs)("div",{role:"button",tabIndex:0,className:"color-box-par",onClick:function(){return!c&&h(!0)},onKeyDown:function(e){return" "===e.key&&!c&&h(!0)},children:[Object(l.jsx)("div",{className:"color-box",style:{background:t||"#000"}}),Object(l.jsxs)("div",{className:"color-picker",style:{display:c?"block":"none"},children:[Object(l.jsx)("div",{role:"button",className:"overlay",onClick:function(){return h(!1)}}),Object(l.jsx)(d.a,{colors:u[n],color:t||"#000",onChangeComplete:function(e){return a(e.hex)}})]})]})},p=function(e){var t=e.data,a=e.setData,n=e.submit,o=e.labelAllowed,s=Object(c.useCallback)((function(e){return e&&e.focus()}),[]),d=Object(c.createRef)(),u=Object(c.useState)(!1),p=Object(i.a)(u,2),_=p[0],b=p[1],y=function(e){a(Object(r.a)(Object(r.a)({},t),{},{style:Object(r.a)(Object(r.a)({},t.style),e)}))};return Object(c.useEffect)((function(){_||y({width:Math.max(t.style.width,Math.min(500,d.current.offsetWidth+20))})}),[!_&&t.label]),Object(l.jsxs)("div",{className:"nodeform",onSubmit:n,children:[Object(l.jsx)("div",{className:"parent-div",style:{height:t.style.height},children:Object(l.jsx)("div",{className:"node-div",style:Object(r.a)(Object(r.a)({},t.style),{},{borderRadius:"ellipse"===t.style.shape?"100%":0}),children:Object(l.jsx)("span",{ref:d,children:o?t.label:""})})}),Object(l.jsxs)("div",{className:"form",style:{padding:20},children:[Object(l.jsx)("div",{children:" Shape"}),Object(l.jsx)("div",{children:Object(l.jsxs)("label",{htmlFor:"rectangle",children:[Object(l.jsx)("input",{type:"radio",name:"shape",value:"rectangle",checked:"rectangle"===t.style.shape,onChange:function(){return y({shape:"rectangle"})}}),"Rectangle"]})}),Object(l.jsx)("div",{children:Object(l.jsxs)("label",{htmlFor:"ellipse",children:[Object(l.jsx)("input",{type:"radio",name:"shape",value:"ellipse",checked:"ellipse"===t.style.shape,onChange:function(){return y({shape:"ellipse"})}}),"Ellipse"]})}),Object(l.jsx)("div",{}),o?Object(l.jsx)("div",{children:" Label"}):"",o?Object(l.jsx)("input",{className:"nodeLabel",ref:s,type:"text",required:!0,label:"Node Label",value:t.label,placeholder:"Enter Node Label",onChange:function(e){return a(Object(r.a)(Object(r.a)({},t),{},{label:e.target.value}))}}):"",Object(l.jsx)("div",{children:" Width"}),Object(l.jsx)("input",{type:"number",value:t.style.width,onChange:function(e){b(!0),y({width:Math.min(500,e.target.value)})}}),Object(l.jsx)("div",{children:" Height"}),Object(l.jsx)("input",{type:"number",value:t.style.height,onChange:function(e){return y({height:Math.min(200,e.target.value)})}}),Object(l.jsx)("div",{children:" Background Color"}),Object(l.jsx)(h,{color:t.style.backgroundColor,setColor:function(e){return y({backgroundColor:e})},type:"light"}),Object(l.jsx)("div",{children:" Border Color"}),Object(l.jsx)(h,{color:t.style.borderColor,setColor:function(e){return y({borderColor:e})},type:"dark"}),Object(l.jsx)("div",{children:" Border Width"}),Object(l.jsx)("input",{type:"number",value:t.style.borderWidth,onChange:function(e){return y({borderWidth:Math.min(30,e.target.value)})}}),Object(l.jsx)("div",{children:" Opacity"}),Object(l.jsx)("input",{type:"number",step:".01",value:t.style.opacity,onChange:function(e){return y({opacity:Math.min(1,Math.max(0,e.target.value))})}})]})]})},_=(a(362),function(e){var t=e.size,a=e.color,n=5*parseInt(t,10),o={borderLeft:"".concat(.8666*n,"px solid ").concat(a),borderBottom:"".concat(n/2,"px solid transparent"),borderTop:"".concat(n/2,"px solid transparent"),marginLeft:-1};return Object(l.jsx)("div",{style:o})}),b=function(e){var t=e.data,a=e.setData,n=e.submit,o=e.labelAllowed,i=function(e){return a(Object(r.a)(Object(r.a)({},t),{},{style:Object(r.a)(Object(r.a)({},t.style),e)}))},s=Object(c.useCallback)((function(e){return e&&e.focus()}),[]),d=function(e){var a=e.name,n=e.shape;return Object(l.jsxs)("label",{htmlFor:"ellipse",children:[Object(l.jsx)("input",{type:"radio",name:"shape",value:n,checked:t.style.shape===n,onChange:function(){return i({shape:n})}}),a]})};return Object(l.jsxs)("div",{className:"edgeform",onSubmit:n,children:[Object(l.jsxs)("div",{className:"par-div",children:[Object(l.jsx)("div",{className:"edge-div",style:{borderBottomWidth:t.style.thickness,borderBottomColor:t.style.backgroundColor,borderBottomStyle:t.style.shape}}),Object(l.jsx)(_,{size:t.style.thickness,color:t.style.backgroundColor}),Object(l.jsx)("div",{className:"label",children:t.label})]}),Object(l.jsxs)("div",{className:"form",children:[o?Object(l.jsx)("div",{children:" Label"}):"",o?Object(l.jsx)("input",{ref:s,className:"span-rest edgeLabel",type:"text",required:!0,label:"Edge Label",value:t.label,placeholder:"Enter Edge Label",onChange:function(e){return a(Object(r.a)(Object(r.a)({},t),{},{label:"".concat(e.target.value)}))}}):"",Object(l.jsx)("div",{children:" Shape"}),Object(l.jsxs)("div",{className:"span-rest hascheckbox",children:[Object(l.jsx)("div",{children:Object(l.jsx)(d,{name:"Solid",shape:"solid"})}),Object(l.jsx)("div",{children:Object(l.jsx)(d,{name:"Dotted",shape:"dotted"})}),Object(l.jsx)("div",{children:Object(l.jsx)(d,{name:"Dashed",shape:"dashed"})})]}),Object(l.jsx)("div",{children:" Thickness"}),Object(l.jsx)("input",{type:"number",value:t.style.thickness,onChange:function(e){return i({thickness:Math.max(0,Math.min(20,e.target.value))})}}),Object(l.jsx)("div",{children:" Background Color"}),Object(l.jsx)(h,{color:t.style.backgroundColor,setColor:function(e){return i({backgroundColor:e})},type:"dark"})]})]})},y={width:100,height:50,shape:"rectangle",opacity:1,backgroundColor:"#ffcc00",borderColor:"#000",borderWidth:1},g={thickness:1,backgroundColor:null,shape:"solid"},f={ModelOpen:!1,modalPayload:{cb:function(){},title:"",submitText:"",Children:"",defaultStyle:{},defaultLabel:"",labelAllowed:null},eleSelected:!1,drawModeOn:!0,undoEnabled:!1,redoEnabled:!1,shareModal:!1,graphs:[],curGraphIndex:0,settingsModal:!1},j={projectDetails:{projectName:"",author:"",set:!1},component:null,instance:null},O=function(e,t){switch(t.type){case n.Model_Open_Create_Node:return Object(r.a)(Object(r.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Create Node",submitText:"Create Node",Children:p,defaultStyle:y,defaultLabel:"",labelAllowed:!0,cb:t.cb}});case n.Model_Open_Create_Edge:return Object(r.a)(Object(r.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Create Edge",submitText:"Create Edge",Children:b,defaultStyle:g,defaultLabel:"",labelAllowed:!0,cb:t.cb}});case n.Model_Open_Update_Node:return Object(r.a)(Object(r.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Edit Node",submitText:"Edit Node",Children:p,defaultStyle:t.style,defaultLabel:t.label,labelAllowed:t.labelAllowed,cb:t.cb}});case n.Model_Open_Update_Edge:return Object(r.a)(Object(r.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Edit Edge",submitText:"Edit Edge",Children:b,defaultStyle:t.style,defaultLabel:t.label,labelAllowed:t.labelAllowed,cb:t.cb}});case n.Model_Close:return Object(r.a)(Object(r.a)({},e),{},{ModelOpen:!1});case n.ELE_SELECTED:return Object(r.a)(Object(r.a)({},e),{},{eleSelected:!0,eleSelectedPayload:t.payload});case n.ELE_UNSELECTED:return Object(r.a)(Object(r.a)({},e),{},{eleSelected:!1});case n.TURN_DRAW:return Object(r.a)(Object(r.a)({},e),{},{drawModeOn:t.payload});case n.SET_UNDO:return Object(r.a)(Object(r.a)({},e),{},{undoEnabled:t.payload});case n.SET_REDO:return Object(r.a)(Object(r.a)({},e),{},{redoEnabled:t.payload});case n.ADD_GRAPH:return Object(r.a)(Object(r.a)({},e),{},{curGraphIndex:e.graphs.length,graphs:[].concat(Object(o.a)(e.graphs),[Object(r.a)(Object(r.a)({},j),{},{component:t.payload.component,projectDetails:t.payload.projectDetails,id:t.payload.id,instance:t.payload.instance})])});case n.ADD_GRAPH_BULK:return Object(r.a)(Object(r.a)({},e),{},{graphs:[].concat(Object(o.a)(e.graphs),Object(o.a)(t.payload))});case n.ADD_GRAPH_INSTANCE:var a=Object(r.a)({},e);return a.graphs[t.index].instance=t.instance,Object(r.a)({},a);case n.NEW_GRAPH:return Object(r.a)(Object(r.a)({},e),{},{curGraphIndex:e.graphs.length});case n.CHANGE_TAB:return Object(r.a)(Object(r.a)({},e),{},{curGraphIndex:t.payload});case n.REMOVE_GRAPH:return Object(r.a)(Object(r.a)({},e),{},{graphs:e.graphs.filter((function(e,a){return a!==t.payload})),curGraphIndex:e.curGraphIndex<t.payload?e.curGraphIndex:Math.max(0,e.curGraphIndex-1)});case n.SET_PROJECT_DETAILS:var i=Object(r.a)({},e);return i.graphs=i.graphs.map((function(e){return e.id===t.payload.id?(e.instance&&e.instance.setProjectDetail(t.payload.projectDetails),Object(r.a)(Object(r.a)({},e),{},{projectDetails:t.payload.projectDetails})):e})),Object(r.a)({},i);case n.SET_SHARE_MODAL:return Object(r.a)(Object(r.a)({},e),{},{shareModal:t.payload});case n.SET_SETTING_MODAL:return Object(r.a)(Object(r.a)({},e),{},{settingsModal:t.payload});default:return e}}}},[[412,1,2]]]);
//# sourceMappingURL=main.0906543d.chunk.js.map