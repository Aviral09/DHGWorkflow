(this["webpackJsonpdhg-workflow"]=this["webpackJsonpdhg-workflow"]||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(56),i=n.n(o),r=(n(101),n(10)),s=(n(102),n(5)),l=n(17),d=n(18),u=n(35),b=n(34),h=n(19),j=n.n(h),y=n(88),p=n.n(y),O=n(89),x=n.n(O),g=n(96),v=[{selector:'node[type = "ordin"]',style:{width:100,height:50,shape:"rectangle",content:"data(name)","background-color":"#fff","border-color":"#000","border-width":3,"text-valign":"center","text-halign":"center"}},{selector:"edge",style:{"curve-style":"bezier","target-arrow-shape":"triangle","border-color":"#000","background-color":"#fff",width:4,"line-color":"#000","target-arrow-color":"#000"}},{selector:"edge[label]",style:{label:"data(label)",width:3,"edge-text-rotation":"autorotate","text-margin-y":"10px"}},{selector:".eh-handle",style:{"background-color":"#f00",height:20,width:20,opacity:.5}},{selector:'node[type="special"]',style:{width:10,height:10,backgroundColor:"red"}}],m={style:Object(g.a)(v),zoomingEnabled:!1,userZoomingEnabled:!1};var f=function(){function e(){var e=Math.floor(256*Math.random()).toString(16);return"0".concat(String(e)).substr(-2)}return"#".concat(e()).concat(e()).concat(e())},w={OpenModal:"OpenModal",CloseModal:"CloseModal"},C=function(e,t){return t.type===w.OpenModal?Object(s.a)(Object(s.a)({},e),{},{ModelOpen:!0,modelCallback:t.modelCallback,isEdge:t.isEdge}):t.type===w.CloseModal?Object(s.a)(Object(s.a)({},e),{},{ModelOpen:!1}):e},k={ModelOpen:!1},N=new(function(e){Object(u.a)(n,e);var t=Object(b.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"addTestData",value:function(){return this}},{key:"getRealNode",value:function(e){return this.cy.$("#".concat(e)).incomers().filter("node")[0]}},{key:"addAutoMove",value:function(e,t){this.cy.automove({nodesMatching:e,reposition:"drag",dragWith:t}),this.cy.automove({nodesMatching:e,reposition:function(e){var n=e.position(),a=t.position(),c=[t.height(),t.width()],o=c[0],i=c[1],s={y:a.y+o/2,x:a.x+i/2},l={y:a.y-o/2,x:a.x-i/2};if(n.x=Math.min(s.x,Math.max(n.x,l.x)),n.y=Math.min(s.y,Math.max(n.y,l.y)),n.x<s.x&&n.y<s.y&&n.x>l.x&&n.y>l.y){var d=[[Math.abs(n.x-s.x),"X",s.x],[Math.abs(n.x-l.x),"X",l.x],[Math.abs(n.y-s.y),"Y",s.y],[Math.abs(n.y-l.y),"Y",l.y]];if(d.sort((function(e,t){return e[0]-t[0]})),"X"===d[0][1]){var u=Object(r.a)(d[0],3);n.x=u[2]}if("Y"===d[0][1]){var b=Object(r.a)(d[0],3);n.y=b[2]}}return n},when:"matching"})}},{key:"modifyNewEdge",value:function(e,t,n){var a,c,o=this,i=n.sourceEndpoint(),r=t.data("id"),s=e.data("id");if("special"!==e.data("type")){var l=(new Date).getTime();this.dispatcher({type:w.OpenModal,modelCallback:function(e){a=e,c=f(),o.addNode("",{"background-color":c},"special",i,l,{edgeName:a,edgeColor:c}),o.addEdge(s,l,a,c,{"target-arrow-shape":"none"}),o.addAutoMove(o.cy.$("#".concat(l)),o.cy.$("#".concat(s))),s=l,o.getRealNode(l),n.remove(),o.addEdge(s,r,a,c)},isEdge:1})}else a=e.data("edgeName"),c=e.data("edgeColor"),n.remove(),this.addEdge(s,r,a,c)}}]),n}(function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"setCy",value:function(e){this.cy=e,window.cyx=e}},{key:"setDispatcher",value:function(e){this.dispatcher=e}},{key:"addNode",value:function(e,t,n,a,c,o){var i=c||(new Date).getTime();console.log(e,n,i),this.cy.add({group:"nodes",data:Object(s.a)({id:i,name:e,type:n},o),style:t,position:a})}},{key:"addEdge",value:function(e,t,n,a){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.cy.add({group:"edges",data:{source:e,target:t,label:n},style:Object(s.a)(Object(s.a)({},c),{},{"line-color":a,"target-arrow-color":a})})}},{key:"modifyNewEdge",value:function(){return this}}]),e}())),M=n(4),E=function(e){Object(u.a)(n,e);var t=Object(b.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){"function"!==typeof j()("core","edgehandles")&&j.a.use(p.a),"function"!==typeof j()("core","automove")&&j.a.use(x.a),this.cy=j()(Object(s.a)(Object(s.a)({},m),{},{container:document.getElementById("cy")}));var e=this.props.dispatcher;N.setCy(this.cy),N.setDispatcher(e),window.cye=this.cy.edgehandles({preview:!1,handlePosition:function(){return"none"},complete:function(e,t,n){return N.modifyNewEdge(e,t,n)}})}},{key:"render",value:function(){return Object(M.jsx)("div",{style:{height:"100%",width:"100%"},id:"cy"})}}]),n}(c.a.Component),S=n(57),D=n.n(S),I=(n(123),n(124),n(95)),B={height:"100px",minHeight:"100px",width:"auto",background:"aliceblue",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"},R={border:"1px solid black",width:"100px",height:"50px",backgroundColor:"#888",display:"inline-flex",justifyContent:"center",alignItems:"center",whiteSpace:"nowrap"},T=function(e){var t=e.color,n=e.setColor,a=c.a.useState(!1),o=Object(r.a)(a,2),i=o[0],s=o[1];return Object(M.jsxs)("div",{className:"color-box-par",onClick:function(){return!i&&s(!0)},children:[Object(M.jsx)("div",{className:"color-box",style:{background:t}}),Object(M.jsxs)("div",{className:"color-picker",style:{display:i?"block":"none"},children:[Object(M.jsx)("div",{role:"button",className:"overlay",onClick:function(){return s(!1)}}),Object(M.jsx)(I.a,{color:t,onChangeComplete:function(e){return n(e.hex)}})]})]})},W=function(e){var t=e.data,n=e.setData,a=e.submit,c=Object(s.a)(Object(s.a)({},R),{},{backgroundColor:t.style["background-color"],borderColor:t.style["border-color"],borderWidth:t.style["border-width"],textValign:t.style["text-valign"],textHalign:t.style["text-halign"],width:t.style.width,height:t.style.height,opacity:t.style.opacity}),o=Object(s.a)(Object(s.a)({},B),{},{height:t.style.height});return Object(M.jsxs)("div",{className:"nodeform",onSubmit:a,children:[Object(M.jsx)("div",{style:o,children:Object(M.jsx)("div",{style:c,children:t.name})}),Object(M.jsxs)("div",{className:"form",style:{padding:20},children:[Object(M.jsx)("div",{children:" Label"}),Object(M.jsx)("input",{type:"text",required:!0,name:"Node Name",value:t.name,placeholder:"Enter Node Name",onChange:function(e){return n(Object(s.a)(Object(s.a)({},t),{},{name:"".concat(e.target.value)}))}}),Object(M.jsx)("div",{children:" Width"}),Object(M.jsx)("input",{type:"number",value:t.style.width.slice(0,-2),onChange:function(e){return n(Object(s.a)(Object(s.a)({},t),{},{style:Object(s.a)(Object(s.a)({},t.style),{},{width:"".concat(Math.min(500,e.target.value),"px")})}))}}),Object(M.jsx)("div",{children:" Height"}),Object(M.jsx)("input",{type:"number",value:t.style.height.slice(0,-2),onChange:function(e){return n(Object(s.a)(Object(s.a)({},t),{},{style:Object(s.a)(Object(s.a)({},t.style),{},{height:"".concat(Math.min(200,e.target.value),"px")})}))}}),Object(M.jsx)("div",{children:" Background Color"}),Object(M.jsx)(T,{color:t.style["background-color"],setColor:function(e){return n(Object(s.a)(Object(s.a)({},t),{},{style:Object(s.a)(Object(s.a)({},t.style),{},{"background-color":e})}))}}),Object(M.jsx)("div",{children:" Border Color"}),Object(M.jsx)(T,{color:t.style["border-color"],setColor:function(e){return n(Object(s.a)(Object(s.a)({},t),{},{style:Object(s.a)(Object(s.a)({},t.style),{},{"border-color":e})}))}}),Object(M.jsx)("div",{children:" Border Width"}),Object(M.jsx)("input",{type:"number",value:t.style["border-width"].slice(0,-2),onChange:function(e){return n(Object(s.a)(Object(s.a)({},t),{},{style:Object(s.a)(Object(s.a)({},t.style),{},{"border-width":"".concat(Math.min(30,e.target.value),"px")})}))}}),Object(M.jsx)("div",{children:" Opacity"}),Object(M.jsx)("input",{type:"number",step:".01",value:t.style.opacity,onChange:function(e){return n(Object(s.a)(Object(s.a)({},t),{},{style:Object(s.a)(Object(s.a)({},t.style),{},{opacity:Math.min(1,Math.max(0,e.target.value))})}))}})]})]})},P={width:"100px",height:"50px",shape:"rectangle",opacity:1,"background-color":"#fff","border-color":"#000","border-width":"3px","text-valign":"center","text-halign":"center"};D.a.setAppElement("#root");var F=function(e){var t=e.isOpen,n=e.closeModal,c=e.onSubmit,o=e.isEdge,i=Object(a.useState)(""),l=Object(r.a)(i,2),d=l[0],u=l[1],b=Object(a.useState)({}),h=Object(r.a)(b,2),j=h[0],y=h[1];Object(a.useEffect)((function(){y({name:"",style:P}),!0===t&&(u("closing"),setTimeout((function(){u("")}),20))}),[t]);var p=function(){u("closing"),setTimeout((function(){n()}),400)};return Object(M.jsx)(D.a,{isOpen:t,contentLabel:"onRequestClose Example",onRequestClose:p,className:"Modal",overlayClassName:"Overlay ".concat(d),children:Object(M.jsx)("form",{onSubmit:function(e){e.preventDefault(),c(j.name,j.style),p()},children:Object(M.jsxs)("div",{className:"modal-content ".concat(d),children:[Object(M.jsxs)("div",{className:"modal-header",children:[Object(M.jsx)("div",{className:"modal-title h4",children:"Modal heading"}),Object(M.jsxs)("button",{type:"button",className:"close",onClick:p,children:[Object(M.jsx)("span",{"aria-hidden":"true",children:"\xd7"}),Object(M.jsx)("span",{className:"sr-only",children:"Close"})]})]}),Object(M.jsx)("div",{className:"modal-content-body",children:o?Object(M.jsx)("input",{type:"text",value:j.name,onChange:function(e){return y(Object(s.a)(Object(s.a)({},j),{},{name:e.target.value}))}}):Object(M.jsx)(W,{data:j,setData:y})}),Object(M.jsxs)("div",{className:"modal-footer",children:[Object(M.jsx)("button",{type:"button",className:"btn btn-secondary",children:"Close"}),Object(M.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save Changes"})]})]})})})},G=(n(231),n(94)),H=n(59),L=n(8),$=function(e,t){t({type:w.OpenModal,modelCallback:function(e,t){N.addNode(e,t,"ordin",{x:100,y:100})}})},q=function(e){return alert(e)},z=function(){return[{type:"action",text:"Node",icon:L.e,action:$,active:!0},{type:"vsep"},{type:"action",text:"Edit",icon:L.b,action:q,active:!0},{type:"action",text:"Open",icon:L.d,action:q,active:!0},{type:"action",text:"Save",icon:L.g,action:q,active:!0},{type:"vsep"},{type:"action",text:"Undo",icon:L.i,action:q,active:!0},{type:"action",text:"Redo",icon:L.f,action:q,active:!0},{type:"vsep"},{type:"action",text:"Delete",icon:L.h,action:q,active:!0},{type:"vsep"},{type:"action",text:"In",icon:H.b,action:q,active:!0},{type:"action",text:"Out",icon:H.a,action:q,active:!0},{type:"action",text:"Reset",icon:G.a,action:q,active:!0},{type:"space"},{type:"action",text:"JPG",icon:L.a,action:q,active:!0},{type:"action",text:"PNG",icon:L.a,action:q,active:!0},{type:"vsep"},{type:"action",text:"Export",icon:L.c,action:q,active:!0}]},A=function(e){var t=e.Icon,n=e.text,a=e.action,c=e.active,o=e.tabIndex;return Object(M.jsxs)("div",{role:"button",tabIndex:o,className:"tool ".concat(c?"active":""),onClick:a,onKeyDown:function(e){return 13===e.key&&a()},children:[Object(M.jsx)("div",{className:"icon",children:Object(M.jsx)(t,{size:"25"})}),Object(M.jsx)("div",{children:n})]})},J=function(){return Object(M.jsx)("div",{className:"Vsep sep"})},X=function(){return Object(M.jsx)("div",{className:"hsep sep"})},Y=function(){return Object(M.jsx)("div",{className:"space"})},V=function(e){var t=e.title,n=e.state,a=e.dispatcher;return Object(M.jsxs)("header",{className:"header",children:[Object(M.jsx)("section",{className:"middle titlebar",children:"".concat(t," - DHGWorkflow Editor")}),Object(M.jsx)("section",{className:"toolbar",children:z(n,a).map((function(e,t){return"vsep"===e.type?Object(M.jsx)(J,{},"".concat("v".concat(t))):"space"===e.type?Object(M.jsx)(Y,{},"".concat("s".concat(t))):Object(M.jsx)(A,{Icon:e.icon,text:e.text,active:e.active,action:function(){return e.action(n,a)},tabIndex:t+1},e.text)}))}),Object(M.jsx)(X,{})]})},K=function(){var e=Object(a.useReducer)(C,k),t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(M.jsxs)("div",{children:[Object(M.jsx)(F,{isOpen:n.ModelOpen,closeModal:function(){return c({type:w.CloseModal})},onSubmit:n.modelCallback,isEdge:n.isEdge}),Object(M.jsx)(V,{title:"MyGraph",state:n,dispatcher:c}),Object(M.jsx)("section",{className:"body",children:Object(M.jsx)("div",{className:"graph-container",children:Object(M.jsx)(E,{dispatcher:c})})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,234)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))};i.a.render(Object(M.jsx)(c.a.StrictMode,{children:Object(M.jsx)(K,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),U()}},[[232,1,2]]]);
//# sourceMappingURL=main.38ec8f9a.chunk.js.map