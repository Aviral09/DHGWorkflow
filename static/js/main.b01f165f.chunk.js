(this["webpackJsonpdhg-workflow"]=this["webpackJsonpdhg-workflow"]||[]).push([[0],{31:function(e,t,n){},32:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a=n(2),o=n.n(a),c=n(16),i=n.n(c),r=(n(31),n(5)),s=(n(32),n(3)),d=n(6),l=n(7),u=n(13),h=n(12),b=n(8),y=n.n(b),p=n(23),j=n.n(p),v=n(24),x=n.n(v),f=n(26),m=[{selector:'node[type = "ordin"]',style:{width:100,height:50,shape:"rectangle",content:"data(name)","background-color":"#fff","border-color":"#000","border-width":3,"text-valign":"center","text-halign":"center"}},{selector:"edge",style:{"curve-style":"bezier","target-arrow-shape":"triangle","border-color":"#000","background-color":"#fff",width:4,"line-color":"#000","target-arrow-color":"#000"}},{selector:"edge[label]",style:{label:"data(label)",width:3,"edge-text-rotation":"autorotate","text-margin-y":"10px"}},{selector:".eh-handle",style:{"background-color":"#f00",height:20,width:20,opacity:.5}},{selector:'node[type="special"]',style:{width:10,height:10,backgroundColor:"red"}}],O={style:Object(f.a)(m),zoomingEnabled:!1,userZoomingEnabled:!1};var g=function(){function e(){var e=Math.floor(256*Math.random()).toString(16);return"0".concat(String(e)).substr(-2)}return"#".concat(e()).concat(e()).concat(e())},w={OpenModal:"OpenModal",CloseModal:"CloseModal"},M=function(e,t){return t.type===w.OpenModal?Object(s.a)(Object(s.a)({},e),{},{ModelOpen:!0,modelCallback:t.modelCallback}):t.type===w.CloseModal?Object(s.a)(Object(s.a)({},e),{},{ModelOpen:!1}):e},N={ModelOpen:!1},k=new(function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"addTestData",value:function(){return this}},{key:"getRealNode",value:function(e){return this.cy.$("#".concat(e)).incomers().filter("node")[0]}},{key:"addAutoMove",value:function(e,t){this.cy.automove({nodesMatching:e,reposition:"drag",dragWith:t}),this.cy.automove({nodesMatching:e,reposition:function(e){var n=e.position(),a=t.position(),o=[t.height(),t.width()],c=o[0],i=o[1],s={y:a.y+c/2,x:a.x+i/2},d={y:a.y-c/2,x:a.x-i/2};if(n.x=Math.min(s.x,Math.max(n.x,d.x)),n.y=Math.min(s.y,Math.max(n.y,d.y)),n.x<s.x&&n.y<s.y&&n.x>d.x&&n.y>d.y){var l=[[Math.abs(n.x-s.x),"X",s.x],[Math.abs(n.x-d.x),"X",d.x],[Math.abs(n.y-s.y),"Y",s.y],[Math.abs(n.y-d.y),"Y",d.y]];if(l.sort((function(e,t){return e[0]-t[0]})),"X"===l[0][1]){var u=Object(r.a)(l[0],3);n.x=u[2]}if("Y"===l[0][1]){var h=Object(r.a)(l[0],3);n.y=h[2]}}return n},when:"matching"})}},{key:"modifyNewEdge",value:function(e,t,n){var a,o,c=this,i=n.sourceEndpoint(),r=t.data("id"),s=e.data("id");if("special"!==e.data("type")){var d=(new Date).getTime();this.dispatcher({type:w.OpenModal,modelCallback:function(e){a=e,o=g(),c.addNode("",{"background-color":o},"special",i,d,{edgeName:a,edgeColor:o}),c.addEdge(s,d,a,o,{"target-arrow-shape":"none"}),c.addAutoMove(c.cy.$("#".concat(d)),c.cy.$("#".concat(s))),s=d,c.getRealNode(d),n.remove(),c.addEdge(s,r,a,o)}})}else a=e.data("edgeName"),o=e.data("edgeColor"),n.remove(),this.addEdge(s,r,a,o)}}]),n}(function(){function e(){Object(d.a)(this,e)}return Object(l.a)(e,[{key:"setCy",value:function(e){this.cy=e,window.cyx=e}},{key:"setDispatcher",value:function(e){this.dispatcher=e}},{key:"addNode",value:function(e,t,n,a,o,c){var i=o||(new Date).getTime();console.log(e,n,i),this.cy.add({group:"nodes",data:Object(s.a)({id:i,name:e,type:n},c),style:t,position:a})}},{key:"addEdge",value:function(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.cy.add({group:"edges",data:{source:e,target:t,label:n},style:Object(s.a)(Object(s.a)({},o),{},{"line-color":a,"target-arrow-color":a})})}},{key:"modifyNewEdge",value:function(){return this}}]),e}())),C=n(1),E=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){"function"!==typeof y()("core","edgehandles")&&y.a.use(j.a),"function"!==typeof y()("core","automove")&&y.a.use(x.a),this.cy=y()(Object(s.a)(Object(s.a)({},O),{},{container:document.getElementById("cy")}));var e=this.props.dispatcher;k.setCy(this.cy),k.setDispatcher(e),window.cye=this.cy.edgehandles({preview:!1,handlePosition:function(){return"none"},complete:function(e,t,n){return k.modifyNewEdge(e,t,n)}})}},{key:"render",value:function(){return Object(C.jsx)("div",{style:{height:"100%",width:"100%"},id:"cy"})}}]),n}(o.a.Component),D=n(17),S=n.n(D);n(53);S.a.setAppElement("#root");var I=function(e){var t=e.isOpen,n=e.closeModal,o=e.onSubmit,c=Object(a.useState)(""),i=Object(r.a)(c,2),s=i[0],d=i[1],l=Object(a.useState)(""),u=Object(r.a)(l,2),h=u[0],b=u[1];Object(a.useEffect)((function(){!0===t&&(d("closing"),setTimeout((function(){d("")}),20))}),[t]);var y=function(){d("closing"),b(""),setTimeout((function(){n()}),400)};return Object(C.jsx)(S.a,{isOpen:t,contentLabel:"onRequestClose Example",onRequestClose:y,className:"Modal",overlayClassName:"Overlay ".concat(s),children:Object(C.jsx)("form",{onSubmit:function(e){e.preventDefault(),o(h),y()},children:Object(C.jsxs)("div",{className:"modal-content ".concat(s),children:[Object(C.jsxs)("div",{className:"modal-header",children:[Object(C.jsx)("div",{className:"modal-title h4",children:"Modal heading"}),Object(C.jsxs)("button",{type:"button",className:"close",onClick:y,children:[Object(C.jsx)("span",{"aria-hidden":"true",children:"\xd7"}),Object(C.jsx)("span",{className:"sr-only",children:"Close"})]})]}),Object(C.jsx)("input",{type:"text",value:h,onChange:function(e){return b(e.target.value)}}),Object(C.jsx)("div",{className:"modal-body",children:"Woohoo, you're reading this text in a modal!"}),Object(C.jsxs)("div",{className:"modal-footer",children:[Object(C.jsx)("button",{type:"button",className:"btn btn-secondary",children:"Close"}),Object(C.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save Changes"})]})]})})})},R=(n(54),n(25)),T=n(18),P=n(4),W=function(e,t){t({type:w.OpenModal,modelCallback:function(e){k.addNode(e,{},"ordin",{x:100,y:100})}})},B=function(e){return alert(e)},F=function(){return[{type:"action",text:"Node",icon:P.e,action:W,active:!0},{type:"vsep"},{type:"action",text:"Edit",icon:P.b,action:B,active:!0},{type:"action",text:"Open",icon:P.d,action:B,active:!0},{type:"action",text:"Save",icon:P.g,action:B,active:!0},{type:"vsep"},{type:"action",text:"Undo",icon:P.i,action:B,active:!0},{type:"action",text:"Redo",icon:P.f,action:B,active:!0},{type:"vsep"},{type:"action",text:"Delete",icon:P.h,action:B,active:!0},{type:"vsep"},{type:"action",text:"In",icon:T.b,action:B,active:!0},{type:"action",text:"Out",icon:T.a,action:B,active:!0},{type:"action",text:"Reset",icon:R.a,action:B,active:!0},{type:"space"},{type:"action",text:"JPG",icon:P.a,action:B,active:!0},{type:"action",text:"PNG",icon:P.a,action:B,active:!0},{type:"vsep"},{type:"action",text:"Export",icon:P.c,action:B,active:!0}]},G=function(e){var t=e.Icon,n=e.text,a=e.action,o=e.active,c=e.tabIndex;return Object(C.jsxs)("div",{role:"button",tabIndex:c,className:"tool ".concat(o?"active":""),onClick:a,onKeyDown:function(e){return 13===e.key&&a()},children:[Object(C.jsx)("div",{className:"icon",children:Object(C.jsx)(t,{size:"25"})}),Object(C.jsx)("div",{children:n})]})},$=function(){return Object(C.jsx)("div",{className:"Vsep sep"})},z=function(){return Object(C.jsx)("div",{className:"hsep sep"})},A=function(){return Object(C.jsx)("div",{className:"space"})},J=function(e){var t=e.title,n=e.state,a=e.dispatcher;return Object(C.jsxs)("header",{className:"header",children:[Object(C.jsx)("section",{className:"middle titlebar",children:"".concat(t," - DHGWorkflow Editor")}),Object(C.jsx)("section",{className:"toolbar",children:F(n,a).map((function(e,t){return"vsep"===e.type?Object(C.jsx)($,{},"".concat("v".concat(t))):"space"===e.type?Object(C.jsx)(A,{},"".concat("s".concat(t))):Object(C.jsx)(G,{Icon:e.icon,text:e.text,active:e.active,action:function(){return e.action(n,a)},tabIndex:t+1},e.text)}))}),Object(C.jsx)(z,{})]})},L=function(){var e=Object(a.useReducer)(M,N),t=Object(r.a)(e,2),n=t[0],o=t[1];return Object(C.jsxs)("div",{children:[Object(C.jsx)(I,{isOpen:n.ModelOpen,closeModal:function(){return o({type:w.CloseModal})},onSubmit:n.modelCallback}),Object(C.jsx)(J,{title:"MyGraph",state:n,dispatcher:o}),Object(C.jsx)("section",{className:"body",children:Object(C.jsx)("div",{className:"graph-container",children:Object(C.jsx)(E,{dispatcher:o})})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,56)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),o(e),c(e),i(e)}))};i.a.render(Object(C.jsx)(o.a.StrictMode,{children:Object(C.jsx)(L,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),X()}},[[55,1,2]]]);
//# sourceMappingURL=main.b01f165f.chunk.js.map