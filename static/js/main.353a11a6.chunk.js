(this["webpackJsonpdhg-workflow"]=this["webpackJsonpdhg-workflow"]||[]).push([[0],{140:function(e,t,a){},141:function(e,t,a){},165:function(e,t,a){},275:function(e,t,a){},279:function(e,t,a){},326:function(e,t,a){},329:function(e,t,a){},330:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),c=a(17),i=a.n(c),l=(a(140),a(12)),r=(a(141),a(4)),d=a(32),s=a(33),u=a(56),h=a(54),b=a(24),y=a.n(b),p=a(121),j=a.n(p),g=a(122),f=a.n(g),v=a(123),x=a.n(v),O=a(55),m={width:"100px",height:"50px",shape:"rectangle",opacity:1,"background-color":"#e0f2f1","border-color":"#000","border-width":"2px","text-valign":"center","text-halign":"center"},E={"target-arrow-shape":"triangle",width:"2px","line-color":"#000","target-arrow-color":"#000"},w=[{selector:'node[type = "ordin"]',style:Object(r.a)(Object(r.a)({content:"data(label)"},m),{},{"z-index":100})},{selector:"edge",style:Object(r.a)({"curve-style":"bezier"},E)},{selector:"edge[label]",style:{label:"data(label)",width:3,"edge-text-rotation":"autorotate","z-index":999,"text-margin-y":"10px"}},{selector:".eh-handle",style:{"background-color":"#f00",height:20,width:20,opacity:.5}},{selector:'node[type="special"]',style:{width:10,height:10,backgroundColor:"red","z-index":1e3}},{selector:":selected",style:{"overlay-color":"#000","overlay-opacity":.1}}],N={style:Object(O.a)(w),zoomingEnabled:!0,userZoomingEnabled:!0,minZoom:.25,maxZoom:5},C=a(27),S=a(19),k=a(57),M=a(160)({$$typeof:"",Model_Open_Create_Node:"OpenModal_CreateNode",Model_Open_Create_Edge:"OpenModal_CreateEdge",Model_Open_Update_Edge:"OpenModal_UpdateEdge",Model_Open_Update_Node:"OpenModal_UpdateNode",Model_Close:"CloseModal",ELE_UNSELECTED:"ELE_UNSELECTED",ELE_SELECTED:"ELE_SELECTED",TURN_DRAW:"TURN_DRAW",SET_ZOOM:"SET_ZOOM"}),I=(a(165),a(133)),_=a(3),L=function(e){var t=e.color,a=e.setColor,n=o.a.useState(!1),c=Object(l.a)(n,2),i=c[0],r=c[1];return Object(_.jsxs)("div",{role:"button",tabIndex:0,className:"color-box-par",onClick:function(){return!i&&r(!0)},onKeyDown:function(e){return 13===e.key&&!i&&r(!0)},children:[Object(_.jsx)("div",{className:"color-box",style:{background:t}}),Object(_.jsxs)("div",{className:"color-picker",style:{display:i?"block":"none"},children:[Object(_.jsx)("div",{role:"button",className:"overlay",onClick:function(){return r(!1)}}),Object(_.jsx)(I.a,{color:t,onChangeComplete:function(e){return a(e.hex)}})]})]})},D={height:"100px",minHeight:"100px",width:"auto",background:"aliceblue",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"},T={border:"1px solid black",width:"100px",height:"50px",backgroundColor:"#888",display:"inline-flex",justifyContent:"center",alignItems:"center",whiteSpace:"nowrap"},B=function(e){var t=e.data,a=e.setData,n=e.submit,o=e.labelAllowed,c=Object(r.a)(Object(r.a)({},T),{},{backgroundColor:t.style["background-color"],borderColor:t.style["border-color"],borderWidth:t.style["border-width"],textValign:t.style["text-valign"],textHalign:t.style["text-halign"],width:t.style.width,height:t.style.height,opacity:t.style.opacity,borderRadius:"ellipse"===t.style.shape?"100%":0}),i=Object(r.a)(Object(r.a)({},D),{},{height:t.style.height}),l=function(e){a(Object(r.a)(Object(r.a)({},t),{},{style:Object(r.a)(Object(r.a)({},t.style),e)}))};return Object(_.jsxs)("div",{className:"nodeform",onSubmit:n,children:[Object(_.jsx)("div",{style:i,children:Object(_.jsx)("div",{style:c,children:o?t.label:""})}),Object(_.jsxs)("div",{className:"form",style:{padding:20},children:[Object(_.jsx)("div",{children:" Shape"}),Object(_.jsx)("div",{children:Object(_.jsxs)("label",{htmlFor:"rectangle",children:[Object(_.jsx)("input",{type:"radio",name:"shape",value:"rectangle",checked:"rectangle"===t.style.shape,onChange:function(){return l({shape:"rectangle"})}}),"Rectangle"]})}),Object(_.jsx)("div",{children:Object(_.jsxs)("label",{htmlFor:"ellipse",children:[Object(_.jsx)("input",{type:"radio",name:"shape",value:"ellipse",checked:"ellipse"===t.style.shape,onChange:function(){return l({shape:"ellipse"})}}),"Ellipse"]})}),Object(_.jsx)("div",{}),o?Object(_.jsx)("div",{children:" Label"}):"",o?Object(_.jsx)("input",{className:"nodeLabel",type:"text",required:!0,label:"Node Label",value:t.label,placeholder:"Enter Node Label",onChange:function(e){return a(Object(r.a)(Object(r.a)({},t),{},{label:"".concat(e.target.value)}))}}):"",Object(_.jsx)("div",{children:" Width"}),Object(_.jsx)("input",{type:"number",value:t.style.width.slice(0,-2),onChange:function(e){return l({width:"".concat(Math.min(500,e.target.value),"px")})}}),Object(_.jsx)("div",{children:" Height"}),Object(_.jsx)("input",{type:"number",value:t.style.height.slice(0,-2),onChange:function(e){return l({height:"".concat(Math.min(200,e.target.value),"px")})}}),Object(_.jsx)("div",{children:" Background Color"}),Object(_.jsx)(L,{color:t.style["background-color"],setColor:function(e){return l({"background-color":e})}}),Object(_.jsx)("div",{children:" Border Color"}),Object(_.jsx)(L,{color:t.style["border-color"],setColor:function(e){return l({"border-color":e})}}),Object(_.jsx)("div",{children:" Border Width"}),Object(_.jsx)("input",{type:"number",value:t.style["border-width"].slice(0,-2),onChange:function(e){return l({"border-width":"".concat(Math.min(30,e.target.value),"px")})}}),Object(_.jsx)("div",{children:" Opacity"}),Object(_.jsx)("input",{type:"number",step:".01",value:t.style.opacity,onChange:function(e){return l({opacity:Math.min(1,Math.max(0,e.target.value))})}})]})]})},R=(a(275),{height:"100px",minHeight:"100px",width:"auto",background:"aliceblue",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"}),z={border:"none",width:"240px",height:"2px",backgroundColor:"#000",display:"inline-block"},P=function(e){var t=e.size,a=e.color,n=5*parseInt(t,10),o={borderLeft:"".concat(.8666*n,"px solid ").concat(a),borderBottom:"".concat(n/2,"px solid transparent"),borderTop:"".concat(n/2,"px solid transparent"),marginLeft:-1};return Object(_.jsx)("div",{style:o})},A=function(e){var t=e.data,a=e.setData,n=e.submit,o=e.labelAllowed,c=Object(r.a)(Object(r.a)({},z),{},{backgroundColor:t.style["line-color"],height:t.style.width}),i=Object(r.a)(Object(r.a)({},R),{},{height:t.style.height}),l=function(e){a(Object(r.a)(Object(r.a)({},t),{},{style:Object(r.a)(Object(r.a)({},t.style),e)}))};return Object(_.jsxs)("div",{className:"edgeform",onSubmit:n,children:[Object(_.jsxs)("div",{style:i,children:[Object(_.jsx)("div",{style:c}),Object(_.jsx)(P,{size:t.style.width.slice(0,-2),color:t.style["line-color"]}),Object(_.jsx)("div",{className:"label",children:t.label})]}),Object(_.jsxs)("div",{className:"form",children:[o?Object(_.jsx)("div",{children:" Label"}):"",o?Object(_.jsx)("input",{className:"edgeLabel",type:"text",required:!0,label:"Edge Label",value:t.label,placeholder:"Enter Edge Label",onChange:function(e){return a(Object(r.a)(Object(r.a)({},t),{},{label:"".concat(e.target.value)}))}}):"",Object(_.jsx)("div",{children:" Width"}),Object(_.jsx)("input",{type:"number",value:t.style.width.slice(0,-2),onChange:function(e){return l({width:"".concat(Math.max(0,Math.min(20,e.target.value)),"px")})}}),Object(_.jsx)("div",{children:" Background Color"}),Object(_.jsx)(L,{color:t.style["line-color"],setColor:function(e){return l({"line-color":e,"target-arrow-color":e})}})]})]})},G=function(e,t){switch(t.type){case M.Model_Open_Create_Node:return Object(r.a)(Object(r.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Create Node",submitText:"Create Node",Children:B,defaultStyle:m,defaultLabel:"",labelAllowed:!0,cb:t.cb}});case M.Model_Open_Create_Edge:return Object(r.a)(Object(r.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Create Edge",submitText:"Create Edge",Children:A,defaultStyle:E,defaultLabel:"",labelAllowed:!0,cb:t.cb}});case M.Model_Open_Update_Node:return Object(r.a)(Object(r.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Edit Node",submitText:"Edit Node",Children:B,defaultStyle:t.style,defaultLabel:t.label,labelAllowed:t.labelAllowed,cb:t.cb}});case M.Model_Open_Update_Edge:return Object(r.a)(Object(r.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Edit Edge",submitText:"Edit Edge",Children:A,defaultStyle:t.style,defaultLabel:t.label,labelAllowed:t.labelAllowed,cb:t.cb}});case M.Model_Close:return Object(r.a)(Object(r.a)({},e),{},{ModelOpen:!1});case M.ELE_SELECTED:return Object(r.a)(Object(r.a)({},e),{},{eleSelected:!0,eleSelectedPayload:t.payload});case M.ELE_UNSELECTED:return Object(r.a)(Object(r.a)({},e),{},{eleSelected:!1});case M.TURN_DRAW:return Object(r.a)(Object(r.a)({},e),{},{drawModeOn:t.payload});case M.SET_ZOOM:return Object(r.a)(Object(r.a)({},e),{},{zoomValue:t.payload});default:return e}},W={ModelOpen:!1,eleSelected:!1,drawModeOn:!0,zoomValue:100},J={getEq:function(e,t){var a=(e.y-t.y)/(e.x-t.x);return[a,e.y-a*e.x]},getX1X2:function(e,t,a,n){if(e.x===t.x)return[t.x,t.x];var o={x:t.x-e.x,y:t.y-e.y},c=this.getEq({x:0,y:0},o),i=Object(l.a)(c,2),r=i[0],d=i[1],s=Math.pow(a,2)*Math.pow(r,2)+Math.pow(n,2),u=2*Math.pow(a,2)*r*d,h=Math.pow(a,2)*(Math.pow(d,2)-Math.pow(n,2)),b=Math.pow(u,2)-4*s*h;return[(-u+Math.pow(b,.5))/(2*s)+e.x,(-u-Math.pow(b,.5))/(2*s)+e.x]},getY1Y2:function(e,t,a,n,o,c){if(o===c)return[e.y+n,e.y-n];var i=this.getEq(e,t),r=Object(l.a)(i,2),d=r[0],s=r[1];return[d*o+s,d*c+s]},dist:function(e,t){return Math.pow(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2),.5)},getClosestEllipse:function(e,t,a,n){var o=this.getX1X2(e,t,a,n),c=Object(l.a)(o,2),i=c[0],r=c[1],d=this.getY1Y2(e,t,a,n,i,r),s=Object(l.a)(d,2),u=s[0],h=s[1],b=[this.dist(t,{x:i,y:u}),this.dist(t,{x:r,y:h})];return b[0]<b[1]?{x:i,y:u}:{x:r,y:h}},slope:function(e,t,a,n){return(e-a)/(t-n)},getClosestRect:function(e,t,a,n){var o,c,i=[[e.x+a,e.y+n],[e.x+a,e.y-n]].map((function(a){var n=Object(l.a)(a,2),o=n[0],c=n[1];return(e.x-o)*(t.y-c)-(e.y-c)*(t.x-o)})),r=Object(l.a)(i,2),d=r[0],s=r[1],u=this.getEq(t,e),h=Object(l.a)(u,2),b=h[0],y=h[1],p=[[(e.y-n-y)/b,e.y-n],[e.x+a,b*(e.x+a)+y],[e.x-a,b*(e.x-a)+y],[(e.y+n-y)/b,e.y+n]];if(d<=0&&s<=0){var j=Object(l.a)(p[3],2);o=j[0],c=j[1]}else if(d>=0&&s<=0){var g=Object(l.a)(p[1],2);o=g[0],c=g[1]}else if(d>=0&&s>=0){var f=Object(l.a)(p[0],2);o=f[0],c=f[1]}else if(d<=0&&s>=0){var v=Object(l.a)(p[2],2);o=v[0],c=v[1]}return o&&c?{x:o,y:c}:t},getClosest:function(e,t,a,n,o){return"rectangle"===o?this.getClosestRect(e,t,a,n):this.getClosestEllipse(e,t,a,n)}},U=new(function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"addTestData",value:function(){return this.addNode("A",{},"ordin",{x:100,y:100}),this.addNode("B",{},"ordin",{x:500,y:100}),this}},{key:"getRealNode",value:function(e){return this.getById(e).incomers().filter("node")[0]}},{key:"addAutoMove",value:function(e,t){this.cy.automove({nodesMatching:e,reposition:"drag",dragWith:t});var a=this.cy.automove({nodesMatching:e,reposition:function(e){var a=e.position(),n=t.position(),o=[t.height(),t.width()],c=o[0],i=o[1],l=J.getClosest(n,a,i/2,c/2,t.style().shape);return{x:Math.round(l.x),y:Math.round(l.y)}},when:"matching"});t.scratch("automove",[a]),e.unselectify()}},{key:"addEdgeWithJuncNode",value:function(e,t){var n=this.getById(e);return Object(C.a)(Object(S.a)(a.prototype),"addEdge",this).call(this,e,t,n.data("edgeLabel"),n.data("edgeStyle"))}},{key:"addEdgeWithoutJuncNode",value:function(e,t,n,o){var c=this.getById(e),i=this.getById(t),l=c.style(),d=J.getClosest(c.position(),i.position(),parseInt(l.width.slice(0,-2),10)/2,parseInt(l.height.slice(0,-2),10)/2,l["target-arrow-shape"]),s=Object(C.a)(Object(S.a)(a.prototype),"addNode",this).call(this,"",{"background-color":o["line-color"]},"special",d,{edgeLabel:n,edgeStyle:o});return Object(C.a)(Object(S.a)(a.prototype),"addEdge",this).call(this,e,s.id(),"",Object(r.a)(Object(r.a)({},o),{},{"target-arrow-shape":"none"}),"special"),this.addAutoMove(s,c),this.addEdgeWithJuncNode(s.id(),t)}},{key:"addEdge",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3?arguments[3]:void 0,c=this.getById(e);if("special"===c.data("type"))return this.addEdgeWithJuncNode(e,t);var i=c.outgoers("node").filter((function(e){return e.data("edgeLabel")===n}));return i.length?this.addEdgeWithJuncNode(i[0].id(),t):n.length?this.addEdgeWithoutJuncNode(e,t,n,o):(this.dispatcher({type:M.Model_Open_Create_Edge,cb:function(n,o){return a.addEdgeWithoutJuncNode(e,t,n,o)}}),this)}},{key:"updateEdge",value:function(e,t,n,o){var c=this,i=this.getById(e).source();o&&this.updateData(i.data("id"),"edgeLabel",n),this.updateData(i.data("id"),"edgeStyle",t),this.updateNode([i.data("id")],{"background-color":t["line-color"]},"",!1),i.outgoers("edge").forEach((function(e){return Object(C.a)(Object(S.a)(a.prototype),"updateEdge",c).call(c,e.data("id"),t,n,o)}))}},{key:"deleteElem",value:function(e){var t=this,n=this.getById(e);if(n.isNode())n.outgoers().forEach((function(e){return Object(C.a)(Object(S.a)(a.prototype),"deleteElem",t).call(t,e.id())})),n.connectedEdges().forEach((function(e){return t.deleteElem(e.id())})),Object(C.a)(Object(S.a)(a.prototype),"deleteNode",this).call(this,e);else{var o=n.source();Object(C.a)(Object(S.a)(a.prototype),"deleteEdge",this).call(this,e),0===o.outgoers().length&&this.deleteNode(o.id())}}},{key:"getRealSourceId",value:function(e){return this.getById(e).incomers("node")[0].id()}}]),a}(function(){function e(){Object(d.a)(this,e)}return Object(s.a)(e,[{key:"getById",value:function(e){return this.cy.getElementById(e)}},{key:"addTestData",value:function(){return this}},{key:"setCy",value:function(e){var t=this;this.cy=e,this.autoSaveIntervalId=null,window.cyx=e;var a=function(){var e,a=t.cy.$(":selected");if(0===a.length)return t.dispatcher({type:M.ELE_UNSELECTED});e=a.every((function(e){return e.isNode()}))?"NODE":a.every((function(e){return e.isEdge()}))?"EDGE":"MIX";var n=a.map((function(e){return e.data("id")}));return t.dispatcher({type:M.ELE_SELECTED,payload:{ids:n,type:e}})};this.cy.on("select",a),this.cy.on("unselect",a),this.cy.on("zoom",(function(e){t.dispatcher({type:M.SET_ZOOM,payload:Math.round(100*e.target.zoom())})})),this.cy.on("nodeediting.resizeend",(function(e,t,a){a.scratch("automove")&&a.scratch("automove").forEach((function(e){e.apply()}))})),this.cy.on("position",this.saveLocalStorage.bind(this))}},{key:"setDispatcher",value:function(e){this.dispatcher=e}},{key:"getPos",value:function(){for(var e={x:100,y:100},t=!0;t;){t=!1;for(var a=this.cy.$("node"),n=0;n<a.length;n+=1){var o=a[n].position();t=t||o.x===e.x&&o.y===e.y}t&&(e.x+=10,e.y+=10)}return e}},{key:"addNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ordin",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.getPos(),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.saveLocalStorage(),this.cy.add({group:"nodes",data:Object(r.a)({label:e,type:a},o),style:t,position:n})}},{key:"addEdge",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ordin";return this.saveLocalStorage(),this.cy.add({group:"edges",data:{source:e,target:t,label:a,type:o},style:n})}},{key:"getStyle",value:function(e){var t=this.getById(e),a=t.style(),n={};return t.isNode&&Object.entries(m).forEach((function(e){n[e[0]]=a[e[0]]})),t.isEdge&&Object.entries(E).forEach((function(e){n[e[0]]=a[e[0]]})),n}},{key:"getLabel",value:function(e){return this.getById(e).data("label")||this.getById(e).data("label")}},{key:"updateNode",value:function(e,t,a,n){this.saveLocalStorage(),n&&this.getById(e).data("label",a),this.getById(e).style(t)}},{key:"updateEdge",value:function(e,t,a,n){this.saveLocalStorage(),n&&this.getById(e).data("label",a),this.getById(e).style(t)}},{key:"updateData",value:function(e,t,a){return this.saveLocalStorage(),this.getById(e).data(t,a),this}},{key:"modifyNewEdge",value:function(){return this}},{key:"enableDraw",value:function(e){return e?window.cye.enable():window.cye.disable(),this}},{key:"deleteNode",value:function(e){var t=this,a=this.getById(e);a.connectedEdges().forEach((function(e){return t.deleteEdge(e.id())})),a.remove()}},{key:"deleteEdge",value:function(e){this.getById(e).remove()}},{key:"deleteElem",value:function(e){return this.saveLocalStorage(),this.getById(e).isNode()?this.deleteNode(e):this.deleteEdge(e)}},{key:"resetZoom",value:function(){this.cy.reset()}},{key:"fitZoom",value:function(){this.cy.fit()}},{key:"setZoom",value:function(e){this.cy.zoom(e/100)}},{key:"downloadImg",value:function(e){"PNG"===e&&Object(k.saveAs)(this.cy.png(),"graph.png"),"JPG"===e&&Object(k.saveAs)(this.cy.jpg(),"graph.jpg")}},{key:"shouldNodeBeSaved",value:function(e){return"ordin"===this.getById(e).data("type")}},{key:"shouldEdgeBeSaved",value:function(e){return"ordin"===this.getById(e).data("type")}},{key:"jsonifyGraph",value:function(){var e=this,t={nodes:[],edges:[]};return this.cy.nodes().forEach((function(a){if(e.shouldNodeBeSaved(a.id())){var n=a.json();n.style=e.getStyle(a.id()),t.nodes.push(n)}})),this.cy.edges().forEach((function(a){if(e.shouldEdgeBeSaved(a.id())){var n=a.json();n.style=e.getStyle(a.id()),n.data.source=e.getRealSourceId(a.source().id()),t.edges.push(n)}})),t}},{key:"saveToDisk",value:function(){var e=JSON.stringify(this.jsonifyGraph()),t=(new TextEncoder).encode(e),a=new Blob([t],{type:"application/json;charset=utf-8"});Object(k.saveAs)(a,"graph.json")}},{key:"loadJson",value:function(e){var t=this;this.cy.elements().remove(),e.nodes.forEach((function(e){t.addNode(e.data.label,e.style,"ordin",e.position,e.data)})),e.edges.forEach((function(e){t.addEdge(e.data.source,e.data.target,e.data.label,e.style)}))}},{key:"saveLocalStorage",value:function(){var e=this;null!==this.autoSaveTimeoutId&&clearTimeout(this.autoSaveIntervalId),this.autoSaveIntervalId=setTimeout((function(){var t=e.jsonifyGraph(),a=JSON.stringify(t);window.localStorage.setItem("serializedGraph",a),console.log("Saving graph locally")}),1e3)}},{key:"loadGraphFromLocalStorage",value:function(){return null!==window.localStorage.getItem("serializedGraph")&&(this.loadJson(JSON.parse(window.localStorage.getItem("serializedGraph"))),!0)}}],[{key:"getRealSourceId",value:function(e){return e}}]),e}())),Z=a(134),F=a(83),q=(a(278),a(279),N.minZoom),H=N.maxZoom,V={},X=function(e){var t=e.dispatcher,a=e.superState;return Object(_.jsx)("div",{children:Object(_.jsxs)("div",{className:"zoom-comp",children:[Object(_.jsx)("div",{role:"button",tabIndex:0,className:"zoom-box zoom-btn",onClick:function(){return U.resetZoom()},onKeyDown:function(e){return 13===e.key&&U.resetZoom()},children:Object(_.jsx)(F.b,{})}),Object(_.jsx)("div",{role:"button",tabIndex:0,className:"zoom-box zoom-btn",onClick:function(){return U.fitZoom()},onKeyDown:function(e){return 13===e.key&&U.resetZoom()},children:Object(_.jsx)(F.a,{})}),Object(_.jsxs)("div",{className:"zoom-box zoom-value",children:[a.zoomValue,"%"]}),Object(_.jsx)("div",{className:"slider",children:Object(_.jsx)(Z.a,{min:100*q,max:100*H,marks:V,onChange:function(e){U.setZoom(e),t({type:M.SET_ZOOM,payload:e})},included:!1,value:a.zoomValue})})]})})},K=a(130),$=a.n(K),Y=a(131),Q=a.n(Y),ee=a(132),te=a.n(ee),ae=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).graphContainerRef=o.a.createRef(),e.graphRef=o.a.createRef(),e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){"function"!==typeof y()("core","edgehandles")&&y.a.use(j.a),"function"!==typeof y()("core","nodeEditing")&&Q()(y.a,te.a,$.a),"function"!==typeof y()("core","gridGuide")&&x()(y.a),"function"!==typeof y()("core","automove")&&y.a.use(f.a),this.graphRef.current.style.width=this.graphContainerRef.current.offsetWidth+"px",this.graphRef.current.style.height=this.graphContainerRef.current.offsetHeight+"px",this.cy=y()(Object(r.a)(Object(r.a)({},N),{},{container:this.graphRef.current})),this.cy.nodeEditing({resizeToContentCueEnabled:function(){return!1},setWidth:function(e,t){"special"!=e.data("type")&&e.css("width",t)},setHeight:function(e,t){"special"!=e.data("type")&&e.css("height",t)},isNoResizeMode:function(e){return"special"===e.data("type")},isNoControlsMode:function(e){return"special"===e.data("type")}}),this.cy.gridGuide({snapToGridOnRelease:!1});var e=this.props.dispatcher;U.setCy(this.cy),U.setDispatcher(e),window.cye=this.cy.edgehandles({preview:!1,handlePosition:function(){return"none"},complete:function(e,t,a){a.remove(),U.addEdge(e.id(),t.id())}}),U.loadGraphFromLocalStorage()||U.addTestData(),window.xxx=U}},{key:"render",value:function(){var e=this.props,t=e.dispatcher,a=e.superState;return Object(_.jsxs)("div",{className:"graph-container",style:{flex:1},ref:this.graphContainerRef,children:[Object(_.jsx)("div",{style:{zIndex:1},id:"cy",ref:this.graphRef}),Object(_.jsx)(X,{dispatcher:t,superState:a})]})}}]),a}(o.a.Component),ne=a(84),oe=a.n(ne);a(326);oe.a.setAppElement("#root");var ce=function(e){var t=e.closeModal,a=e.superState,o=Object(n.useState)(""),c=Object(l.a)(o,2),i=c[0],r=c[1],d=Object(n.useState)({}),s=Object(l.a)(d,2),u=s[0],h=s[1],b=a.modalPayload,y=a.ModelOpen,p=b.cb,j=b.title,g=b.submitText,f=b.Children,v=b.defaultStyle,x=b.defaultLabel,O=b.labelAllowed;Object(n.useEffect)((function(){h({label:x||"",style:v}),!0===y&&(r("closing"),setTimeout((function(){r("")}),20))}),[y]);var m=function(){r("closing"),setTimeout((function(){t()}),400)};return Object(_.jsx)(oe.a,{isOpen:y,contentLabel:"onRequestClose Example",onRequestClose:m,className:"Modal",overlayClassName:"Overlay ".concat(i),children:Object(_.jsx)("form",{onSubmit:function(e){e.preventDefault(),p(u.label,u.style),m()},children:Object(_.jsxs)("div",{className:"modal-content ".concat(i),children:[Object(_.jsxs)("div",{className:"modal-header",children:[Object(_.jsx)("div",{className:"modal-title h4",children:j}),Object(_.jsxs)("button",{type:"button",className:"close",onClick:m,children:[Object(_.jsx)("span",{"aria-hidden":"true",children:"\xd7"}),Object(_.jsx)("span",{className:"sr-only",children:"Close"})]})]}),Object(_.jsx)("div",{className:"modal-content-body",children:Object(_.jsx)(f,{data:u,setData:h,labelAllowed:O})}),Object(_.jsx)("div",{className:"modal-footer",children:Object(_.jsx)("button",{type:"submit",className:"btn btn-primary",children:g})})]})})})},ie=a(135),le=(a(327),a(40)),re=a(26),de=function(e,t){t({type:M.Model_Open_Create_Node,cb:function(e,t){U.addNode(e,t)}})},se=function(e,t){var a=1===e.eleSelectedPayload.ids.length;"NODE"===e.eleSelectedPayload.type&&t({type:M.Model_Open_Update_Node,cb:function(t,n){return e.eleSelectedPayload.ids.forEach((function(e){return U.updateNode(e,n,t,a)}))},labelAllowed:a,label:U.getLabel(e.eleSelectedPayload.ids[0]),style:U.getStyle(e.eleSelectedPayload.ids[0])}),"EDGE"===e.eleSelectedPayload.type&&t({type:M.Model_Open_Update_Edge,cb:function(t,n){return e.eleSelectedPayload.ids.forEach((function(e){return U.updateEdge(e,n,t,a)}))},labelAllowed:a,label:U.getLabel(e.eleSelectedPayload.ids[0]),style:U.getStyle(e.eleSelectedPayload.ids[0])})},ue=function(e,t){U.enableDraw(!e.drawModeOn),t({type:M.TURN_DRAW,payload:!e.drawModeOn})},he=function(e){e.eleSelectedPayload.ids.forEach((function(e){return U.deleteElem(e)}))},be=function(e,t,a){U.downloadImg(a)},ye=function(){U.saveToDisk()},pe=function(e){if(e.target&&e.target.files&&e.target.files[0]){var t=new FileReader;t.onload=function(e){U.loadJson(JSON.parse(e.target.result))},t.readAsText(e.target.files[0])}},je=function(e){return alert(e)},ge=function(e){return[{type:"action",text:"Node",icon:re.d,action:de,active:!0},{type:"vsep"},{type:"file-upload",text:"Open",icon:re.c,action:pe,active:!0},{type:"action",text:"Save",icon:re.f,action:ye,active:!0},{type:"vsep"},{type:"action",text:"Undo",icon:re.h,action:je,active:!1},{type:"action",text:"Redo",icon:re.e,action:je,active:!1},{type:"vsep"},{type:"action",text:"Edit",icon:re.b,action:se,active:e.eleSelected&&"MIX"!==e.eleSelectedPayload.type},{type:"action",text:"Delete",icon:re.g,action:he,active:e.eleSelected},{type:"vsep"},{type:"switch",text:"Draw",action:ue,active:e.drawModeOn},{type:"space"},{type:"menu",text:"Download",icon:re.a,action:be,active:!0},{type:"vsep"}]};a(328),a(329);function fe(e){var t=e.Icon,a=e.text,n=e.action,o=e.active,c=e.tabIndex;return Object(_.jsxs)(le.a,{menuButton:Object(_.jsx)(le.b,{children:Object(_.jsx)(Oe,{Icon:t,text:a,action:n,active:o,tabIndex:c})}),children:[Object(_.jsx)(le.c,{onClick:function(){return n("JPG")},children:"JPG"}),Object(_.jsx)(le.c,{onClick:function(){return n("PNG")},children:"PNG"})]})}var ve=function(e){var t=e.Icon,a=e.text,n=e.action,c=e.active,i=e.tabIndex,l=o.a.createRef();return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("input",{type:"file",ref:l,style:{display:"none"},onChange:n}),Object(_.jsx)(Oe,{Icon:t,text:a,active:c,tabIndex:i,action:function(){return l.current.click()}})]})},xe=function(e){var t=e.text,a=e.action,n=e.active,o=e.tabIndex;return Object(_.jsxs)("div",{role:"button",tabIndex:o,className:"tool ".concat(n?"active":""),onClick:a,onKeyDown:function(e){return 13===e.key&&a()},children:[Object(_.jsx)(ie.a,{onChange:a,checked:n,className:"react-switch"}),Object(_.jsx)("div",{children:t})]})},Oe=function(e){var t=e.Icon,a=e.text,n=e.action,o=e.active,c=e.tabIndex;return Object(_.jsxs)("div",{role:"button",tabIndex:c,className:"tool ".concat(o?"active":""),onClick:function(){return o&&n()},onKeyDown:function(e){return 13===e.key&&n()},children:[Object(_.jsx)("div",{className:"icon",children:Object(_.jsx)(t,{size:"25"})}),Object(_.jsx)("div",{style:{fontSize:16},children:a})]})},me=function(){return Object(_.jsx)("div",{className:"Vsep sep"})},Ee=function(){return Object(_.jsx)("div",{className:"hsep sep"})},we=function(){return Object(_.jsx)("div",{className:"space"})},Ne=function(e){var t=e.title,a=e.state,n=e.dispatcher;return Object(_.jsxs)("header",{className:"header",children:[Object(_.jsx)("section",{className:"middle titlebar",children:"".concat(t," - DHGWorkflow Editor")}),Object(_.jsxs)("section",{className:"toolbar",children:[ge(a,n).map((function(e,t){return"vsep"===e.type?Object(_.jsx)(me,{},"".concat("v".concat(t))):"space"===e.type?Object(_.jsx)(we,{},"".concat("s".concat(t))):"switch"===e.type?Object(_.jsx)(xe,{text:e.text,active:e.active,action:function(){return e.action(a,n)},tabIndex:t+1},e.text):"menu"===e.type?Object(_.jsx)(fe,{Icon:e.icon,text:e.text,active:e.active,action:function(t){return e.action(a,n,t)},tabIndex:t+1},e.text):"file-upload"===e.type?Object(_.jsx)(ve,{Icon:e.icon,text:e.text,active:e.active,action:function(t){return e.action(t,a,n)},tabIndex:t+1},e.text):Object(_.jsx)(Oe,{Icon:e.icon,text:e.text,active:e.active,action:function(){return e.action(a,n)},tabIndex:t+1},e.text)})),Object(_.jsx)("input",{type:"file",id:"fileUploader",style:{display:"none"},accept:".jpg, .jpeg, .png"})]}),Object(_.jsx)(Ee,{})]})},Ce=function(){var e=Object(n.useReducer)(G,W),t=Object(l.a)(e,2),a=t[0],o=t[1];return Object(_.jsxs)("div",{className:"container",children:[a.ModelOpen?Object(_.jsx)(ce,{closeModal:function(){return o({type:M.Model_Close})},superState:a}):"",Object(_.jsx)(Ne,{title:"MyGraph",state:a,dispatcher:o}),Object(_.jsx)("section",{className:"body",style:{display:"flex"},children:Object(_.jsx)(ae,{dispatcher:o,superState:a})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,332)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),o(e),c(e),i(e)}))};i.a.render(Object(_.jsx)(o.a.StrictMode,{children:Object(_.jsx)(Ce,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),Se()}},[[330,1,2]]]);
//# sourceMappingURL=main.353a11a6.chunk.js.map