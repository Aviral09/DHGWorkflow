(this["webpackJsonpdhg-workflow"]=this["webpackJsonpdhg-workflow"]||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){},116:function(e,t,n){},226:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},238:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(56),i=n.n(o),r=(n(102),n(10)),l=(n(103),n(5)),s=n(17),d=n(18),u=n(35),b=n(34),h=n(19),j=n.n(h),p=n(89),y=n.n(p),x=n(90),O=n.n(x),g=n(97),v=[{selector:'node[type = "ordin"]',style:{width:100,height:50,shape:"rectangle",content:"data(name)","background-color":"#fff","border-color":"#000","border-width":3,"text-valign":"center","text-halign":"center"}},{selector:"edge",style:{"curve-style":"bezier","target-arrow-shape":"triangle","border-color":"#000","background-color":"#fff",width:4,"line-color":"#000","target-arrow-color":"#000"}},{selector:"edge[label]",style:{label:"data(label)",width:3,"edge-text-rotation":"autorotate","text-margin-y":"10px"}},{selector:".eh-handle",style:{"background-color":"#f00",height:20,width:20,opacity:.5}},{selector:'node[type="special"]',style:{width:10,height:10,backgroundColor:"red"}}],m={style:Object(g.a)(v),zoomingEnabled:!0,userZoomingEnabled:!0},f=function(){function e(){Object(s.a)(this,e)}return Object(d.a)(e,[{key:"setCy",value:function(e){this.cy=e,window.cyx=e}},{key:"setDispatcher",value:function(e){this.dispatcher=e}},{key:"addNode",value:function(e,t,n,a,c,o){var i=c||(new Date).getTime();this.cy.add({group:"nodes",data:Object(l.a)({id:i,name:e,type:n},o),style:t,position:a})}},{key:"addEdge",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.cy.add({group:"edges",data:{source:e,target:t,label:n},style:a})}},{key:"modifyNewEdge",value:function(){return this}}]),e}(),w=n(111)({Model_Open_Create_Node:"OpenModal_CreateNode",Model_Open_Create_Edge:"OpenModal_CreateEdge",Model_Open_Update_Edge:"OpenModal_UpdateEdge",Model_Open_Update_Node:"OpenModal_UpdateNode",Model_Close:"CloseModal",$$typeof:""}),C=(n(116),n(96)),N=n(4),M=function(e){var t=e.color,n=e.setColor,a=c.a.useState(!1),o=Object(r.a)(a,2),i=o[0],l=o[1];return Object(N.jsxs)("div",{role:"button",tabIndex:0,className:"color-box-par",onClick:function(){return!i&&l(!0)},onKeyDown:function(e){return 13===e.key&&!i&&l(!0)},children:[Object(N.jsx)("div",{className:"color-box",style:{background:t}}),Object(N.jsxs)("div",{className:"color-picker",style:{display:i?"block":"none"},children:[Object(N.jsx)("div",{role:"button",className:"overlay",onClick:function(){return l(!1)}}),Object(N.jsx)(C.a,{color:t,onChangeComplete:function(e){return n(e.hex)}})]})]})},k={height:"100px",minHeight:"100px",width:"auto",background:"aliceblue",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"},_={border:"1px solid black",width:"100px",height:"50px",backgroundColor:"#888",display:"inline-flex",justifyContent:"center",alignItems:"center",whiteSpace:"nowrap"},E=function(e){var t=e.data,n=e.setData,a=e.submit,c=Object(l.a)(Object(l.a)({},_),{},{backgroundColor:t.style["background-color"],borderColor:t.style["border-color"],borderWidth:t.style["border-width"],textValign:t.style["text-valign"],textHalign:t.style["text-halign"],width:t.style.width,height:t.style.height,opacity:t.style.opacity}),o=Object(l.a)(Object(l.a)({},k),{},{height:t.style.height}),i=function(e){n(Object(l.a)(Object(l.a)({},t),{},{style:Object(l.a)(Object(l.a)({},t.style),e)}))};return Object(N.jsxs)("div",{className:"nodeform",onSubmit:a,children:[Object(N.jsx)("div",{style:o,children:Object(N.jsx)("div",{style:c,children:t.name})}),Object(N.jsxs)("div",{className:"form",style:{padding:20},children:[Object(N.jsx)("div",{children:" Label"}),Object(N.jsx)("input",{type:"text",required:!0,name:"Node Name",value:t.name,placeholder:"Enter Node Name",onChange:function(e){return n(Object(l.a)(Object(l.a)({},t),{},{name:"".concat(e.target.value)}))}}),Object(N.jsx)("div",{children:" Width"}),Object(N.jsx)("input",{type:"number",value:t.style.width.slice(0,-2),onChange:function(e){return i(Object(l.a)(Object(l.a)({},t.style),{},{width:"".concat(Math.min(500,e.target.value),"px")}))}}),Object(N.jsx)("div",{children:" Height"}),Object(N.jsx)("input",{type:"number",value:t.style.height.slice(0,-2),onChange:function(e){return i(Object(l.a)(Object(l.a)({},t.style),{},{height:"".concat(Math.min(200,e.target.value),"px")}))}}),Object(N.jsx)("div",{children:" Background Color"}),Object(N.jsx)(M,{color:t.style["background-color"],setColor:function(e){return i(Object(l.a)(Object(l.a)({},t.style),{},{"background-color":e}))}}),Object(N.jsx)("div",{children:" Border Color"}),Object(N.jsx)(M,{color:t.style["border-color"],setColor:function(e){return i(Object(l.a)(Object(l.a)({},t.style),{},{"border-color":e}))}}),Object(N.jsx)("div",{children:" Border Width"}),Object(N.jsx)("input",{type:"number",value:t.style["border-width"].slice(0,-2),onChange:function(e){return i(Object(l.a)(Object(l.a)({},t.style),{},{"border-width":"".concat(Math.min(30,e.target.value),"px")}))}}),Object(N.jsx)("div",{children:" Opacity"}),Object(N.jsx)("input",{type:"number",step:".01",value:t.style.opacity,onChange:function(e){return i(Object(l.a)(Object(l.a)({},t.style),{},{opacity:Math.min(1,Math.max(0,e.target.value))}))}})]})]})},S=(n(226),{height:"100px",minHeight:"100px",width:"auto",background:"aliceblue",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"}),D={border:"none",width:"240px",height:"2px",backgroundColor:"#000",display:"inline-block"},I=function(e){var t=e.size,n=e.color,a=5*parseInt(t,10),c={borderLeft:"".concat(.8666*a,"px solid ").concat(n),borderBottom:"".concat(a/2,"px solid transparent"),borderTop:"".concat(a/2,"px solid transparent"),marginLeft:-1};return Object(N.jsx)("div",{style:c})},T=function(e){var t=e.data,n=e.setData,a=e.submit,c=Object(l.a)(Object(l.a)({},D),{},{backgroundColor:t.style["line-color"],height:t.style.width}),o=Object(l.a)(Object(l.a)({},S),{},{height:t.style.height}),i=function(e){n(Object(l.a)(Object(l.a)({},t),{},{style:Object(l.a)(Object(l.a)({},t.style),e)}))};return Object(N.jsxs)("div",{className:"edgeform",onSubmit:a,children:[Object(N.jsxs)("div",{style:o,children:[Object(N.jsx)("div",{style:c}),Object(N.jsx)(I,{size:t.style.width.slice(0,-2),color:t.style["line-color"]}),Object(N.jsx)("div",{className:"label",children:t.name})]}),Object(N.jsxs)("div",{className:"form",style:{padding:20},children:[Object(N.jsx)("div",{children:" Label"}),Object(N.jsx)("input",{type:"text",required:!0,name:"Edge Name",value:t.name,placeholder:"Enter Edge Name",onChange:function(e){return n(Object(l.a)(Object(l.a)({},t),{},{name:"".concat(e.target.value)}))}}),Object(N.jsx)("div",{children:" Width"}),Object(N.jsx)("input",{type:"number",value:t.style.width.slice(0,-2),onChange:function(e){return i({width:"".concat(Math.max(0,Math.min(20,e.target.value)),"px")})}}),Object(N.jsx)("div",{children:" Background Color"}),Object(N.jsx)(M,{color:t.style["line-color"],setColor:function(e){return i({"line-color":e,"target-arrow-color":e})}})]})]})},B={width:"100px",height:"50px",shape:"rectangle",opacity:1,"background-color":"#fff","border-color":"#000","border-width":"3px","text-valign":"center","text-halign":"center"},P={"target-arrow-shape":"triangle",width:"4px","line-color":"#000","target-arrow-color":"#000"},W=function(e,t){switch(t.type){case w.Model_Open_Create_Node:return Object(l.a)(Object(l.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Create Node",submitText:"Create Node",Children:E,defaultStyle:B,cb:t.cb}});case w.Model_Open_Create_Edge:return Object(l.a)(Object(l.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Create Edge",submitText:"Create Edge",Children:T,defaultStyle:P,cb:t.cb}});case w.Model_Close:return Object(l.a)(Object(l.a)({},e),{},{ModelOpen:!1});default:return e}},L={ModelOpen:!1},R=new(function(e){Object(u.a)(n,e);var t=Object(b.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"addTestData",value:function(){return this.addNode("A",{},"ordin",{x:100,y:100},1),this.addNode("B",{},"ordin",{x:500,y:100},2),this}},{key:"getRealNode",value:function(e){return this.cy.$("#".concat(e)).incomers().filter("node")[0]}},{key:"addAutoMove",value:function(e,t){this.cy.automove({nodesMatching:e,reposition:"drag",dragWith:t}),this.cy.automove({nodesMatching:e,reposition:function(e){var n=e.position(),a=t.position(),c=[t.height(),t.width()],o=c[0],i=c[1],l={y:a.y+o/2,x:a.x+i/2},s={y:a.y-o/2,x:a.x-i/2};if(n.x=Math.min(l.x,Math.max(n.x,s.x)),n.y=Math.min(l.y,Math.max(n.y,s.y)),n.x<l.x&&n.y<l.y&&n.x>s.x&&n.y>s.y){var d=[[Math.abs(n.x-l.x),"X",l.x],[Math.abs(n.x-s.x),"X",s.x],[Math.abs(n.y-l.y),"Y",l.y],[Math.abs(n.y-s.y),"Y",s.y]];if(d.sort((function(e,t){return e[0]-t[0]})),"X"===d[0][1]){var u=Object(r.a)(d[0],3);n.x=u[2]}if("Y"===d[0][1]){var b=Object(r.a)(d[0],3);n.y=b[2]}}return n},when:"matching"})}},{key:"modifyNewEdge",value:function(e,t,n){var a=this,c=n.sourceEndpoint(),o=t.data("id"),i=e.data("id");if("special"!==e.data("type")){var r=(new Date).getTime();this.dispatcher({type:w.Model_Open_Create_Edge,cb:function(e,t){a.addNode("",{"background-color":t["line-color"]},"special",c,r,{edgeName:e,edgeStyle:t}),a.addEdge(i,r,e,Object(l.a)(Object(l.a)({},t),{},{"target-arrow-shape":"none"})),a.addAutoMove(a.cy.$("#".concat(r)),a.cy.$("#".concat(i))),i=r,a.getRealNode(r),n.remove(),a.addEdge(i,o,e,t)}})}else{var s=e.data("edgeName"),d=e.data("edgeStyle");n.remove(),this.addEdge(i,o,s,d)}}}]),n}(f)),$=function(e){Object(u.a)(n,e);var t=Object(b.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){"function"!==typeof j()("core","edgehandles")&&j.a.use(y.a),"function"!==typeof j()("core","automove")&&j.a.use(O.a),this.cy=j()(Object(l.a)(Object(l.a)({},m),{},{container:document.getElementById("cy")}));var e=this.props.dispatcher;R.setCy(this.cy),R.setDispatcher(e),window.cye=this.cy.edgehandles({preview:!1,handlePosition:function(){return"none"},complete:function(e,t,n){return R.modifyNewEdge(e,t,n)}}),R.addTestData()}},{key:"render",value:function(){return Object(N.jsx)("div",{style:{height:"100%",width:"100%"},id:"cy"})}}]),n}(c.a.Component),z=n(58),H=n.n(z);n(236);H.a.setAppElement("#root");var U=function(e){var t=e.closeModal,n=e.superState,c=Object(a.useState)(""),o=Object(r.a)(c,2),i=o[0],l=o[1],s=Object(a.useState)({}),d=Object(r.a)(s,2),u=d[0],b=d[1],h=n.modalPayload,j=n.ModelOpen,p=h.cb,y=h.title,x=h.submitText,O=h.Children,g=h.defaultStyle;Object(a.useEffect)((function(){b({name:"",style:g}),!0===j&&(l("closing"),setTimeout((function(){l("")}),20))}),[j]);var v=function(){l("closing"),setTimeout((function(){t()}),400)};return Object(N.jsx)(H.a,{isOpen:j,contentLabel:"onRequestClose Example",onRequestClose:v,className:"Modal",overlayClassName:"Overlay ".concat(i),children:Object(N.jsx)("form",{onSubmit:function(e){e.preventDefault(),p(u.name,u.style),v()},children:Object(N.jsxs)("div",{className:"modal-content ".concat(i),children:[Object(N.jsxs)("div",{className:"modal-header",children:[Object(N.jsx)("div",{className:"modal-title h4",children:y}),Object(N.jsxs)("button",{type:"button",className:"close",onClick:v,children:[Object(N.jsx)("span",{"aria-hidden":"true",children:"\xd7"}),Object(N.jsx)("span",{className:"sr-only",children:"Close"})]})]}),Object(N.jsx)("div",{className:"modal-content-body",children:Object(N.jsx)(O,{data:u,setData:b})}),Object(N.jsx)("div",{className:"modal-footer",children:Object(N.jsx)("button",{type:"submit",className:"btn btn-primary",children:x})})]})})})},q=(n(237),n(95)),A=n(59),F=n(8),G=function(e,t){t({type:w.Model_Open_Create_Node,cb:function(e,t){R.addNode(e,t,"ordin",{x:100,y:100})}})},J=function(e){return alert(e)},X=function(){return[{type:"action",text:"Node",icon:F.e,action:G,active:!0},{type:"vsep"},{type:"action",text:"Edit",icon:F.b,action:J,active:!0},{type:"action",text:"Open",icon:F.d,action:J,active:!0},{type:"action",text:"Save",icon:F.g,action:J,active:!0},{type:"vsep"},{type:"action",text:"Undo",icon:F.i,action:J,active:!0},{type:"action",text:"Redo",icon:F.f,action:J,active:!0},{type:"vsep"},{type:"action",text:"Delete",icon:F.h,action:J,active:!0},{type:"vsep"},{type:"action",text:"In",icon:A.b,action:J,active:!0},{type:"action",text:"Out",icon:A.a,action:J,active:!0},{type:"action",text:"Reset",icon:q.a,action:J,active:!0},{type:"space"},{type:"action",text:"JPG",icon:F.a,action:J,active:!0},{type:"action",text:"PNG",icon:F.a,action:J,active:!0},{type:"vsep"},{type:"action",text:"Export",icon:F.c,action:J,active:!0}]},Y=function(e){var t=e.Icon,n=e.text,a=e.action,c=e.active,o=e.tabIndex;return Object(N.jsxs)("div",{role:"button",tabIndex:o,className:"tool ".concat(c?"active":""),onClick:a,onKeyDown:function(e){return 13===e.key&&a()},children:[Object(N.jsx)("div",{className:"icon",children:Object(N.jsx)(t,{size:"25"})}),Object(N.jsx)("div",{children:n})]})},K=function(){return Object(N.jsx)("div",{className:"Vsep sep"})},V=function(){return Object(N.jsx)("div",{className:"hsep sep"})},Z=function(){return Object(N.jsx)("div",{className:"space"})},Q=function(e){var t=e.title,n=e.state,a=e.dispatcher;return Object(N.jsxs)("header",{className:"header",children:[Object(N.jsx)("section",{className:"middle titlebar",children:"".concat(t," - DHGWorkflow Editor")}),Object(N.jsx)("section",{className:"toolbar",children:X(n,a).map((function(e,t){return"vsep"===e.type?Object(N.jsx)(K,{},"".concat("v".concat(t))):"space"===e.type?Object(N.jsx)(Z,{},"".concat("s".concat(t))):Object(N.jsx)(Y,{Icon:e.icon,text:e.text,active:e.active,action:function(){return e.action(n,a)},tabIndex:t+1},e.text)}))}),Object(N.jsx)(V,{})]})},ee=function(){var e=Object(a.useReducer)(W,L),t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(N.jsxs)("div",{children:[n.ModelOpen?Object(N.jsx)(U,{closeModal:function(){return c({type:w.Model_Close})},superState:n}):"",Object(N.jsx)(Q,{title:"MyGraph",state:n,dispatcher:c}),Object(N.jsx)("section",{className:"body",children:Object(N.jsx)("div",{className:"graph-container",children:Object(N.jsx)($,{dispatcher:c})})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,240)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))};i.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(ee,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),te()}},[[238,1,2]]]);
//# sourceMappingURL=main.335f3739.chunk.js.map