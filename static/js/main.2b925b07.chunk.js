(this["webpackJsonpdhg-workflow"]=this["webpackJsonpdhg-workflow"]||[]).push([[0],{142:function(e,t,a){},143:function(e,t,a){},204:function(e,t,a){},314:function(e,t,a){},318:function(e,t,a){},319:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){},331:function(e,t,a){},334:function(e,t,a){},335:function(e,t,a){},336:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),o=a(20),i=a.n(o),r=(a(142),a(7)),l=(a(143),a(4)),s=a(34),d=a.n(s),u=a(124),h=a.n(u),p=a(125),b=a.n(p),j=a(126),y=a.n(j),f=a(127),g=a.n(f),O=a(128),v=a.n(O),m=a(33),x={width:"100px",height:"50px",shape:"rectangle",opacity:1,"background-color":"#e0f2f1","border-color":"#000","border-width":"1px","text-valign":"center","text-halign":"center"},E={"target-arrow-shape":"triangle",width:"1px","line-color":"#000","target-arrow-color":"#000"},N=[{selector:'node[type = "ordin"]',style:Object(l.a)(Object(l.a)({content:"data(label)"},x),{},{"z-index":100})},{selector:"edge",style:Object(l.a)({"curve-style":"bezier"},E)},{selector:"edge[label]",style:{label:"data(label)",width:3,"edge-text-rotation":"autorotate","z-index":999,"text-background-opacity":1,color:"#000","text-background-color":"#fff","text-background-shape":"roundrectangle","text-border-color":"#fff","text-border-width":2,"text-border-opacity":1}},{selector:".eh-handle",style:{"background-color":"#f00",height:20,width:20,opacity:.5}},{selector:'node[type="special"]',style:{width:8,height:8,backgroundColor:"red","z-index":1e3}},{selector:":selected",style:{"overlay-color":"#000","overlay-opacity":.1}}],w={style:Object(m.a)(N),zoomingEnabled:!0,userZoomingEnabled:!0,minZoom:.25,maxZoom:5},S=a(23),D=a(24),A=a(19),I=a(14),k=a(26),_=a(25),C=a(199)({$$typeof:"",Model_Open_Create_Node:"OpenModal_CreateNode",Model_Open_Create_Edge:"OpenModal_CreateEdge",Model_Open_Update_Edge:"OpenModal_UpdateEdge",Model_Open_Update_Node:"OpenModal_UpdateNode",Model_Close:"CloseModal",ELE_UNSELECTED:"ELE_UNSELECTED",ELE_SELECTED:"ELE_SELECTED",TURN_DRAW:"TURN_DRAW",SET_ZOOM:"SET_ZOOM",SET_PROJECT_DETAILS:"SET_PROJECT_DETAILS",SET_UNDO:"SET_UNDO",SET_REDO:"SET_REDO",ADD_GRAPH_INSTANCE:"ADD_GRAPH_INSTANCE",ADD_GRAPH:"ADD_GRAPH",CHANGE_TAB:"CHANGE_TAB",REMOVE_GRAPH:"REMOVE_GRAPH",NEW_GRAPH:"NEW_GRAPH"}),T=(a(204),a(135)),M=a(3),G=function(e){var t=e.color,a=e.setColor,n=c.a.useState(!1),o=Object(r.a)(n,2),i=o[0],l=o[1];return Object(M.jsxs)("div",{role:"button",tabIndex:0,className:"color-box-par",onClick:function(){return!i&&l(!0)},onKeyDown:function(e){return" "===e.key&&!i&&l(!0)},children:[Object(M.jsx)("div",{className:"color-box",style:{background:t}}),Object(M.jsxs)("div",{className:"color-picker",style:{display:i?"block":"none"},children:[Object(M.jsx)("div",{role:"button",className:"overlay",onClick:function(){return l(!1)}}),Object(M.jsx)(T.a,{color:t,onChangeComplete:function(e){return a(e.hex)}})]})]})},P={height:"100px",minHeight:"100px",width:"auto",background:"aliceblue",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"},B={border:"1px solid black",width:"100px",height:"50px",backgroundColor:"#888",display:"inline-flex",justifyContent:"center",alignItems:"center",whiteSpace:"nowrap"},L=function(e){var t=e.data,a=e.setData,c=e.submit,o=e.labelAllowed,i=Object(n.useCallback)((function(e){return e&&e.focus()}),[]),r=Object(l.a)(Object(l.a)({},B),{},{backgroundColor:t.style["background-color"],borderColor:t.style["border-color"],borderWidth:t.style["border-width"],textValign:t.style["text-valign"],textHalign:t.style["text-halign"],width:t.style.width,height:t.style.height,opacity:t.style.opacity,borderRadius:"ellipse"===t.style.shape?"100%":0}),s=Object(l.a)(Object(l.a)({},P),{},{height:t.style.height}),d=function(e){a(Object(l.a)(Object(l.a)({},t),{},{style:Object(l.a)(Object(l.a)({},t.style),e)}))};return Object(M.jsxs)("div",{className:"nodeform",onSubmit:c,children:[Object(M.jsx)("div",{style:s,children:Object(M.jsx)("div",{style:r,children:o?t.label:""})}),Object(M.jsxs)("div",{className:"form",style:{padding:20},children:[Object(M.jsx)("div",{children:" Shape"}),Object(M.jsx)("div",{children:Object(M.jsxs)("label",{htmlFor:"rectangle",children:[Object(M.jsx)("input",{type:"radio",name:"shape",value:"rectangle",checked:"rectangle"===t.style.shape,onChange:function(){return d({shape:"rectangle"})}}),"Rectangle"]})}),Object(M.jsx)("div",{children:Object(M.jsxs)("label",{htmlFor:"ellipse",children:[Object(M.jsx)("input",{type:"radio",name:"shape",value:"ellipse",checked:"ellipse"===t.style.shape,onChange:function(){return d({shape:"ellipse"})}}),"Ellipse"]})}),Object(M.jsx)("div",{}),o?Object(M.jsx)("div",{children:" Label"}):"",o?Object(M.jsx)("input",{className:"nodeLabel",ref:i,type:"text",required:!0,label:"Node Label",value:t.label,placeholder:"Enter Node Label",onChange:function(e){return a(Object(l.a)(Object(l.a)({},t),{},{label:"".concat(e.target.value)}))}}):"",Object(M.jsx)("div",{children:" Width"}),Object(M.jsx)("input",{type:"number",value:t.style.width.slice(0,-2),onChange:function(e){return d({width:"".concat(Math.min(500,e.target.value),"px")})}}),Object(M.jsx)("div",{children:" Height"}),Object(M.jsx)("input",{type:"number",value:t.style.height.slice(0,-2),onChange:function(e){return d({height:"".concat(Math.min(200,e.target.value),"px")})}}),Object(M.jsx)("div",{children:" Background Color"}),Object(M.jsx)(G,{color:t.style["background-color"],setColor:function(e){return d({"background-color":e})}}),Object(M.jsx)("div",{children:" Border Color"}),Object(M.jsx)(G,{color:t.style["border-color"],setColor:function(e){return d({"border-color":e})}}),Object(M.jsx)("div",{children:" Border Width"}),Object(M.jsx)("input",{type:"number",value:t.style["border-width"].slice(0,-2),onChange:function(e){return d({"border-width":"".concat(Math.min(30,e.target.value),"px")})}}),Object(M.jsx)("div",{children:" Opacity"}),Object(M.jsx)("input",{type:"number",step:".01",value:t.style.opacity,onChange:function(e){return d({opacity:Math.min(1,Math.max(0,e.target.value))})}})]})]})},R=(a(314),{height:"100px",minHeight:"100px",width:"auto",background:"aliceblue",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"}),H={border:"none",width:"240px",height:"2px",backgroundColor:"#000",display:"inline-block"},z=function(e){var t=e.size,a=e.color,n=5*parseInt(t,10),c={borderLeft:"".concat(.8666*n,"px solid ").concat(a),borderBottom:"".concat(n/2,"px solid transparent"),borderTop:"".concat(n/2,"px solid transparent"),marginLeft:-1};return Object(M.jsx)("div",{style:c})},J=function(e){var t=e.data,a=e.setData,c=e.submit,o=e.labelAllowed,i=Object(l.a)(Object(l.a)({},H),{},{backgroundColor:t.style["line-color"],height:t.style.width}),r=Object(l.a)(Object(l.a)({},R),{},{height:t.style.height}),s=function(e){a(Object(l.a)(Object(l.a)({},t),{},{style:Object(l.a)(Object(l.a)({},t.style),e)}))},d=Object(n.useCallback)((function(e){return e&&e.focus()}),[]);return Object(M.jsxs)("div",{className:"edgeform",onSubmit:c,children:[Object(M.jsxs)("div",{style:r,children:[Object(M.jsx)("div",{style:i}),Object(M.jsx)(z,{size:t.style.width.slice(0,-2),color:t.style["line-color"]}),Object(M.jsx)("div",{className:"label",children:t.label})]}),Object(M.jsxs)("div",{className:"form",children:[o?Object(M.jsx)("div",{children:" Label"}):"",o?Object(M.jsx)("input",{ref:d,className:"edgeLabel",type:"text",required:!0,label:"Edge Label",value:t.label,placeholder:"Enter Edge Label",onChange:function(e){return a(Object(l.a)(Object(l.a)({},t),{},{label:"".concat(e.target.value)}))}}):"",Object(M.jsx)("div",{children:" Width"}),Object(M.jsx)("input",{type:"number",value:t.style.width.slice(0,-2),onChange:function(e){return s({width:"".concat(Math.max(0,Math.min(20,e.target.value)),"px")})}}),Object(M.jsx)("div",{children:" Background Color"}),Object(M.jsx)(G,{color:t.style["line-color"],setColor:function(e){return s({"line-color":e,"target-arrow-color":e})}})]})]})},W={ModelOpen:!1,modalPayload:{cb:function(){},title:"",submitText:"",Children:"",defaultStyle:{},defaultLabel:"",labelAllowed:null},eleSelected:!1,drawModeOn:!0,undoEnabled:!1,redoEnabled:!1,graphs:[],curGraphIndex:0},U={projectDetails:{projectName:"",author:"",set:!1},component:null,instance:null},Z=function(e,t){switch(t.type){case C.Model_Open_Create_Node:return Object(l.a)(Object(l.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Create Node",submitText:"Create Node",Children:L,defaultStyle:x,defaultLabel:"",labelAllowed:!0,cb:t.cb}});case C.Model_Open_Create_Edge:return Object(l.a)(Object(l.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Create Edge",submitText:"Create Edge",Children:J,defaultStyle:E,defaultLabel:"",labelAllowed:!0,cb:t.cb}});case C.Model_Open_Update_Node:return Object(l.a)(Object(l.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Edit Node",submitText:"Edit Node",Children:L,defaultStyle:t.style,defaultLabel:t.label,labelAllowed:t.labelAllowed,cb:t.cb}});case C.Model_Open_Update_Edge:return Object(l.a)(Object(l.a)({},e),{},{ModelOpen:!0,modalPayload:{title:"Edit Edge",submitText:"Edit Edge",Children:J,defaultStyle:t.style,defaultLabel:t.label,labelAllowed:t.labelAllowed,cb:t.cb}});case C.Model_Close:return Object(l.a)(Object(l.a)({},e),{},{ModelOpen:!1});case C.ELE_SELECTED:return Object(l.a)(Object(l.a)({},e),{},{eleSelected:!0,eleSelectedPayload:t.payload});case C.ELE_UNSELECTED:return Object(l.a)(Object(l.a)({},e),{},{eleSelected:!1});case C.TURN_DRAW:return Object(l.a)(Object(l.a)({},e),{},{drawModeOn:t.payload});case C.SET_UNDO:return Object(l.a)(Object(l.a)({},e),{},{undoEnabled:t.payload});case C.SET_REDO:return Object(l.a)(Object(l.a)({},e),{},{redoEnabled:t.payload});case C.ADD_GRAPH:return Object(l.a)(Object(l.a)({},e),{},{graphs:[].concat(Object(m.a)(e.graphs),[Object(l.a)(Object(l.a)({},U),{},{component:t.payload.component,projectDetails:t.payload.projectDetails,id:t.payload.id,instance:t.payload.instance})])});case C.ADD_GRAPH_INSTANCE:var a=Object(l.a)({},e);return a.graphs[t.index].instance=t.instance,Object(l.a)({},a);case C.NEW_GRAPH:return Object(l.a)(Object(l.a)({},e),{},{curGraphIndex:e.graphs.length});case C.CHANGE_TAB:return Object(l.a)(Object(l.a)({},e),{},{curGraphIndex:t.payload});case C.REMOVE_GRAPH:return Object(l.a)(Object(l.a)({},e),{},{graphs:e.graphs.filter((function(e,a){return a!==t.payload})),curGraphIndex:e.curGraphIndex<t.payload?e.curGraphIndex:Math.max(0,e.curGraphIndex-1)});case C.SET_PROJECT_DETAILS:var n=Object(l.a)({},e);return n.graphs=n.graphs.map((function(e){return e.id===t.payload.id?(e.instance&&e.instance.setProjectDetail(t.payload.projectDetails),Object(l.a)(Object(l.a)({},e),{},{projectDetails:t.payload.projectDetails})):e})),Object(l.a)({},n);default:return e}},q=a(59),F={allgs:(window.localStorage.getItem("allGraphs")||window.localStorage.setItem("allGraphs",window.btoa(JSON.stringify([]))),new Set(JSON.parse(window.atob(window.localStorage.getItem("allGraphs"))))),saveAllgs:function(){window.localStorage.setItem("allGraphs",window.btoa(JSON.stringify(Array.from(this.allgs))))},addEmptyIfNot:function(){window.localStorage.getItem("allGraphs")||window.localStorage.setItem("allGraphs",window.btoa(JSON.stringify([])))},get:function(e){return null===window.localStorage.getItem(e)?null:JSON.parse(window.atob(window.localStorage.getItem(e)))},save:function(e,t){this.addGraph(e);var a=JSON.stringify(t);window.localStorage.setItem(e,window.btoa(a))},remove:function(e){this.allgs.delete(e)&&this.saveAllgs(),localStorage.removeItem(e)},addGraph:function(e){this.allgs.has(e)||(this.allgs.add(e),this.saveAllgs())},getAllGraphs:function(){return JSON.parse(window.atob(window.localStorage.getItem("allGraphs")))}},K=function(e){return function(e){Object(k.a)(a,e);var t=Object(_.a)(a);function a(){var e;return Object(S.a)(this,a),(e=t.call(this)).autoSaveIntervalId=null,e}return Object(D.a)(a,[{key:"downloadImg",value:function(e){"PNG"===e&&Object(q.saveAs)(this.cy.png(),"".concat(this.getName(),"-DHGWorkflow.png")),"JPG"===e&&Object(q.saveAs)(this.cy.png(),"".concat(this.getName(),"-DHGWorkflow.jgp"))}},{key:"shouldNodeBeSaved",value:function(e){return"ordin"===this.getById(e).data("type")}},{key:"shouldEdgeBeSaved",value:function(e){return"ordin"===this.getById(e).data("type")}},{key:"getRealSourceId",value:function(e){return e}},{key:"jsonifyGraph",value:function(){var e=this,t={nodes:[],edges:[],projectDetails:this.projectDetails};return this.cy.nodes().forEach((function(a){if(e.shouldNodeBeSaved(a.id())){var n=a.json(),c={label:n.data.label,id:n.data.id,position:n.position};c.style=e.getStyle(a.id()),t.nodes.push(c)}})),this.cy.edges().forEach((function(a){if(e.shouldEdgeBeSaved(a.id())){var n=a.json(),c={source:e.getRealSourceId(a.source().id()),target:n.data.target,label:n.data.label};c.style=e.getStyle(a.id()),t.edges.push(c)}})),t}},{key:"getName",value:function(){return"".concat(this.projectDetails.projectName,"-").concat(this.projectDetails.author)}},{key:"saveToDisk",value:function(){var e=JSON.stringify(this.jsonifyGraph()),t=(new TextEncoder).encode(e),a=new Blob([t],{type:"application/json;charset=utf-8"});Object(q.saveAs)(a,"".concat(this.getName(),"-DHGWorkflow.json"))}},{key:"loadJson",value:function(e){var t=this;e.nodes.forEach((function(e){t.addNode(e.label,e.style,"ordin",e.position,{id:e.id})})),e.edges.forEach((function(e){t.addEdge(e.source,e.target,e.label,e.style)})),this.projectDetails=e.projectDetails,this.dispatcher({type:C.SET_PROJECT_DETAILS,payload:{projectDetails:e.projectDetails,id:this.id}})}},{key:"saveLocalStorage",value:function(){var e=this;null!==this.autoSaveTimeoutId&&clearTimeout(this.autoSaveIntervalId),this.autoSaveIntervalId=setTimeout((function(){return F.save(e.id,e.jsonifyGraph())}),1e3)}},{key:"loadGraphFromLocalStorage",value:function(){var e=F.get(this.id);return!!e&&(this.loadJson(e),!0)}}]),a}(e)},V=function(e){return function(e){Object(k.a)(a,e);var t=Object(_.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(D.a)(a,[{key:"resetZoom",value:function(){this.cy.reset()}},{key:"setOnZoom",value:function(e){this.cy.removeListener("zoom"),this.cy.on("zoom",(function(t){return e(Math.round(100*t.target.zoom()))}))}},{key:"fitZoom",value:function(){this.cy.fit()}},{key:"setZoom",value:function(e){this.cy.zoom(e/100)}},{key:"getZoom",value:function(){return Math.round(100*this.cy.zoom())}},{key:"clearAll",value:function(){return 0===this.cy.elements().length||!!window.confirm("Do want to clear all elements?")&&(this.cy.elements().remove(),!0)}}]),a}(e)},X=a(22),$=a(17),Y="ADD_NODE",Q="ADD_EDGE",ee="UPDATE_NODE",te="UPDATE_EDGE",ae="UPDATE_DATA",ne="DEL_NODE",ce="DEL_EDGE",oe="SET_POS",ie="SET_DIM",re=function(e){return function(e){Object(k.a)(a,e);var t=Object(_.a)(a);function a(){var e;return Object(S.a)(this,a),(e=t.call(this)).getTid=function(){return(new Date).getTime()},e}return Object(D.a)(a,[{key:"getPos",value:function(){for(var e=this.cy.$("node"),t={x:100,y:100},a=!0;a;){a=!1;for(var n=0;n<e.length;n+=1){var c=e[n].position();a=a||c.x===t.x&&c.y===t.y}a&&(t.x+=10,t.y+=10)}return t}},{key:"addNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ordin",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.getPos(),c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this.getTid(),r=this.cy.add({group:"nodes",data:Object(l.a)({id:o,label:e,type:a},c),style:t,position:n});return this.setNodeEvent(r),this.addAction({actionName:ne,parameters:[r.id()]},{actionName:Y,parameters:[e,t,a,n,c,r.id()]},i),r}},{key:"addEdge",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ordin",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this.getTid(),r=this.cy.add({group:"edges",data:{source:e,target:t,label:a,type:c,id:o},style:n});return this.addAction({actionName:ce,parameters:[r.id()]},{actionName:Q,parameters:[e,t,a,n,c,r.id()]},i),r}},{key:"getStyle",value:function(e){var t=this.getById(e),a=t.style(),n={};return t.isNode()&&Object.entries(x).forEach((function(e){n[e[0]]=a[e[0]]})),t.isEdge()&&Object.entries(E).forEach((function(e){n[e[0]]=a[e[0]]})),n}},{key:"getLabel",value:function(e){return this.getById(e).data("label")||this.getById(e).data("label")}},{key:"updateNode",value:function(e,t,a,n){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getTid();this.addAction({actionName:ee,parameters:[e,this.getStyle(e),this.getById(e).data("label"),n]},{actionName:ee,parameters:[e,t,a,n]},c),n&&this.getById(e).data("label",a),this.getById(e).style(t)}},{key:"updateEdge",value:function(e,t,a,n){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getTid();this.addAction({actionName:te,parameters:[e,this.getStyle(e),this.getById(e).data("label"),n]},{actionName:te,parameters:[e,t,a,n]},c),n&&this.getById(e).data("label",a),this.getById(e).style(t)}},{key:"updateData",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.getTid();return this.addAction({actionName:ae,parameters:[e,t,this.getById(e).data(t)]},{actionName:ae,parameters:[e,t,a]},n),this.getById(e).data(t,a),this}},{key:"deleteNode",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTid(),n=this.getById(e);n.connectedEdges('[type="ordin"]').forEach((function(e){return t.deleteEdge(e.id(),a)})),n.connectedEdges().forEach((function(e){return t.deleteEdge(e.id(),a)})),this.addAction({actionName:Y,parameters:[n.data("label"),this.getStyle(n.id()),n.data("type"),n.position(),n.json().data,e]},{actionName:ne,parameters:[e]},a),n.remove()}},{key:"deleteEdge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTid();if(0!==this.getById(e).length&&!this.getById(e).removed()){var a=this.getById(e).json();this.addAction({actionName:Q,parameters:[a.data.source,a.data.target,a.data.label,this.getStyle(e),a.data.type,e]},{actionName:ce,parameters:[e]},t),this.getById(e).remove()}}},{key:"deleteElem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTid();return this.getById(e).isNode()?this.deleteNode(e,t):this.deleteEdge(e,t)}},{key:"setPos",value:function(e,t){this.getById(e).position(t),this.getById(e).emit("moved")}},{key:"setDim",value:function(e,t,a){this.getById(e).style("height",t.height),this.getById(e).style("width",t.width),this.setPos(e,a)}}]),a}(e)},le=function(e){return function(e){Object(k.a)(a,e);var t=Object(_.a)(a);function a(){var e,n,c,o,i,r,l,s,d,u,h;return Object(S.a)(this,a),h=t.call(this),a.methodsMapped=(e={},Object(X.a)(e,Y,(function(){for(var e=arguments.length,t=new Array(e),c=0;c<e;c++)t[c]=arguments[c];return Object(A.a)((n=Object($.a)(h),Object(I.a)(a.prototype)),"addNode",n).bind(Object($.a)(h)).apply(void 0,t.concat([0]))})),Object(X.a)(e,Q,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(A.a)((c=Object($.a)(h),Object(I.a)(a.prototype)),"addEdge",c).bind(Object($.a)(h)).apply(void 0,t.concat([0]))})),Object(X.a)(e,ee,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(A.a)((o=Object($.a)(h),Object(I.a)(a.prototype)),"updateNode",o).bind(Object($.a)(h)).apply(void 0,t.concat([0]))})),Object(X.a)(e,te,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(A.a)((i=Object($.a)(h),Object(I.a)(a.prototype)),"updateEdge",i).bind(Object($.a)(h)).apply(void 0,t.concat([0]))})),Object(X.a)(e,ae,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(A.a)((r=Object($.a)(h),Object(I.a)(a.prototype)),"updateData",r).bind(Object($.a)(h)).apply(void 0,t.concat([0]))})),Object(X.a)(e,ne,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(A.a)((l=Object($.a)(h),Object(I.a)(a.prototype)),"deleteNode",l).bind(Object($.a)(h)).apply(void 0,t.concat([0]))})),Object(X.a)(e,ce,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(A.a)((s=Object($.a)(h),Object(I.a)(a.prototype)),"deleteEdge",s).bind(Object($.a)(h)).apply(void 0,t.concat([0]))})),Object(X.a)(e,oe,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(A.a)((d=Object($.a)(h),Object(I.a)(a.prototype)),"setPos",d).bind(Object($.a)(h)).apply(void 0,t.concat([0]))})),Object(X.a)(e,ie,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(A.a)((u=Object($.a)(h),Object(I.a)(a.prototype)),"setDim",u).bind(Object($.a)(h)).apply(void 0,t.concat([0]))})),e),h.actionArr=[],h.curActionIndex=0,h}return Object(D.a)(a,[{key:"addPositionChange",value:function(e,t,a){var n=(new Date).getTime();this.addAction({actionName:oe,parameters:[e,t]},{actionName:oe,parameters:[e,a]},n)}},{key:"addDimensionChange",value:function(e,t,a,n,c){var o=(new Date).getTime();this.addAction({actionName:ie,parameters:[e,t,a]},{actionName:ie,parameters:[e,n,c]},o)}},{key:"addAction",value:function(e,t,a){0!==a&&(this.actionArr.splice(this.curActionIndex),this.actionArr.push({tid:a,inverse:e,equivalent:t}),this.curActionIndex+=1,this.dispatcher({type:C.SET_UNDO,payload:0!==this.curActionIndex}),this.dispatcher({type:C.SET_REDO,payload:this.curActionIndex!==this.actionArr.length}))}},{key:"undo",value:function(){var e=null;for(0!==this.curActionIndex&&(e=this.actionArr[this.curActionIndex-1].tid);0!==this.curActionIndex&&this.actionArr[this.curActionIndex-1].tid===e;)this.curActionIndex-=1,a.performAction(this.actionArr[this.curActionIndex].inverse);this.dispatcher({type:C.SET_UNDO,payload:0!==this.curActionIndex}),this.dispatcher({type:C.SET_REDO,payload:this.curActionIndex!==this.actionArr.length})}},{key:"redo",value:function(){var e=null;for(this.curActionIndex!==this.actionArr.length&&(e=this.actionArr[this.curActionIndex].tid);this.curActionIndex!==this.actionArr.length&&this.actionArr[this.curActionIndex].tid===e;)a.performAction(this.actionArr[this.curActionIndex].equivalent),this.curActionIndex+=1;this.dispatcher({type:C.SET_UNDO,payload:0!==this.curActionIndex}),this.dispatcher({type:C.SET_REDO,payload:this.curActionIndex!==this.actionArr.length})}}],[{key:"performAction",value:function(e){var t=e.actionName,n=e.parameters;a.methodsMapped[t].apply(void 0,Object(m.a)(n))}}]),a}(re(e))},se=function(e){return function(e){Object(k.a)(a,e);var t=Object(_.a)(a);function a(e,n,c,o,i){var r;return Object(S.a)(this,a),r=t.call(this),c&&(r.dispatcher=c),o&&(r.superState=o),n&&(r.cy=n),r.id=e,r.projectDetails=i,r.regesterEvents(),r.saveLocalStorage(),r}return Object(D.a)(a,[{key:"setProjectDetail",value:function(e){this.projectDetails=e,this.saveLocalStorage()}},{key:"setNodeEvent",value:function(){return this}},{key:"getById",value:function(e){return this.cy.getElementById(e)}},{key:"set",value:function(e){var t=e.cy,a=e.dispatcher,n=e.superState;a&&(this.dispatcher=a),n&&(this.superState=n),t&&(this.cy=t)}},{key:"selectDeselectEventHandler",value:function(){var e,t=this.cy.$(":selected");if(0===t.length)return this.dispatcher({type:C.ELE_UNSELECTED});e=t.every((function(e){return e.isNode()}))?"NODE":t.every((function(e){return e.isEdge()}))?"EDGE":"MIX";var a=t.map((function(e){return e.data("id")}));return this.dispatcher({type:C.ELE_SELECTED,payload:{ids:a,type:e}})}},{key:"regesterEvents",value:function(){var e=this;this.cy.on("select unselect",(function(){return e.selectDeselectEventHandler()})),this.cy.on("add remove move style data free","[type]",this.saveLocalStorage.bind(this)),this.cy.on("grab",(function(e){e.target.forEach((function(e){e.scratch("position",Object(l.a)({},e.position()))}))})),this.cy.on("dragfree",(function(t){t.target.forEach((function(t){e.addPositionChange(t.id(),t.scratch("position"),Object(l.a)({},t.position()))}))})),this.cy.on("nodeediting.resizestart",(function(e,t,a){a.scratch("height",a.style().height),a.scratch("width",a.style().width),a.scratch("position",Object(l.a)({},a.position()))})),this.cy.on("nodeediting.resizeend",(function(t,a,n){e.addDimensionChange(n.id(),{height:n.scratch("height"),width:n.scratch("width")},n.scratch("position"),{height:n.style().height,width:n.style().width},Object(l.a)({},n.position()))}))}}]),a}(K(V(le(e))))},de={getEq:function(e,t){var a=(e.y-t.y)/(e.x-t.x);return[a,e.y-a*e.x]},getX1X2:function(e,t,a,n){if(e.x===t.x)return[t.x,t.x];var c={x:t.x-e.x,y:t.y-e.y},o=this.getEq({x:0,y:0},c),i=Object(r.a)(o,2),l=i[0],s=i[1],d=Math.pow(a,2)*Math.pow(l,2)+Math.pow(n,2),u=2*Math.pow(a,2)*l*s,h=Math.pow(a,2)*(Math.pow(s,2)-Math.pow(n,2)),p=Math.pow(u,2)-4*d*h;return[(-u+Math.pow(p,.5))/(2*d)+e.x,(-u-Math.pow(p,.5))/(2*d)+e.x]},getY1Y2:function(e,t,a,n,c,o){if(c===o)return[e.y+n,e.y-n];var i=this.getEq(e,t),l=Object(r.a)(i,2),s=l[0],d=l[1];return[s*c+d,s*o+d]},dist:function(e,t){return Math.pow(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2),.5)},getClosestEllipse:function(e,t,a,n){var c=this.getX1X2(e,t,a,n),o=Object(r.a)(c,2),i=o[0],l=o[1],s=this.getY1Y2(e,t,a,n,i,l),d=Object(r.a)(s,2),u=d[0],h=d[1],p=[this.dist(t,{x:i,y:u}),this.dist(t,{x:l,y:h})];return p[0]<p[1]?{x:i,y:u}:{x:l,y:h}},slope:function(e,t,a,n){return(e-a)/(t-n)},getClosestRect:function(e,t,a,n){var c,o,i=[[e.x+a,e.y+n],[e.x+a,e.y-n]].map((function(a){var n=Object(r.a)(a,2),c=n[0],o=n[1];return(e.x-c)*(t.y-o)-(e.y-o)*(t.x-c)})),l=Object(r.a)(i,2),s=l[0],d=l[1],u=this.getEq(t,e),h=Object(r.a)(u,2),p=h[0],b=h[1],j=[[(e.y-n-b)/p,e.y-n],[e.x+a,p*(e.x+a)+b],[e.x-a,p*(e.x-a)+b],[(e.y+n-b)/p,e.y+n]];if(s<=0&&d<=0){var y=Object(r.a)(j[3],2);c=y[0],o=y[1]}else if(s>=0&&d<=0){var f=Object(r.a)(j[1],2);c=f[0],o=f[1]}else if(s>=0&&d>=0){var g=Object(r.a)(j[0],2);c=g[0],o=g[1]}else if(s<=0&&d>=0){var O=Object(r.a)(j[2],2);c=O[0],o=O[1]}return c&&o?{x:c,y:o}:t},get:function(e,t,a,n,c){return"rectangle"===c?de.getClosestRect(e,t,a,n):de.getClosestEllipse(e,t,a,n)}},ue=de.get,he=function(e){return function(e){Object(k.a)(a,e);var t=Object(_.a)(a);function a(){return Object(S.a)(this,a),t.apply(this,arguments)}return Object(D.a)(a,[{key:"getRealNode",value:function(e){return this.getById(e).incomers().filter("node")[0]}},{key:"addAutoMove",value:function(e){return e.unselectify(),this}},{key:"setNodeEvent",value:function(e){return e.on("drag style moved",(function(){e.connectedEdges().connectedNodes('node[type="special"]').forEach((function(e){e.position(a.calJuncNodePos(e))}))})),this}},{key:"addEdgeWithJuncNode",value:function(e,t,n){var c=this.getById(e),o=Object(A.a)(Object(I.a)(a.prototype),"addEdge",this).call(this,e,t,c.data("edgeLabel"),c.data("edgeStyle"),"ordin",void 0,n);return c.position(a.calJuncNodePos(c)),o}},{key:"addEdgeWithoutJuncNode",value:function(e,t,n,c,o){var i=this.getById(e),r=this.getById(t),s=i.style(),d=ue(i.position(),r.position(),parseInt(s.width.slice(0,-2),10)/2,parseInt(s.height.slice(0,-2),10)/2,s.shape),u=Object(A.a)(Object(I.a)(a.prototype),"addNode",this).call(this,"",{"background-color":c["line-color"]},"special",d,{edgeLabel:n,edgeStyle:c},void 0,o);return Object(A.a)(Object(I.a)(a.prototype),"addEdge",this).call(this,e,u.id(),"",Object(l.a)(Object(l.a)({},c),{},{"target-arrow-shape":"none"}),"special",void 0,o),this.addAutoMove(u,i),this.addEdgeWithJuncNode(u.id(),t,o)}},{key:"addEdge",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getTid(),i=this.getById(e);if("special"===i.data("type"))return this.addEdgeWithJuncNode(e,t,o);var r=i.outgoers("node").filter((function(e){return e.data("edgeLabel")===n}));return r.length?this.addEdgeWithJuncNode(r[0].id(),t,o):n.length?this.addEdgeWithoutJuncNode(e,t,n,c,o):(this.dispatcher({type:C.Model_Open_Create_Edge,cb:function(n,c){return a.addEdgeWithoutJuncNode(e,t,n,c,o)}}),this)}},{key:"updateEdge",value:function(e,t,n,c){var o=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getTid(),r=this.getById(e).source();c&&this.updateData(r.data("id"),"edgeLabel",n,i),this.updateData(r.data("id"),"edgeStyle",t,i),this.updateNode([r.data("id")],{"background-color":t["line-color"]},"",!1,i),r.outgoers("edge").forEach((function(e){return Object(A.a)(Object(I.a)(a.prototype),"updateEdge",o).call(o,e.data("id"),t,n,c,i)}))}},{key:"deleteElem",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTid(),c=this.getById(e);if(c.isNode()){if(c.removed())return;c.outgoers("node").forEach((function(e){return Object(A.a)(Object(I.a)(a.prototype),"deleteElem",t).call(t,e.id(),n)})),c.connectedEdges().forEach((function(e){return t.deleteElem(e.id(),n)})),Object(A.a)(Object(I.a)(a.prototype),"deleteNode",this).call(this,e,n)}else{if(c.removed())return;var o=c.source();Object(A.a)(Object(I.a)(a.prototype),"deleteEdge",this).call(this,e,n),o&&0===o.outgoers().length&&this.deleteNode(o.id(),n)}}},{key:"getRealSourceId",value:function(e){return"ordin"===this.getById(e).data("type")||0===this.getById(e).incomers("node").length?e:this.getById(e).incomers("node")[0].id()}}],[{key:"calJuncNodePos",value:function(e){var t=e.incomers("node")[0],a={x:0,y:0},n=new Set;return e.outgoers("node").forEach((function(e){return n.add(JSON.stringify(e.position()))})),n.forEach((function(e){var t=JSON.parse(e);a.x+=t.x,a.y+=t.y})),0===n.size?a:(a.x/=n.size,a.y/=n.size,ue(t.position(),a,parseInt(t.style().width.slice(0,-2),10)/2,parseInt(t.style().height.slice(0,-2),10)/2,t.style().shape))}}]),a}(se(e))},pe=a(136),be=a(86),je=(a(317),a(318),w.minZoom),ye=w.maxZoom,fe={},ge=function(e){var t=e.superState,a=t.graphs[t.curGraphIndex]&&t.graphs[t.curGraphIndex].instance;if(!a)return Object(M.jsx)(M.Fragment,{});var c=Object(n.useState)(a.getZoom()),o=Object(r.a)(c,2),i=o[0],l=o[1];return a.setOnZoom(l),Object(M.jsx)("div",{children:Object(M.jsxs)("div",{className:"zoom-comp",children:[Object(M.jsx)("div",{role:"button",tabIndex:0,className:"zoom-box zoom-btn",onClick:function(){return a.resetZoom()},onKeyDown:function(e){return" "===e.key&&a.resetZoom()},children:Object(M.jsx)(be.b,{})}),Object(M.jsx)("div",{role:"button",tabIndex:0,className:"zoom-box zoom-btn",onClick:function(){return a.fitZoom()},onKeyDown:function(e){return" "===e.key&&a.resetZoom()},children:Object(M.jsx)(be.a,{})}),Object(M.jsxs)("div",{className:"zoom-box zoom-value",children:[i,"%"]}),Object(M.jsx)("div",{className:"slider",children:Object(M.jsx)(pe.a,{min:100*je,max:100*ye,marks:fe,onChange:function(e){a.setZoom(e),l(e)},included:!1,value:i})})]})})},Oe=(a(319),a(60)),ve=a(39),me=function(e){return e.graphs[e.curGraphIndex]&&e.graphs[e.curGraphIndex].instance},xe=function(e,t){t({type:C.Model_Open_Create_Node,cb:function(t,a){me(e).addNode(t,a)}})},Ee=function(e,t){var a=1===e.eleSelectedPayload.ids.length,n=(new Date).getTime();"NODE"===e.eleSelectedPayload.type&&t({type:C.Model_Open_Update_Node,cb:function(t,c){return e.eleSelectedPayload.ids.forEach((function(o){return me(e).updateNode(o,c,t,a,n)}))},labelAllowed:a,label:me(e).getLabel(e.eleSelectedPayload.ids[0]),style:me(e).getStyle(e.eleSelectedPayload.ids[0])}),"EDGE"===e.eleSelectedPayload.type&&t({type:C.Model_Open_Update_Edge,cb:function(t,c){return e.eleSelectedPayload.ids.forEach((function(o){return me(e).updateEdge(o,c,t,a,n)}))},labelAllowed:a,label:me(e).getLabel(e.eleSelectedPayload.ids[0]),style:me(e).getStyle(e.eleSelectedPayload.ids[0])})},Ne=function(e){var t=(new Date).getTime();e.eleSelectedPayload.ids.forEach((function(a){return me(e).deleteElem(a,t)}))},we=function(e,t,a){me(e).downloadImg(a)},Se=function(e){me(e).saveToDisk()},De=function(e,t,a){if(a.target&&a.target.files&&a.target.files[0]){var n=new FileReader;n.onload=function(e){var a=JSON.parse(e.target.result),n=(new Date).getTime();F.save(n,a),t({type:C.ADD_GRAPH,payload:{id:n,projectDetails:Object(l.a)(Object(l.a)({},a.projectDetails),{},{set:!0})}})},n.readAsText(a.target.files[0])}},Ae=function(e,t){t({type:C.NEW_GRAPH})},Ie=function(e){me(e).clearAll()},ke=function(e){me(e)&&me(e).undo()},_e=function(e){me(e).redo()},Ce=(a(320),void 0),Te=function(e){var t=e.superState,a=e.dispatcher,n=function(e,n){n.stopPropagation(),window.confirm("Do you confirm to close the tab? This action is irreversable.")&&(F.remove(t.graphs[e]?t.graphs[e].id:null),a({type:C.REMOVE_GRAPH,payload:e}))},o=function(e){var n;e.stopPropagation(),n=t,a({type:C.SET_PROJECT_DETAILS,payload:{projectDetails:Object(l.a)(Object(l.a)({},me(n).projectDetails),{},{set:!1}),id:me(n).id}})};return c.a.useEffect((function(){Object(ve.a)("ctrl+shift+m,command+shift+m",(function(e){e.preventDefault(),document.getElementById("new_graph").click()})),Object(ve.a)("ctrl+shift+e,command+shift+e",(function(e){e.preventDefault();var t=document.querySelector(".tab.tab-graph.selected > .tab-act.edit");t&&t.click()})),Object(ve.a)("ctrl+shift+l,command+shift+l",(function(e){e.preventDefault();var t=document.querySelector(".tab.tab-graph.selected > .tab-act.close");t&&t.click()}))}),[]),Object(M.jsxs)("div",{className:"tab-par",children:[Object(M.jsx)("button",{className:"tab",onClick:Ae.bind(Ce,t,a),type:"button",id:"new_graph",children:Object(M.jsx)(Oe.a,{size:25})}),t.graphs.map((function(e,c){return Object(M.jsxs)("div",{className:"tab tab-graph ".concat(t.curGraphIndex===c?"selected":"none"),onClick:function(){return a({type:C.CHANGE_TAB,payload:c})},onKeyDown:function(e){return" "===e.key&&a({type:C.CHANGE_TAB,payload:c})},role:"button",tabIndex:0,id:"tab_".concat(c),children:[Object(M.jsxs)("span",{className:"tab-text",children:[e.projectDetails.projectName," - ",e.projectDetails.author]}),t.curGraphIndex===c?Object(M.jsx)("button",{className:"tab-act edit",onClick:o,type:"button",children:Object(M.jsx)(Oe.c,{size:16})}):Object(M.jsx)(M.Fragment,{}),Object(M.jsx)("button",{className:"tab-act close",onClick:n.bind(Ce,c),type:"button",children:Object(M.jsx)(Oe.b,{size:20})})]},e.id)}))]})},Me=function(e){var t=c.a.createRef(),a=e.dispatcher,o=e.superState;return Object(n.useEffect)((function(){o.graphs.forEach((function(e,n){if(!e.instance){var c=e.id,i=function(e,n,c){e.style.width="".concat(t.current.offsetWidth-2,"px"),e.style.height="".concat(t.current.offsetHeight-2,"px");var i=d()(Object(l.a)(Object(l.a)({},w),{},{container:e}));i.nodeEditing({resizeToContentCueEnabled:function(){return!1},setWidth:function(e,t){"special"!==e.data("type")&&e.css("width",t)},setHeight:function(e,t){"special"!==e.data("type")&&e.css("height",t)},isNoResizeMode:function(e){return"special"===e.data("type")},isNoControlsMode:function(e){return"special"===e.data("type")}}),i.gridGuide({snapToGridOnRelease:!1});var r=new(he(Object))(n,i,a,o,c);return i.edgehandles({preview:!1,handlePosition:function(){return"none"},complete:function(e,t,a){a.remove(),r.addEdge(e.id(),t.id())}}),r.loadGraphFromLocalStorage(),r}(document.getElementById(c),c,e.projectDetails);a({type:C.ADD_GRAPH_INSTANCE,instance:i,index:n})}}))}),[o.graphs.length]),Object(n.useEffect)((function(){"function"!==typeof d()("core","edgehandles")&&d.a.use(h.a),"function"!==typeof d()("core","nodeEditing")&&g()(d.a,v.a,y.a),"function"!==typeof d()("core","gridGuide")&&b()(d.a),F.getAllGraphs().forEach((function(e){a({type:C.ADD_GRAPH,payload:{id:e,projectDetails:{projectName:"",author:"",set:!0}}})}))}),[]),Object(M.jsxs)("div",{style:{flex:1,flexDirection:"column",display:"flex"},children:[Object(M.jsx)(Te,{superState:o,dispatcher:a}),Object(M.jsxs)("div",{style:{flex:1,background:"white"},className:"graph-container",ref:t,children:[o.graphs.map((function(e,t){return Object(M.jsx)("div",{style:{zIndex:1,display:o.curGraphIndex===t?"block":"none"},id:e.id},e.id)})),Object(M.jsx)(ge,{dispatcher:a,superState:o})]})]})},Ge=(a(321),a(87)),Pe=a.n(Ge);a(331);Pe.a.setAppElement("#root");var Be=function(e){var t=e.closeModal,a=e.ModelOpen,c=e.title,o=e.children,i=Object(n.useState)(""),l=Object(r.a)(i,2),s=l[0],d=l[1],u=Object(n.useState)(a),h=Object(r.a)(u,2),p=h[0],b=h[1];return Object(n.useEffect)((function(){!0===a?(b(!0),d("closing"),setTimeout((function(){d("")}),20)):(d("closing"),setTimeout((function(){b(!1)}),400))}),[a]),p?Object(M.jsx)(Pe.a,{isOpen:p,contentLabel:"onRequestClose Example",onRequestClose:t,className:"Modal",overlayClassName:"Overlay ".concat(s),children:Object(M.jsxs)("div",{className:"modal-content ".concat(s),children:[Object(M.jsxs)("div",{className:"modal-header",children:[Object(M.jsx)("div",{className:"modal-title h4",children:c}),Object(M.jsxs)("button",{type:"button",className:"close",onClick:t,children:[t?Object(M.jsx)("span",{"aria-hidden":"true",children:"\xd7"}):"",Object(M.jsx)("span",{className:"sr-only",children:"Close"})]})]}),o]})}):""},Le=function(e){var t=e.closeModal,a=e.superState,c=Object(n.useState)({}),o=Object(r.a)(c,2),i=o[0],l=o[1],s=a.modalPayload,d=a.ModelOpen,u=s.cb,h=s.title,p=s.submitText,b=s.Children,j=s.defaultStyle,y=s.defaultLabel,f=s.labelAllowed;Object(n.useEffect)((function(){l({label:y||"",style:j})}),[y,j]);return Object(M.jsx)(Be,{closeModal:t,ModelOpen:d,title:h,children:Object(M.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u(i.label,i.style),l({label:y||"",style:j}),t()},children:[Object(M.jsx)("div",{className:"modal-content-body",children:Object(M.jsx)(b,{data:i,setData:l,labelAllowed:f})}),Object(M.jsx)("div",{className:"modal-footer",children:Object(M.jsx)("button",{type:"submit",className:"btn btn-primary",children:p})})]})})},Re=(a(332),a(31)),He=function(e){return[{type:"action",text:"Node",icon:Re.d,action:xe,active:!0,hotkey:"ctrl+g"},{type:"vsep"},{type:"file-upload",text:"Open",icon:Re.c,action:De,active:!0,hotkey:"ctrl+o"},{type:"action",text:"Save",icon:Re.g,action:Se,active:!0,hotkey:"ctrl+s"},{type:"action",text:"Clear",icon:Re.f,action:Ie,active:!0,hotkey:"ctrl+backspace"},{type:"vsep"},{type:"action",text:"Undo",icon:Re.i,action:ke,active:e.undoEnabled,hotkey:"ctrl+z"},{type:"action",text:"Redo",icon:Re.e,action:_e,active:e.redoEnabled,hotkey:"ctrl+y,ctrl+shift+z"},{type:"vsep"},{type:"action",text:"Edit",icon:Re.b,action:Ee,active:e.eleSelected&&"MIX"!==e.eleSelectedPayload.type,hotkey:"ctrl+e"},{type:"action",text:"Delete",icon:Re.h,action:Ne,active:e.eleSelected,hotkey:"backspace,del,clear,delete"},{type:"vsep"},{type:"space"},{type:"menu",text:"Download",icon:Re.a,action:we,active:!0},{type:"vsep"}]},ze=(a(333),a(334),a(137)),Je=a(45);function We(e){var t=e.Icon,a=e.text,n=e.action,c=e.active,o=e.tabIndex;return Object(M.jsxs)(Je.a,{menuButton:Object(M.jsx)(Je.b,{children:Object(M.jsx)(qe,{Icon:t,text:a,action:n,active:c,tabIndex:o})}),children:[Object(M.jsx)(Je.c,{onClick:function(){return n("JPG")},children:"JPG"}),Object(M.jsx)(Je.c,{onClick:function(){return n("PNG")},children:"PNG"})]})}var Ue=function(e){var t=e.Icon,a=e.text,n=e.action,o=e.active,i=e.tabIndex,r=c.a.createRef();return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("input",{type:"file",ref:r,style:{display:"none"},accept:".json",onChange:n}),Object(M.jsx)(qe,{Icon:t,text:a,active:o,tabIndex:i,action:function(){return r.current.click()}})]})},Ze=function(e){var t=e.text,a=e.action,n=e.active,c=e.tabIndex;return Object(M.jsxs)("div",{role:"button",tabIndex:c,className:"tool ".concat(n?"active":""),onClick:a,onKeyDown:function(e){return" "===e.key&&a()},children:[Object(M.jsx)(ze.a,{onChange:a,checked:n,className:"react-switch"}),Object(M.jsx)("div",{children:t})]})},qe=function(e){var t=e.Icon,a=e.text,n=e.action,c=e.active,o=e.tabIndex;return Object(M.jsxs)("div",{role:"button",id:"action_".concat(o),tabIndex:o,className:"tool ".concat(c?"active":""),onClick:function(){return c&&n()},onKeyDown:function(e){return c&&" "===e.key&&n()},children:[Object(M.jsx)("div",{className:"icon",children:Object(M.jsx)(t,{size:"25"})}),Object(M.jsx)("div",{style:{fontSize:16},children:a})]})},Fe=function(){return Object(M.jsx)("div",{className:"Vsep sep"})},Ke=function(){return Object(M.jsx)("div",{className:"hsep sep"})},Ve=function(){return Object(M.jsx)("div",{className:"space"})},Xe=function(e){var t=e.state,a=e.dispatcher,n=He(t);return c.a.useEffect((function(){!function(e){var t="",a={};e.forEach((function(e,n){e.hotkey&&e.hotkey.split(",").forEach((function(e){[e,e.replace("ctrl","command")].forEach((function(e){t+="".concat(e,","),a[e]=document.getElementById("action_".concat(n+1))}))}))})),Object(ve.a)(t,(function(e,t){e.preventDefault(),a[t.shortcut].click()}))}(n)}),[]),Object(M.jsxs)("header",{className:"header",children:[Object(M.jsx)("section",{className:"middle titlebar",children:t.graphs[t.curGraphIndex]?"".concat(t.graphs[t.curGraphIndex].projectDetails.projectName," - DHGWorkflow Editor"):""}),Object(M.jsxs)("section",{className:"toolbar",children:[n.map((function(e,n){var c=e.text,o=e.active,i=e.action,r={text:c,active:o,tabIndex:n+1,key:c,action:function(e){return i(t,a,e)},Icon:e.icon};switch(e.type){case"vsep":return Object(M.jsx)(Fe,{},"".concat("v".concat(n)));case"space":return Object(M.jsx)(Ve,{},"".concat("s".concat(n)));case"switch":return Object(M.jsx)(Ze,Object(l.a)({},r));case"menu":return Object(M.jsx)(We,Object(l.a)({},r));case"file-upload":return Object(M.jsx)(Ue,Object(l.a)({},r));default:return Object(M.jsx)(qe,Object(l.a)({},r))}})),Object(M.jsx)("input",{type:"file",id:"fileUploader",style:{display:"none"},accept:".jpg, .jpeg, .png"})]}),Object(M.jsx)(Ke,{})]})},$e=(a(335),function(e){var t=e.superState,a=e.dispatcher,c=t.graphs[t.curGraphIndex],o=Object(n.useState)(""),i=Object(r.a)(o,2),s=i[0],d=i[1],u=Object(n.useState)(""),h=Object(r.a)(u,2),p=h[0],b=h[1],j=Object(n.useCallback)((function(e){return e&&e.focus()}),[]);Object(n.useEffect)((function(){c?(d(c.projectDetails.projectName),b(c.projectDetails.author)):(d(""),b(""))}),[!c||!c.projectDetails.set]);var y=function(e){a({type:C.SET_PROJECT_DETAILS,payload:{projectDetails:e,id:c.id}})};return Object(M.jsx)(Be,{ModelOpen:!c||!c.projectDetails.set,closeModal:c||0!==t.curGraphIndex?function(){c?y(Object(l.a)(Object(l.a)({},c.projectDetails),{},{set:!0})):a({type:C.CHANGE_TAB,payload:0})}:null,title:"Project Details",children:Object(M.jsxs)("form",{className:"proj-details",onSubmit:function(e){e.preventDefault(),c?y({projectName:s,author:p,set:!0}):a({type:C.ADD_GRAPH,payload:{id:(new Date).getTime(),projectDetails:{projectName:s,author:p,set:!0}}})},children:[Object(M.jsx)("span",{children:"Workflow Name"}),Object(M.jsx)("input",{ref:j,placeholder:"Title of workflow",required:!0,value:s,onChange:function(e){return d(e.target.value)}}),Object(M.jsx)("span",{children:"Author"}),Object(M.jsx)("input",{placeholder:"Author of workflow",required:!0,value:p,onChange:function(e){return b(e.target.value)}}),Object(M.jsxs)("div",{className:"expand",children:[Object(M.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save"}),c?Object(M.jsx)(M.Fragment,{}):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:"divider"}),Object(M.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){document.querySelector('input[type="file"]').click()},children:"Open Existing"})]})]})]})})}),Ye=function(){var e=Object(n.useReducer)(Z,W),t=Object(r.a)(e,2),a=t[0],c=t[1];return Object(M.jsxs)("div",{className:"container",children:[Object(M.jsx)($e,{superState:a,dispatcher:c}),Object(M.jsx)(Le,{closeModal:function(){return c({type:C.Model_Close})},superState:a}),Object(M.jsx)(Xe,{state:a,dispatcher:c}),Object(M.jsx)("section",{className:"body",style:{display:"flex"},children:Object(M.jsx)(Me,{dispatcher:c,superState:a})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Qe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,338)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),o(e),i(e)}))};i.a.render(Object(M.jsx)(c.a.StrictMode,{children:Object(M.jsx)(Ye,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),Qe()}},[[336,1,2]]]);
//# sourceMappingURL=main.2b925b07.chunk.js.map